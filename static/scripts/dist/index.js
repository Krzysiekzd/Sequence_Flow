/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],_="[object Arguments]",v="[object Array]",g="[object Boolean]",m="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",x="[object Map]",k="[object Number]",E="[object Object]",S="[object Promise]",A="[object RegExp]",M="[object Set]",C="[object String]",N="[object Symbol]",T="[object WeakMap]",O="[object ArrayBuffer]",j="[object DataView]",P="[object Float32Array]",D="[object Float64Array]",L="[object Int8Array]",I="[object Int16Array]",z="[object Int32Array]",B="[object Uint8Array]",R="[object Uint8ClampedArray]",q="[object Uint16Array]",F="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,X=RegExp(W.source),$=RegExp(Y.source),G=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\ufe0e\\ufe0f",Mt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="["+wt+"]",Nt="["+Mt+"]",Tt="["+xt+"]",Ot="\\d+",jt="["+kt+"]",Pt="["+Et+"]",Dt="[^"+wt+Mt+Ot+kt+Et+St+"]",Lt="\\ud83c[\\udffb-\\udfff]",It="[^"+wt+"]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+St+"]",qt="\\u200d",Ft="(?:"+Pt+"|"+Dt+")",Ut="(?:"+Rt+"|"+Dt+")",Ht="(?:['’](?:d|ll|m|re|s|t|ve))?",Vt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+Tt+"|"+Lt+")?",Yt="["+At+"]?",Xt=Yt+Wt+"(?:"+qt+"(?:"+[It,zt,Bt].join("|")+")"+Yt+Wt+")*",$t="(?:"+[jt,zt,Bt].join("|")+")"+Xt,Gt="(?:"+[It+Tt+"?",Tt,zt,Bt,Ct].join("|")+")",Zt=RegExp("['’]","g"),Kt=RegExp(Tt,"g"),Jt=RegExp(Lt+"(?="+Lt+")|"+Gt+Xt,"g"),Qt=RegExp([Rt+"?"+Pt+"+"+Ht+"(?="+[Nt,Rt,"$"].join("|")+")",Ut+"+"+Vt+"(?="+[Nt,Rt+Ft,"$"].join("|")+")",Rt+"?"+Ft+"+"+Ht,Rt+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot,$t].join("|"),"g"),te=RegExp("["+qt+wt+xt+At+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[P]=ie[D]=ie[L]=ie[I]=ie[z]=ie[B]=ie[R]=ie[q]=ie[F]=!0,ie[_]=ie[v]=ie[O]=ie[g]=ie[j]=ie[m]=ie[y]=ie[b]=ie[x]=ie[k]=ie[E]=ie[A]=ie[M]=ie[C]=ie[T]=!1;var oe={};oe[_]=oe[v]=oe[O]=oe[j]=oe[g]=oe[m]=oe[P]=oe[D]=oe[L]=oe[I]=oe[z]=oe[x]=oe[k]=oe[E]=oe[A]=oe[M]=oe[C]=oe[N]=oe[B]=oe[R]=oe[q]=oe[F]=!0,oe[y]=oe[b]=oe[T]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ue=parseInt,le="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ce="object"==typeof self&&self&&self.Object===Object&&self,he=le||ce||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,_e=pe&&le.process,ve=function(){try{return de&&de.require&&de.require("util").types||_e&&_e.binding&&_e.binding("util")}catch(t){}}(),ge=ve&&ve.isArrayBuffer,me=ve&&ve.isDate,ye=ve&&ve.isMap,be=ve&&ve.isRegExp,we=ve&&ve.isSet,xe=ve&&ve.isTypedArray;function ke(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ce(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ne(t,e){return!(null==t||!t.length)&&Re(t,e,0)>-1}function Te(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function je(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Pe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function De(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ie=He("length");function ze(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Re(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,Fe,n)}function qe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function Ue(t,e){var n=null==t?0:t.length;return n?Ye(t,e)/n:f}function He(t){return function(e){return null==e?i:e[t]}}function Ve(t){return function(e){return null==t?i:t[e]}}function We(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ye(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $e(t){return t?t.slice(0,dn(t)+1).replace(rt,""):t}function Ge(t){return function(e){return t(e)}}function Ze(t,e){return Oe(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function Je(t,e){for(var n=-1,r=t.length;++n<r&&Re(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Re(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var en=Ve({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),nn=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(t){return"\\"+ae[t]}function on(t){return te.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function hn(t){return on(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):Ie(t)}function fn(t){return on(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var pn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_n=function t(e){var n,r=(e=null==e?he:_n.defaults(he.Object(),e,_n.pick(he,ne))).Array,it=e.Date,wt=e.Error,xt=e.Function,kt=e.Math,Et=e.Object,St=e.RegExp,At=e.String,Mt=e.TypeError,Ct=r.prototype,Nt=xt.prototype,Tt=Et.prototype,Ot=e["__core-js_shared__"],jt=Nt.toString,Pt=Tt.hasOwnProperty,Dt=0,Lt=(n=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",It=Tt.toString,zt=jt.call(Et),Bt=he._,Rt=St("^"+jt.call(Pt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=pe?e.Buffer:i,Ft=e.Symbol,Ut=e.Uint8Array,Ht=qt?qt.allocUnsafe:i,Vt=sn(Et.getPrototypeOf,Et),Wt=Et.create,Yt=Tt.propertyIsEnumerable,Xt=Ct.splice,$t=Ft?Ft.isConcatSpreadable:i,Gt=Ft?Ft.iterator:i,Jt=Ft?Ft.toStringTag:i,te=function(){try{var t=lo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,le=it&&it.now!==he.Date.now&&it.now,ce=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=kt.ceil,de=kt.floor,_e=Et.getOwnPropertySymbols,ve=qt?qt.isBuffer:i,Ie=e.isFinite,Ve=Ct.join,vn=sn(Et.keys,Et),gn=kt.max,mn=kt.min,yn=it.now,bn=e.parseInt,wn=kt.random,xn=Ct.reverse,kn=lo(e,"DataView"),En=lo(e,"Map"),Sn=lo(e,"Promise"),An=lo(e,"Set"),Mn=lo(e,"WeakMap"),Cn=lo(Et,"create"),Nn=Mn&&new Mn,Tn={},On=Ro(kn),jn=Ro(En),Pn=Ro(Sn),Dn=Ro(An),Ln=Ro(Mn),In=Ft?Ft.prototype:i,zn=In?In.valueOf:i,Bn=In?In.toString:i;function Rn(t){if(ns(t)&&!Wa(t)&&!(t instanceof Hn)){if(t instanceof Un)return t;if(Pt.call(t,"__wrapped__"))return qo(t)}return new Un(t)}var qn=function(){function t(){}return function(e){if(!es(e))return{};if(Wt)return Wt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Fn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Yn;++e<n;)this.add(t[e])}function $n(t){var e=this.__data__=new Wn(t);this.size=e.size}function Gn(t,e){var n=Wa(t),r=!n&&Va(t),i=!n&&!r&&Ga(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?Xe(t.length,At):[],u=s.length;for(var l in t)!e&&!Pt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||go(l,u))||s.push(l);return s}function Zn(t){var e=t.length;return e?t[Yr(0,e-1)]:i}function Kn(t,e){return Do(Mi(t),ar(e,0,t.length))}function Jn(t){return Do(Mi(t))}function Qn(t,e,n){(n!==i&&!Fa(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Pt.call(t,e)&&Fa(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Fa(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Ci(e,js(e),t)}function ir(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:Ms(t,e[n]);return a}function ar(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,o,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!es(t))return t;var h=Wa(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Mi(t,s)}else{var f=fo(t),d=f==b||f==w;if(Ga(t))return wi(t,u);if(f==E||f==_||d&&!o){if(s=l||d?{}:_o(t),!u)return l?function(t,e){return Ci(t,ho(t),e)}(t,function(t,e){return t&&Ci(e,Ps(e),t)}(s,t)):function(t,e){return Ci(t,co(t),e)}(t,rr(s,t))}else{if(!oe[f])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case O:return xi(t);case g:case m:return new i(+t);case j:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case P:case D:case L:case I:case z:case B:case R:case q:case F:return ki(t,n);case x:return new i;case k:case C:return new i(t);case A:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case M:return new i;case N:return r=t,zn?Et(zn.call(r)):{}}}(t,f,u)}}a||(a=new $n);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(r){s.add(sr(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,i){s.set(i,sr(r,e,n,i,t,a))}));var v=h?i:(c?l?no:eo:l?Ps:js)(t);return Se(v||t,(function(r,i){v&&(r=t[i=r]),tr(s,i,sr(r,e,n,i,t,a))})),s}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new Mt(o);return To((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,o=Ne,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Oe(e,Ge(n))),r?(o=Te,a=!1):e.length>=200&&(o=Ke,a=!1,e=new Xn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}Rn.templateSettings={escape:G,evaluate:Z,interpolate:K,variable:"",imports:{_:Rn}},Rn.prototype=Fn.prototype,Rn.prototype.constructor=Rn,Un.prototype=qn(Fn.prototype),Un.prototype.constructor=Un,Hn.prototype=qn(Fn.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Vn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vn.prototype.get=function(t){var e=this.__data__;if(Cn){var n=e[t];return n===a?i:n}return Pt.call(e,t)?e[t]:i},Vn.prototype.has=function(t){var e=this.__data__;return Cn?e[t]!==i:Pt.call(e,t)},Vn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cn&&e===i?a:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,0))},Wn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Wn.prototype.has=function(t){return er(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(En||Wn),string:new Vn}},Yn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Yn.prototype.get=function(t){return so(this,t).get(t)},Yn.prototype.has=function(t){return so(this,t).has(t)},Yn.prototype.set=function(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,a),this},Xn.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.clear=function(){this.__data__=new Wn,this.size=0},$n.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$n.prototype.get=function(t){return this.__data__.get(t)},$n.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(t,e),this.size=n.size,this};var hr=Oi(yr),fr=Oi(br,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!ls(s):n(s,u)))var u=s,l=a}return l}function _r(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=vo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):je(i,s):r||(i[i.length]=s)}return i}var gr=ji(),mr=ji(!0);function yr(t,e){return t&&gr(t,e,js)}function br(t,e){return t&&mr(t,e,js)}function wr(t,e){return Ce(e,(function(e){return Ja(t[e])}))}function xr(t,e){for(var n=0,r=(e=gi(e,t)).length;null!=t&&n<r;)t=t[Bo(e[n++])];return n&&n==r?t:i}function kr(t,e,n){var r=e(t);return Wa(t)?r:je(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":Jt&&Jt in Et(t)?function(t){var e=Pt.call(t,Jt),n=t[Jt];try{t[Jt]=i;var r=!0}catch(t){}var o=It.call(t);return r&&(e?t[Jt]=n:delete t[Jt]),o}(t):function(t){return It.call(t)}(t)}function Sr(t,e){return t>e}function Ar(t,e){return null!=t&&Pt.call(t,e)}function Mr(t,e){return null!=t&&e in Et(t)}function Cr(t,e,n){for(var o=n?Te:Ne,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Oe(f,Ge(e))),c=mn(f.length,c),l[u]=!n&&(e||a>=120&&f.length>=120)?new Xn(u&&f):i}f=t[0];var d=-1,p=l[0];t:for(;++d<a&&h.length<c;){var _=f[d],v=e?e(_):_;if(_=n||0!==_?_:0,!(p?Ke(p,v):o(h,v,n))){for(u=s;--u;){var g=l[u];if(!(g?Ke(g,v):o(t[u],v,n)))continue t}p&&p.push(v),h.push(_)}}return h}function Nr(t,e,n){var r=null==(t=Ao(t,e=gi(e,t)))?t:t[Bo(Ko(e))];return null==r?i:ke(r,t,n)}function Tr(t){return ns(t)&&Er(t)==_}function Or(t,e,n,r,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Wa(t),u=Wa(e),l=s?v:fo(t),c=u?v:fo(e),h=(l=l==_?E:l)==E,f=(c=c==_?E:c)==E,d=l==c;if(d&&Ga(t)){if(!Ga(e))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new $n),s||cs(t)?Qi(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case j:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case g:case m:case k:return Fa(+t,+e);case y:return t.name==e.name&&t.message==e.message;case A:case C:return t==e+"";case x:var s=an;case M:var u=1&r;if(s||(s=ln),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=Qi(s(t),s(e),r,i,o,a);return a.delete(t),c;case N:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,l,n,r,o,a);if(!(1&n)){var p=h&&Pt.call(t,"__wrapped__"),b=f&&Pt.call(e,"__wrapped__");if(p||b){var w=p?t.value():t,S=b?e.value():e;return a||(a=new $n),o(w,S,n,r,a)}}return!!d&&(a||(a=new $n),function(t,e,n,r,o,a){var s=1&n,u=eo(t),l=u.length;if(l!=eo(e).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in e:Pt.call(e,h)))return!1}var f=a.get(t),d=a.get(e);if(f&&d)return f==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var _=s;++c<l;){var v=t[h=u[c]],g=e[h];if(r)var m=s?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(!(m===i?v===g||o(v,g,n,r,a):m)){p=!1;break}_||(_="constructor"==h)}if(p&&!_){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,r,o,a))}(t,e,n,r,Or,o))}function jr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Et(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in t))return!1}else{var f=new $n;if(r)var d=r(c,h,l,t,e,f);if(!(d===i?Or(h,c,3,r,f):d))return!1}}return!0}function Pr(t){return!(!es(t)||(e=t,Lt&&Lt in e))&&(Ja(t)?Rt:_t).test(Ro(t));var e}function Dr(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Wa(t)?Rr(t[0],t[1]):Br(t):du(t)}function Lr(t){if(!xo(t))return vn(t);var e=[];for(var n in Et(t))Pt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ir(t,e){return t<e}function zr(t,e){var n=-1,i=Xa(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Br(t){var e=uo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||jr(n,t,e)}}function Rr(t,e){return yo(t)&&ko(e)?Eo(Bo(t),e):function(n){var r=Ms(n,t);return r===i&&r===e?Cs(n,t):Or(e,r,3)}}function qr(t,e,n,r,o){t!==e&&gr(e,(function(a,s){if(o||(o=new $n),es(a))!function(t,e,n,r,o,a,s){var u=Co(t,n),l=Co(e,n),c=s.get(l);if(c)Qn(t,n,c);else{var h=a?a(u,l,n+"",t,e,s):i,f=h===i;if(f){var d=Wa(l),p=!d&&Ga(l),_=!d&&!p&&cs(l);h=l,d||p||_?Wa(u)?h=u:$a(u)?h=Mi(u):p?(f=!1,h=wi(l,!0)):_?(f=!1,h=ki(l,!0)):h=[]:os(l)||Va(l)?(h=u,Va(u)?h=ms(u):es(u)&&!Ja(u)||(h=_o(l))):f=!1}f&&(s.set(l,h),o(h,l,r,a,s),s.delete(l)),Qn(t,n,h)}}(t,e,s,n,qr,r,o);else{var u=r?r(Co(t,s),a,s+"",t,e,o):i;u===i&&(u=a),Qn(t,s,u)}}),Ps)}function Fr(t,e){var n=t.length;if(n)return go(e+=e<0?n:0,n)?t[e]:i}function Ur(t,e,n){e=e.length?Oe(e,(function(t){return Wa(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Oe(e,Ge(ao()));var i=zr(t,(function(t,n,i){var o=Oe(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ei(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Hr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=xr(t,a);n(s,a)&&Kr(o,gi(a,t),s)}return o}function Vr(t,e,n,r){var i=r?qe:Re,o=-1,a=e.length,s=t;for(t===e&&(e=Mi(e)),n&&(s=Oe(t,Ge(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Xt.call(s,u,1),Xt.call(t,u,1);return t}function Wr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;go(i)?Xt.call(t,i,1):li(t,i)}}return t}function Yr(t,e){return t+de(wn()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function $r(t,e){return Oo(So(t,e,iu),t+"")}function Gr(t){return Zn(Fs(t))}function Zr(t,e){var n=Fs(t);return Do(n,ar(e,0,n.length))}function Kr(t,e,n,r){if(!es(t))return t;for(var o=-1,a=(e=gi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=Bo(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var h=u[l];(c=r?r(h,l,u):i)===i&&(c=es(h)?h:go(e[o+1])?[]:{})}tr(u,l,c),u=u[l]}return t}var Jr=Nn?function(t,e){return Nn.set(t,e),t}:iu,Qr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Do(Fs(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ls(e),c=e===i;o<a;){var h=de((o+a)/2),f=n(t[h]),d=f!==i,p=null===f,_=f==f,v=ls(f);if(s)var g=r||_;else g=c?_&&(r||d):u?_&&d&&(r||!p):l?_&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);g?o=h+1:a=h}return mn(a,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Fa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ai(t){return"number"==typeof t?t:ls(t)?f:+t}function si(t){if("string"==typeof t)return t;if(Wa(t))return Oe(t,si)+"";if(ls(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Ne,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Te;else if(o>=200){var l=e?null:Xi(t);if(l)return ln(l);a=!1,i=Ke,u=new Xn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function li(t,e){return null==(t=Ao(t,e=gi(e,t)))||delete t[Bo(Ko(e))]}function ci(t,e,n,r){return Kr(t,e,n(xr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Pe(e,(function(t,e){return e.func.apply(e.thisArg,je([t],e.args))}),n)}function di(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=cr(a[o]||s,t[u],e,n));return ui(vr(a,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function _i(t){return $a(t)?t:[]}function vi(t){return"function"==typeof t?t:iu}function gi(t,e){return Wa(t)?t:yo(t,e)?[t]:zo(ys(t))}var mi=$r;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var bi=ae||function(t){return he.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Ht?Ht(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function ki(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ls(t),s=e!==i,u=null===e,l=e==e,c=ls(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Si(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,l=e.length,c=gn(a-s,0),h=r(l+c),f=!i;++u<l;)h[u]=e[u];for(;++o<s;)(f||o<a)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function Ai(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,h=gn(a-u,0),f=r(h+c),d=!i;++o<h;)f[o]=t[o];for(var p=o;++l<c;)f[p+l]=e[l];for(;++s<u;)(d||o<a)&&(f[p+n[s]]=t[o++]);return f}function Mi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ci(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?ir(n,u,l):tr(n,u,l)}return n}function Ni(t,e){return function(n,r){var i=Wa(n)?Ee:nr,o=e?e():{};return i(n,t,ao(r,2),o)}}function Ti(t){return $r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&mo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Et(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Oi(t,e){return function(n,r){if(null==n)return n;if(!Xa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Et(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ji(t){return function(e,n,r){for(var i=-1,o=Et(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Pi(t){return function(e){var n=on(e=ys(e))?fn(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Di(t){return function(e){return Pe(Js(Vs(e).replace(Zt,"")),t,"")}}function Li(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=qn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function Ii(t){return function(e,n,r){var o=Et(e);if(!Xa(e)){var a=ao(n,3);e=js(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function zi(t){return to((function(e){var n=e.length,r=n,a=Un.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Mt(o);if(a&&!u&&"wrapper"==io(s))var u=new Un([],!0)}for(r=u?r:n;++r<n;){var l=io(s=e[r]),c="wrapper"==l?ro(s):i;u=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[io(c[0])].apply(u,c[3]):1==s.length&&bo(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Wa(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Bi(t,e,n,o,a,s,u,c,h,f){var d=e&l,p=1&e,_=2&e,v=24&e,g=512&e,m=_?i:Li(t);return function i(){for(var l=arguments.length,y=r(l),b=l;b--;)y[b]=arguments[b];if(v)var w=oo(i),x=tn(y,w);if(o&&(y=Si(y,o,a,v)),s&&(y=Ai(y,s,u,v)),l-=x,v&&l<f){var k=un(y,w);return Wi(t,e,Bi,i.placeholder,n,y,k,c,h,f-l)}var E=p?n:this,S=_?E[t]:t;return l=y.length,c?y=Mo(y,c):g&&l>1&&y.reverse(),d&&h<l&&(y.length=h),this&&this!==he&&this instanceof i&&(S=m||Li(S)),S.apply(E,y)}}function Ri(t,e){return function(n,r){return function(t,e,n,r){return yr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function qi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=ai(n),r=ai(r)),o=t(n,r)}return o}}function Fi(t){return to((function(e){return e=Oe(e,Ge(ao())),$r((function(n){var r=this;return t(e,(function(t){return ke(t,r,n)}))}))}))}function Ui(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?Xr(e,t):e;var r=Xr(e,fe(t/hn(e)));return on(e)?yi(fn(r),0,t).join(""):r.slice(0,t)}function Hi(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=i),e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n,i){for(var o=-1,a=gn(fe((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:ps(o),t)}}function Vi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function Wi(t,e,n,r,o,a,s,l,c,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,l,c,h],p=n.apply(i,d);return bo(t)&&No(p,d),p.placeholder=r,jo(p,t,e)}function Yi(t){var e=kt[t];return function(t,n){if(t=gs(t),(n=null==n?0:mn(_s(n),292))&&Ie(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=An&&1/ln(new An([,-0]))[1]==c?function(t){return new An(t)}:lu;function $i(t){return function(e){var n=fo(e);return n==x?an(e):n==M?cn(e):function(t,e){return Oe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gi(t,e,n,a,c,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Mt(o);var _=a?a.length:0;if(_||(e&=-97,a=c=i),f=f===i?f:gn(_s(f),0),d=d===i?d:_s(d),_-=c?c.length:0,64&e){var v=a,g=c;a=c=i}var m=p?i:ro(t),y=[t,e,n,a,c,v,g,h,f,d];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Si(c,u,e[4]):u,t[4]=c?un(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Ai(c,u,e[6]):u,t[6]=c?un(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(y,m),t=y[0],e=y[1],n=y[2],a=y[3],c=y[4],!(d=y[9]=y[9]===i?p?0:t.length:gn(y[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Li(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=oo(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:un(u,c);return(s-=h.length)<n?Wi(t,e,Bi,a.placeholder,i,u,h,i,i,n-s):ke(this&&this!==he&&this instanceof a?o:t,this,u)}}(t,e,d):e!=u&&33!=e||c.length?Bi.apply(i,y):function(t,e,n,i){var o=1&e,a=Li(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),f=this&&this!==he&&this instanceof e?a:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return ke(f,o?n:this,h)}}(t,e,n,a);else var b=function(t,e,n){var r=1&e,i=Li(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return jo((m?Jr:No)(b,y),t,e)}function Zi(t,e,n,r){return t===i||Fa(t,Tt[n])&&!Pt.call(r,n)?e:t}function Ki(t,e,n,r,o,a){return es(t)&&es(e)&&(a.set(e,t),qr(t,e,i,Ki,a),a.delete(e)),t}function Ji(t){return os(t)?i:t}function Qi(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var f=-1,d=!0,p=2&n?new Xn:i;for(a.set(t,e),a.set(e,t);++f<u;){var _=t[f],v=e[f];if(r)var g=s?r(v,_,f,e,t,a):r(_,v,f,t,e,a);if(g!==i){if(g)continue;d=!1;break}if(p){if(!Le(e,(function(t,e){if(!Ke(p,e)&&(_===t||o(_,t,n,r,a)))return p.push(e)}))){d=!1;break}}else if(_!==v&&!o(_,v,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function to(t){return Oo(So(t,i,Yo),t+"")}function eo(t){return kr(t,js,co)}function no(t){return kr(t,Ps,ho)}var ro=Nn?function(t){return Nn.get(t)}:lu;function io(t){for(var e=t.name+"",n=Tn[e],r=Pt.call(Tn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Pt.call(Rn,"placeholder")?Rn:t).placeholder}function ao(){var t=Rn.iteratee||ou;return t=t===ou?Dr:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=js(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ko(i)]}return e}function lo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Pr(n)?n:i}var co=_e?function(t){return null==t?[]:(t=Et(t),Ce(_e(t),(function(e){return Yt.call(t,e)})))}:vu,ho=_e?function(t){for(var e=[];t;)je(e,co(t)),t=Vt(t);return e}:vu,fo=Er;function po(t,e,n){for(var r=-1,i=(e=gi(e,t)).length,o=!1;++r<i;){var a=Bo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ts(i)&&go(a,i)&&(Wa(t)||Va(t))}function _o(t){return"function"!=typeof t.constructor||xo(t)?{}:qn(Vt(t))}function vo(t){return Wa(t)||Va(t)||!!($t&&t&&t[$t])}function go(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Xa(n)&&go(e,n.length):"string"==r&&e in n)&&Fa(n[e],t)}function yo(t,e){if(Wa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||Q.test(t)||!J.test(t)||null!=e&&t in Et(e)}function bo(t){var e=io(t),n=Rn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(kn&&fo(new kn(new ArrayBuffer(1)))!=j||En&&fo(new En)!=x||Sn&&fo(Sn.resolve())!=S||An&&fo(new An)!=M||Mn&&fo(new Mn)!=T)&&(fo=function(t){var e=Er(t),n=e==E?t.constructor:i,r=n?Ro(n):"";if(r)switch(r){case On:return j;case jn:return x;case Pn:return S;case Dn:return M;case Ln:return T}return e});var wo=Ot?Ja:gu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function ko(t){return t==t&&!es(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Et(n))}}function So(t,e,n){return e=gn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=gn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),ke(t,this,u)}}function Ao(t,e){return e.length<2?t:xr(t,ei(e,0,-1))}function Mo(t,e){for(var n=t.length,r=mn(e.length,n),o=Mi(t);r--;){var a=e[r];t[r]=go(a,n)?o[a]:i}return t}function Co(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=Po(Jr),To=ce||function(t,e){return he.setTimeout(t,e)},Oo=Po(Qr);function jo(t,e,n){var r=e+"";return Oo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Se(p,(function(n){var r="_."+n[0];e&n[1]&&!Ne(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Po(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Do(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Yr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Lo,Io,zo=(Lo=La((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Io.size&&Io.clear(),t})),Io=Lo.cache,Lo);function Bo(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ro(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Hn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Fo=$r((function(t,e){return $a(t)?cr(t,vr(e,1,$a,!0)):[]})),Uo=$r((function(t,e){var n=Ko(e);return $a(n)&&(n=i),$a(t)?cr(t,vr(e,1,$a,!0),ao(n,2)):[]})),Ho=$r((function(t,e){var n=Ko(e);return $a(n)&&(n=i),$a(t)?cr(t,vr(e,1,$a,!0),i,n):[]}));function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:_s(n);return i<0&&(i=gn(r+i,0)),Be(t,ao(e,3),i)}function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=_s(n),o=n<0?gn(r+o,0):mn(o,r-1)),Be(t,ao(e,3),o,!0)}function Yo(t){return null!=t&&t.length?vr(t,1):[]}function Xo(t){return t&&t.length?t[0]:i}var $o=$r((function(t){var e=Oe(t,_i);return e.length&&e[0]===t[0]?Cr(e):[]})),Go=$r((function(t){var e=Ko(t),n=Oe(t,_i);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Cr(n,ao(e,2)):[]})),Zo=$r((function(t){var e=Ko(t),n=Oe(t,_i);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Cr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=$r(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Vr(t,e):t}var ta=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Wr(t,Oe(e,(function(t){return go(t,n)?+t:t})).sort(Ei)),r}));function ea(t){return null==t?t:xn.call(t)}var na=$r((function(t){return ui(vr(t,1,$a,!0))})),ra=$r((function(t){var e=Ko(t);return $a(e)&&(e=i),ui(vr(t,1,$a,!0),ao(e,2))})),ia=$r((function(t){var e=Ko(t);return e="function"==typeof e?e:i,ui(vr(t,1,$a,!0),i,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=Ce(t,(function(t){if($a(t))return e=gn(t.length,e),!0})),Xe(e,(function(e){return Oe(t,He(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:Oe(n,(function(t){return ke(e,i,t)}))}var sa=$r((function(t,e){return $a(t)?cr(t,e):[]})),ua=$r((function(t){return di(Ce(t,$a))})),la=$r((function(t){var e=Ko(t);return $a(e)&&(e=i),di(Ce(t,$a),ao(e,2))})),ca=$r((function(t){var e=Ko(t);return e="function"==typeof e?e:i,di(Ce(t,$a),i,e)})),ha=$r(oa),fa=$r((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,aa(t,n)}));function da(t){var e=Rn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var _a=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&go(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Un(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),va=Ni((function(t,e,n){Pt.call(t,n)?++t[n]:ir(t,n,1)})),ga=Ii(Vo),ma=Ii(Wo);function ya(t,e){return(Wa(t)?Se:hr)(t,ao(e,3))}function ba(t,e){return(Wa(t)?Ae:fr)(t,ao(e,3))}var wa=Ni((function(t,e,n){Pt.call(t,n)?t[n].push(e):ir(t,n,[e])})),xa=$r((function(t,e,n){var i=-1,o="function"==typeof e,a=Xa(t)?r(t.length):[];return hr(t,(function(t){a[++i]=o?ke(e,t,n):Nr(t,e,n)})),a})),ka=Ni((function(t,e,n){ir(t,n,e)}));function Ea(t,e){return(Wa(t)?Oe:zr)(t,ao(e,3))}var Sa=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Aa=$r((function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),Ur(t,vr(e,1),[])})),Ma=le||function(){return he.Date.now()};function Ca(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Gi(t,l,i,i,i,i,e)}function Na(t,e){var n;if("function"!=typeof e)throw new Mt(o);return t=_s(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ta=$r((function(t,e,n){var r=1;if(n.length){var i=un(n,oo(Ta));r|=u}return Gi(t,r,e,n,i)})),Oa=$r((function(t,e,n){var r=3;if(n.length){var i=un(n,oo(Oa));r|=u}return Gi(e,r,t,n,i)}));function ja(t,e,n){var r,a,s,u,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Mt(o);function _(e){var n=r,o=a;return r=a=i,h=e,u=t.apply(o,n)}function v(t){return h=t,l=To(m,e),f?_(t):u}function g(t){var n=t-c;return c===i||n>=e||n<0||d&&t-h>=s}function m(){var t=Ma();if(g(t))return y(t);l=To(m,function(t){var n=e-(t-c);return d?mn(n,s-(t-h)):n}(t))}function y(t){return l=i,p&&r?_(t):(r=a=i,u)}function b(){var t=Ma(),n=g(t);if(r=arguments,a=this,c=t,n){if(l===i)return v(c);if(d)return bi(l),l=To(m,e),_(c)}return l===i&&(l=To(m,e)),u}return e=gs(e)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?gn(gs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==i&&bi(l),h=0,r=c=a=l=i},b.flush=function(){return l===i?u:y(Ma())},b}var Pa=$r((function(t,e){return lr(t,1,e)})),Da=$r((function(t,e,n){return lr(t,gs(e)||0,n)}));function La(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Mt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||Yn),n}function Ia(t){if("function"!=typeof t)throw new Mt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}La.Cache=Yn;var za=mi((function(t,e){var n=(e=1==e.length&&Wa(e[0])?Oe(e[0],Ge(ao())):Oe(vr(e,1),Ge(ao()))).length;return $r((function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ke(t,this,r)}))})),Ba=$r((function(t,e){var n=un(e,oo(Ba));return Gi(t,u,i,e,n)})),Ra=$r((function(t,e){var n=un(e,oo(Ra));return Gi(t,64,i,e,n)})),qa=to((function(t,e){return Gi(t,256,i,i,i,e)}));function Fa(t,e){return t===e||t!=t&&e!=e}var Ua=Vi(Sr),Ha=Vi((function(t,e){return t>=e})),Va=Tr(function(){return arguments}())?Tr:function(t){return ns(t)&&Pt.call(t,"callee")&&!Yt.call(t,"callee")},Wa=r.isArray,Ya=ge?Ge(ge):function(t){return ns(t)&&Er(t)==O};function Xa(t){return null!=t&&ts(t.length)&&!Ja(t)}function $a(t){return ns(t)&&Xa(t)}var Ga=ve||gu,Za=me?Ge(me):function(t){return ns(t)&&Er(t)==m};function Ka(t){if(!ns(t))return!1;var e=Er(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Er(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==_s(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=ye?Ge(ye):function(t){return ns(t)&&fo(t)==x};function is(t){return"number"==typeof t||ns(t)&&Er(t)==k}function os(t){if(!ns(t)||Er(t)!=E)return!1;var e=Vt(t);if(null===e)return!0;var n=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==zt}var as=be?Ge(be):function(t){return ns(t)&&Er(t)==A},ss=we?Ge(we):function(t){return ns(t)&&fo(t)==M};function us(t){return"string"==typeof t||!Wa(t)&&ns(t)&&Er(t)==C}function ls(t){return"symbol"==typeof t||ns(t)&&Er(t)==N}var cs=xe?Ge(xe):function(t){return ns(t)&&ts(t.length)&&!!ie[Er(t)]},hs=Vi(Ir),fs=Vi((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Xa(t))return us(t)?fn(t):Mi(t);if(Gt&&t[Gt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Gt]());var e=fo(t);return(e==x?an:e==M?ln:Fs)(t)}function ps(t){return t?(t=gs(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _s(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t?ar(_s(t),0,d):0}function gs(t){if("number"==typeof t)return t;if(ls(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=pt.test(t);return n||vt.test(t)?ue(t.slice(2),n?2:8):dt.test(t)?f:+t}function ms(t){return Ci(t,Ps(t))}function ys(t){return null==t?"":si(t)}var bs=Ti((function(t,e){if(xo(e)||Xa(e))Ci(e,js(e),t);else for(var n in e)Pt.call(e,n)&&tr(t,n,e[n])})),ws=Ti((function(t,e){Ci(e,Ps(e),t)})),xs=Ti((function(t,e,n,r){Ci(e,Ps(e),t,r)})),ks=Ti((function(t,e,n,r){Ci(e,js(e),t,r)})),Es=to(or),Ss=$r((function(t,e){t=Et(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&mo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Ps(a),u=-1,l=s.length;++u<l;){var c=s[u],h=t[c];(h===i||Fa(h,Tt[c])&&!Pt.call(t,c))&&(t[c]=a[c])}return t})),As=$r((function(t){return t.push(i,Ki),ke(Ls,i,t)}));function Ms(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Cs(t,e){return null!=t&&po(t,e,Mr)}var Ns=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),t[e]=n}),eu(iu)),Ts=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),Pt.call(t,e)?t[e].push(n):t[e]=[n]}),ao),Os=$r(Nr);function js(t){return Xa(t)?Gn(t):Lr(t)}function Ps(t){return Xa(t)?Gn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Pt.call(t,r))&&n.push(r);return n}(t)}var Ds=Ti((function(t,e,n){qr(t,e,n)})),Ls=Ti((function(t,e,n,r){qr(t,e,n,r)})),Is=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Oe(e,(function(e){return e=gi(e,t),r||(r=e.length>1),e})),Ci(t,no(t),n),r&&(n=sr(n,7,Ji));for(var i=e.length;i--;)li(n,e[i]);return n})),zs=to((function(t,e){return null==t?{}:function(t,e){return Hr(t,e,(function(e,n){return Cs(t,n)}))}(t,e)}));function Bs(t,e){if(null==t)return{};var n=Oe(no(t),(function(t){return[t]}));return e=ao(e),Hr(t,n,(function(t,n){return e(t,n[0])}))}var Rs=$i(js),qs=$i(Ps);function Fs(t){return null==t?[]:Ze(t,js(t))}var Us=Di((function(t,e,n){return e=e.toLowerCase(),t+(n?Hs(e):e)}));function Hs(t){return Ks(ys(t).toLowerCase())}function Vs(t){return(t=ys(t))&&t.replace(mt,en).replace(Kt,"")}var Ws=Di((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ys=Di((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Pi("toLowerCase"),$s=Di((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Gs=Di((function(t,e,n){return t+(n?" ":"")+Ks(e)})),Zs=Di((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Pi("toUpperCase");function Js(t,e,n){return t=ys(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Qs=$r((function(t,e){try{return ke(t,i,e)}catch(t){return Ka(t)?t:new wt(t)}})),tu=to((function(t,e){return Se(e,(function(e){e=Bo(e),ir(t,e,Ta(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=zi(),ru=zi(!0);function iu(t){return t}function ou(t){return Dr("function"==typeof t?t:sr(t,1))}var au=$r((function(t,e){return function(n){return Nr(n,t,e)}})),su=$r((function(t,e){return function(n){return Nr(t,n,e)}}));function uu(t,e,n){var r=js(e),i=wr(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,js(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return Se(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,je([this.value()],arguments))})})),t}function lu(){}var cu=Fi(Oe),hu=Fi(Me),fu=Fi(Le);function du(t){return yo(t)?He(Bo(t)):function(t){return function(e){return xr(e,t)}}(t)}var pu=Hi(),_u=Hi(!0);function vu(){return[]}function gu(){return!1}var mu,yu=qi((function(t,e){return t+e}),0),bu=Yi("ceil"),wu=qi((function(t,e){return t/e}),1),xu=Yi("floor"),ku=qi((function(t,e){return t*e}),1),Eu=Yi("round"),Su=qi((function(t,e){return t-e}),0);return Rn.after=function(t,e){if("function"!=typeof e)throw new Mt(o);return t=_s(t),function(){if(--t<1)return e.apply(this,arguments)}},Rn.ary=Ca,Rn.assign=bs,Rn.assignIn=ws,Rn.assignInWith=xs,Rn.assignWith=ks,Rn.at=Es,Rn.before=Na,Rn.bind=Ta,Rn.bindAll=tu,Rn.bindKey=Oa,Rn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Wa(t)?t:[t]},Rn.chain=da,Rn.chunk=function(t,e,n){e=(n?mo(t,e,n):e===i)?1:gn(_s(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(fe(o/e));a<o;)u[s++]=ei(t,a,a+=e);return u},Rn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Rn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return je(Wa(n)?Mi(n):[n],vr(e,1))},Rn.cond=function(t){var e=null==t?0:t.length,n=ao();return t=e?Oe(t,(function(t){if("function"!=typeof t[1])throw new Mt(o);return[n(t[0]),t[1]]})):[],$r((function(n){for(var r=-1;++r<e;){var i=t[r];if(ke(i[0],this,n))return ke(i[1],this,n)}}))},Rn.conforms=function(t){return function(t){var e=js(t);return function(n){return ur(n,t,e)}}(sr(t,1))},Rn.constant=eu,Rn.countBy=va,Rn.create=function(t,e){var n=qn(t);return null==e?n:rr(n,e)},Rn.curry=function t(e,n,r){var o=Gi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Rn.curryRight=function t(e,n,r){var o=Gi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Rn.debounce=ja,Rn.defaults=Ss,Rn.defaultsDeep=As,Rn.defer=Pa,Rn.delay=Da,Rn.difference=Fo,Rn.differenceBy=Uo,Rn.differenceWith=Ho,Rn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:_s(e))<0?0:e,r):[]},Rn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:_s(e)))<0?0:e):[]},Rn.dropRightWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!0,!0):[]},Rn.dropWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!0):[]},Rn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=_s(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:_s(r))<0&&(r+=o),r=n>r?0:vs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Rn.filter=function(t,e){return(Wa(t)?Ce:_r)(t,ao(e,3))},Rn.flatMap=function(t,e){return vr(Ea(t,e),1)},Rn.flatMapDeep=function(t,e){return vr(Ea(t,e),c)},Rn.flatMapDepth=function(t,e,n){return n=n===i?1:_s(n),vr(Ea(t,e),n)},Rn.flatten=Yo,Rn.flattenDeep=function(t){return null!=t&&t.length?vr(t,c):[]},Rn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:_s(e)):[]},Rn.flip=function(t){return Gi(t,512)},Rn.flow=nu,Rn.flowRight=ru,Rn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Rn.functions=function(t){return null==t?[]:wr(t,js(t))},Rn.functionsIn=function(t){return null==t?[]:wr(t,Ps(t))},Rn.groupBy=wa,Rn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Rn.intersection=$o,Rn.intersectionBy=Go,Rn.intersectionWith=Zo,Rn.invert=Ns,Rn.invertBy=Ts,Rn.invokeMap=xa,Rn.iteratee=ou,Rn.keyBy=ka,Rn.keys=js,Rn.keysIn=Ps,Rn.map=Ea,Rn.mapKeys=function(t,e){var n={};return e=ao(e,3),yr(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Rn.mapValues=function(t,e){var n={};return e=ao(e,3),yr(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Rn.matches=function(t){return Br(sr(t,1))},Rn.matchesProperty=function(t,e){return Rr(t,sr(e,1))},Rn.memoize=La,Rn.merge=Ds,Rn.mergeWith=Ls,Rn.method=au,Rn.methodOf=su,Rn.mixin=uu,Rn.negate=Ia,Rn.nthArg=function(t){return t=_s(t),$r((function(e){return Fr(e,t)}))},Rn.omit=Is,Rn.omitBy=function(t,e){return Bs(t,Ia(ao(e)))},Rn.once=function(t){return Na(2,t)},Rn.orderBy=function(t,e,n,r){return null==t?[]:(Wa(e)||(e=null==e?[]:[e]),Wa(n=r?i:n)||(n=null==n?[]:[n]),Ur(t,e,n))},Rn.over=cu,Rn.overArgs=za,Rn.overEvery=hu,Rn.overSome=fu,Rn.partial=Ba,Rn.partialRight=Ra,Rn.partition=Sa,Rn.pick=zs,Rn.pickBy=Bs,Rn.property=du,Rn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Rn.pull=Jo,Rn.pullAll=Qo,Rn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Vr(t,e,ao(n,2)):t},Rn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Vr(t,e,i,n):t},Rn.pullAt=ta,Rn.range=pu,Rn.rangeRight=_u,Rn.rearg=qa,Rn.reject=function(t,e){return(Wa(t)?Ce:_r)(t,Ia(ao(e,3)))},Rn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=ao(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Wr(t,i),n},Rn.rest=function(t,e){if("function"!=typeof t)throw new Mt(o);return $r(t,e=e===i?e:_s(e))},Rn.reverse=ea,Rn.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:_s(e),(Wa(t)?Kn:Zr)(t,e)},Rn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},Rn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},Rn.shuffle=function(t){return(Wa(t)?Jn:ti)(t)},Rn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=r):(e=null==e?0:_s(e),n=n===i?r:_s(n)),ei(t,e,n)):[]},Rn.sortBy=Aa,Rn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Rn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,ao(e,2)):[]},Rn.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=si(e))&&on(t)?yi(fn(t),0,n):t.split(e,n):[]},Rn.spread=function(t,e){if("function"!=typeof t)throw new Mt(o);return e=null==e?0:gn(_s(e),0),$r((function(n){var r=n[e],i=yi(n,0,e);return r&&je(i,r),ke(t,this,i)}))},Rn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Rn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:_s(e))<0?0:e):[]},Rn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:_s(e)))<0?0:e,r):[]},Rn.takeRightWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!1,!0):[]},Rn.takeWhile=function(t,e){return t&&t.length?hi(t,ao(e,3)):[]},Rn.tap=function(t,e){return e(t),t},Rn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Mt(o);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ja(t,e,{leading:r,maxWait:e,trailing:i})},Rn.thru=pa,Rn.toArray=ds,Rn.toPairs=Rs,Rn.toPairsIn=qs,Rn.toPath=function(t){return Wa(t)?Oe(t,Bo):ls(t)?[t]:Mi(zo(ys(t)))},Rn.toPlainObject=ms,Rn.transform=function(t,e,n){var r=Wa(t),i=r||Ga(t)||cs(t);if(e=ao(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:es(t)&&Ja(o)?qn(Vt(t)):{}}return(i?Se:yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Rn.unary=function(t){return Ca(t,1)},Rn.union=na,Rn.unionBy=ra,Rn.unionWith=ia,Rn.uniq=function(t){return t&&t.length?ui(t):[]},Rn.uniqBy=function(t,e){return t&&t.length?ui(t,ao(e,2)):[]},Rn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Rn.unset=function(t,e){return null==t||li(t,e)},Rn.unzip=oa,Rn.unzipWith=aa,Rn.update=function(t,e,n){return null==t?t:ci(t,e,vi(n))},Rn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,vi(n),r)},Rn.values=Fs,Rn.valuesIn=function(t){return null==t?[]:Ze(t,Ps(t))},Rn.without=sa,Rn.words=Js,Rn.wrap=function(t,e){return Ba(vi(e),t)},Rn.xor=ua,Rn.xorBy=la,Rn.xorWith=ca,Rn.zip=ha,Rn.zipObject=function(t,e){return pi(t||[],e||[],tr)},Rn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Kr)},Rn.zipWith=fa,Rn.entries=Rs,Rn.entriesIn=qs,Rn.extend=ws,Rn.extendWith=xs,uu(Rn,Rn),Rn.add=yu,Rn.attempt=Qs,Rn.camelCase=Us,Rn.capitalize=Hs,Rn.ceil=bu,Rn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=gs(n))==n?n:0),e!==i&&(e=(e=gs(e))==e?e:0),ar(gs(t),e,n)},Rn.clone=function(t){return sr(t,4)},Rn.cloneDeep=function(t){return sr(t,5)},Rn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},Rn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},Rn.conformsTo=function(t,e){return null==e||ur(t,e,js(e))},Rn.deburr=Vs,Rn.defaultTo=function(t,e){return null==t||t!=t?e:t},Rn.divide=wu,Rn.endsWith=function(t,e,n){t=ys(t),e=si(e);var r=t.length,o=n=n===i?r:ar(_s(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Rn.eq=Fa,Rn.escape=function(t){return(t=ys(t))&&$.test(t)?t.replace(Y,nn):t},Rn.escapeRegExp=function(t){return(t=ys(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Rn.every=function(t,e,n){var r=Wa(t)?Me:dr;return n&&mo(t,e,n)&&(e=i),r(t,ao(e,3))},Rn.find=ga,Rn.findIndex=Vo,Rn.findKey=function(t,e){return ze(t,ao(e,3),yr)},Rn.findLast=ma,Rn.findLastIndex=Wo,Rn.findLastKey=function(t,e){return ze(t,ao(e,3),br)},Rn.floor=xu,Rn.forEach=ya,Rn.forEachRight=ba,Rn.forIn=function(t,e){return null==t?t:gr(t,ao(e,3),Ps)},Rn.forInRight=function(t,e){return null==t?t:mr(t,ao(e,3),Ps)},Rn.forOwn=function(t,e){return t&&yr(t,ao(e,3))},Rn.forOwnRight=function(t,e){return t&&br(t,ao(e,3))},Rn.get=Ms,Rn.gt=Ua,Rn.gte=Ha,Rn.has=function(t,e){return null!=t&&po(t,e,Ar)},Rn.hasIn=Cs,Rn.head=Xo,Rn.identity=iu,Rn.includes=function(t,e,n,r){t=Xa(t)?t:Fs(t),n=n&&!r?_s(n):0;var i=t.length;return n<0&&(n=gn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Re(t,e,n)>-1},Rn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:_s(n);return i<0&&(i=gn(r+i,0)),Re(t,e,i)},Rn.inRange=function(t,e,n){return e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n){return t>=mn(e,n)&&t<gn(e,n)}(t=gs(t),e,n)},Rn.invoke=Os,Rn.isArguments=Va,Rn.isArray=Wa,Rn.isArrayBuffer=Ya,Rn.isArrayLike=Xa,Rn.isArrayLikeObject=$a,Rn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Er(t)==g},Rn.isBuffer=Ga,Rn.isDate=Za,Rn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Rn.isEmpty=function(t){if(null==t)return!0;if(Xa(t)&&(Wa(t)||"string"==typeof t||"function"==typeof t.splice||Ga(t)||cs(t)||Va(t)))return!t.length;var e=fo(t);if(e==x||e==M)return!t.size;if(xo(t))return!Lr(t).length;for(var n in t)if(Pt.call(t,n))return!1;return!0},Rn.isEqual=function(t,e){return Or(t,e)},Rn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Or(t,e,i,n):!!r},Rn.isError=Ka,Rn.isFinite=function(t){return"number"==typeof t&&Ie(t)},Rn.isFunction=Ja,Rn.isInteger=Qa,Rn.isLength=ts,Rn.isMap=rs,Rn.isMatch=function(t,e){return t===e||jr(t,e,uo(e))},Rn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,jr(t,e,uo(e),n)},Rn.isNaN=function(t){return is(t)&&t!=+t},Rn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(t)},Rn.isNil=function(t){return null==t},Rn.isNull=function(t){return null===t},Rn.isNumber=is,Rn.isObject=es,Rn.isObjectLike=ns,Rn.isPlainObject=os,Rn.isRegExp=as,Rn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=h},Rn.isSet=ss,Rn.isString=us,Rn.isSymbol=ls,Rn.isTypedArray=cs,Rn.isUndefined=function(t){return t===i},Rn.isWeakMap=function(t){return ns(t)&&fo(t)==T},Rn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Er(t)},Rn.join=function(t,e){return null==t?"":Ve.call(t,e)},Rn.kebabCase=Ws,Rn.last=Ko,Rn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=_s(n))<0?gn(r+o,0):mn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,Fe,o,!0)},Rn.lowerCase=Ys,Rn.lowerFirst=Xs,Rn.lt=hs,Rn.lte=fs,Rn.max=function(t){return t&&t.length?pr(t,iu,Sr):i},Rn.maxBy=function(t,e){return t&&t.length?pr(t,ao(e,2),Sr):i},Rn.mean=function(t){return Ue(t,iu)},Rn.meanBy=function(t,e){return Ue(t,ao(e,2))},Rn.min=function(t){return t&&t.length?pr(t,iu,Ir):i},Rn.minBy=function(t,e){return t&&t.length?pr(t,ao(e,2),Ir):i},Rn.stubArray=vu,Rn.stubFalse=gu,Rn.stubObject=function(){return{}},Rn.stubString=function(){return""},Rn.stubTrue=function(){return!0},Rn.multiply=ku,Rn.nth=function(t,e){return t&&t.length?Fr(t,_s(e)):i},Rn.noConflict=function(){return he._===this&&(he._=Bt),this},Rn.noop=lu,Rn.now=Ma,Rn.pad=function(t,e,n){t=ys(t);var r=(e=_s(e))?hn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ui(de(i),n)+t+Ui(fe(i),n)},Rn.padEnd=function(t,e,n){t=ys(t);var r=(e=_s(e))?hn(t):0;return e&&r<e?t+Ui(e-r,n):t},Rn.padStart=function(t,e,n){t=ys(t);var r=(e=_s(e))?hn(t):0;return e&&r<e?Ui(e-r,n)+t:t},Rn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ys(t).replace(rt,""),e||0)},Rn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ps(t),e===i?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return mn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Yr(t,e)},Rn.reduce=function(t,e,n){var r=Wa(t)?Pe:We,i=arguments.length<3;return r(t,ao(e,4),n,i,hr)},Rn.reduceRight=function(t,e,n){var r=Wa(t)?De:We,i=arguments.length<3;return r(t,ao(e,4),n,i,fr)},Rn.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:_s(e),Xr(ys(t),e)},Rn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Rn.result=function(t,e,n){var r=-1,o=(e=gi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Bo(e[r])];a===i&&(r=o,a=n),t=Ja(a)?a.call(t):a}return t},Rn.round=Eu,Rn.runInContext=t,Rn.sample=function(t){return(Wa(t)?Zn:Gr)(t)},Rn.size=function(t){if(null==t)return 0;if(Xa(t))return us(t)?hn(t):t.length;var e=fo(t);return e==x||e==M?t.size:Lr(t).length},Rn.snakeCase=$s,Rn.some=function(t,e,n){var r=Wa(t)?Le:ni;return n&&mo(t,e,n)&&(e=i),r(t,ao(e,3))},Rn.sortedIndex=function(t,e){return ri(t,e)},Rn.sortedIndexBy=function(t,e,n){return ii(t,e,ao(n,2))},Rn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Fa(t[r],e))return r}return-1},Rn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Rn.sortedLastIndexBy=function(t,e,n){return ii(t,e,ao(n,2),!0)},Rn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Fa(t[n],e))return n}return-1},Rn.startCase=Gs,Rn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:ar(_s(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},Rn.subtract=Su,Rn.sum=function(t){return t&&t.length?Ye(t,iu):0},Rn.sumBy=function(t,e){return t&&t.length?Ye(t,ao(e,2)):0},Rn.template=function(t,e,n){var r=Rn.templateSettings;n&&mo(t,e,n)&&(e=i),t=ys(t),e=xs({},e,r,Zi);var o,a,s=xs({},e.imports,r.imports,Zi),u=js(s),l=Ze(s,u),c=0,h=e.interpolate||yt,f="__p += '",d=St((e.escape||yt).source+"|"+h.source+"|"+(h===K?ht:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(bt,rn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var _=Pt.call(e,"variable")&&e.variable;if(_){if(lt.test(_))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(U,""):f).replace(H,"$1").replace(V,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Qs((function(){return xt(u,p+"return "+f).apply(i,l)}));if(v.source=f,Ka(v))throw v;return v},Rn.times=function(t,e){if((t=_s(t))<1||t>h)return[];var n=d,r=mn(t,d);e=ao(e),t-=d;for(var i=Xe(r,e);++n<t;)e(n);return i},Rn.toFinite=ps,Rn.toInteger=_s,Rn.toLength=vs,Rn.toLower=function(t){return ys(t).toLowerCase()},Rn.toNumber=gs,Rn.toSafeInteger=function(t){return t?ar(_s(t),-9007199254740991,h):0===t?t:0},Rn.toString=ys,Rn.toUpper=function(t){return ys(t).toUpperCase()},Rn.trim=function(t,e,n){if((t=ys(t))&&(n||e===i))return $e(t);if(!t||!(e=si(e)))return t;var r=fn(t),o=fn(e);return yi(r,Je(r,o),Qe(r,o)+1).join("")},Rn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.slice(0,dn(t)+1);if(!t||!(e=si(e)))return t;var r=fn(t);return yi(r,0,Qe(r,fn(e))+1).join("")},Rn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=fn(t);return yi(r,Je(r,fn(e))).join("")},Rn.truncate=function(t,e){var n=30,r="...";if(es(e)){var o="separator"in e?e.separator:o;n="length"in e?_s(e.length):n,r="omission"in e?si(e.omission):r}var a=(t=ys(t)).length;if(on(t)){var s=fn(t);a=s.length}if(n>=a)return t;var u=n-hn(r);if(u<1)return r;var l=s?yi(s,0,u).join(""):t.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),as(o)){if(t.slice(u).search(o)){var c,h=l;for(o.global||(o=St(o.source,ys(ft.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var f=c.index;l=l.slice(0,f===i?u:f)}}else if(t.indexOf(si(o),u)!=u){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+r},Rn.unescape=function(t){return(t=ys(t))&&X.test(t)?t.replace(W,pn):t},Rn.uniqueId=function(t){var e=++Dt;return ys(t)+e},Rn.upperCase=Zs,Rn.upperFirst=Ks,Rn.each=ya,Rn.eachRight=ba,Rn.first=Xo,uu(Rn,(mu={},yr(Rn,(function(t,e){Pt.call(Rn.prototype,e)||(mu[e]=t)})),mu),{chain:!1}),Rn.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Rn[t].placeholder=Rn})),Se(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===i?1:gn(_s(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Se(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(iu)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=$r((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Nr(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Ia(ao(t)))},Hn.prototype.slice=function(t,e){t=_s(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=_s(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(d)},yr(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Rn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Rn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Hn,l=s[0],c=u||Wa(e),h=function(t){var e=o.apply(Rn,je([t],s));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=a&&!f,_=u&&!d;if(!a&&c){e=_?e:new Hn(this);var v=t.apply(e,s);return v.__actions__.push({func:pa,args:[h],thisArg:i}),new Un(v,f)}return p&&_?t.apply(this,s):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Rn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Wa(i)?i:[],t)}return this[n]((function(n){return e.apply(Wa(n)?n:[],t)}))}})),yr(Hn.prototype,(function(t,e){var n=Rn[e];if(n){var r=n.name+"";Pt.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:e,func:n})}})),Tn[Bi(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mi(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Wa(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=mn(e,t+a);break;case"takeRight":t=gn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=mn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return fi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var _=-1,v=t[l+=e];++_<h;){var g=c[_],m=g.iteratee,y=g.type,b=m(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[f++]=v}return p},Rn.prototype.at=_a,Rn.prototype.chain=function(){return da(this)},Rn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Rn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Rn.prototype.plant=function(t){for(var e,n=this;n instanceof Fn;){var r=qo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Rn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:i}),new Un(e,this.__chain__)}return this.thru(ea)},Rn.prototype.toJSON=Rn.prototype.valueOf=Rn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Rn.prototype.first=Rn.prototype.head,Gt&&(Rn.prototype[Gt]=function(){return this}),Rn}();he._=_n,(r=function(){return _n}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},211:function(t,e){!function(t){"use strict";function e(t){return"object"==typeof t&&"function"==typeof t.to}function n(t){t.parentElement.removeChild(t)}function r(t){return null!=t}function i(t){t.preventDefault()}function o(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function a(t,e,n){n>0&&(c(t,e),setTimeout((function(){h(t,e)}),n))}function s(t){return Math.max(Math.min(t,100),0)}function u(t){return Array.isArray(t)?t:[t]}function l(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function c(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function h(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function f(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop}}function d(t,e){return 100/(e-t)}function p(t,e,n){return 100*e/(t[n+1]-t[n])}function _(t,e){for(var n=1;t>=e[n];)n+=1;return n}function v(t,e,n){if(n>=t.slice(-1)[0])return 100;var r=_(n,t),i=t[r-1],o=t[r],a=e[r-1],s=e[r];return a+function(t,e){return p(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}([i,o],n)/d(a,s)}function g(t,e,n,r){if(100===r)return r;var i=_(r,t),o=t[i-1],a=t[i];return n?r-o>(a-o)/2?a:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(r-t[i-1],e[i-1]):r}var m,y;t.PipsMode=void 0,(y=t.PipsMode||(t.PipsMode={})).Range="range",y.Steps="steps",y.Positions="positions",y.Count="count",y.Values="values",t.PipsType=void 0,(m=t.PipsType||(t.PipsType={}))[m.None=-1]="None",m[m.NoValue=0]="NoValue",m[m.LargeValue=1]="LargeValue",m[m.SmallValue=2]="SmallValue";var b=function(){function t(t,e,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e;var i=[];for(Object.keys(t).forEach((function(e){i.push([u(t[e]),e])})),i.sort((function(t,e){return t[0][0]-e[0][0]})),r=0;r<i.length;r++)this.handleEntryPoint(i[r][1],i[r][0]);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}return t.prototype.getDistance=function(t){for(var e=[],n=0;n<this.xNumSteps.length-1;n++)e[n]=p(this.xVal,t,n);return e},t.prototype.getAbsoluteDistance=function(t,e,n){var r,i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||t!==this.xPct[i+1]||i++,null===e&&(e=[]);var o=1,a=e[i],s=0,u=0,l=0,c=0;for(r=n?(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);a>0;)s=this.xPct[i+1+c]-this.xPct[i+c],e[i+c]*o+100-100*r>100?(u=s*r,o=(a-100*r)/e[i+c],r=1):(u=e[i+c]*s/100*o,o=0),n?(l-=u,this.xPct.length+c>=1&&c--):(l+=u,this.xPct.length-c>=1&&c++),a=e[i+c]*o;return t+l},t.prototype.toStepping=function(t){return v(this.xVal,this.xPct,t)},t.prototype.fromStepping=function(t){return function(t,e,n){if(n>=100)return t.slice(-1)[0];var r=_(n,e),i=t[r-1],o=t[r],a=e[r-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(n-a)*d(a,e[r]))}(this.xVal,this.xPct,t)},t.prototype.getStep=function(t){return g(this.xPct,this.xSteps,this.snap,t)},t.prototype.getDefaultStep=function(t,e,n){var r=_(t,this.xPct);return(100===t||e&&t===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},t.prototype.getNearbySteps=function(t){var e=_(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},t.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(l);return Math.max.apply(null,t)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(t){return this.getStep(this.toStepping(t))},t.prototype.handleEntryPoint=function(t,e){var n;if(!o(n="min"===t?0:"max"===t?100:parseFloat(t))||!o(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(e[0]);var r=Number(e[1]);n?this.xSteps.push(!isNaN(r)&&r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(t,e){if(e)if(this.xVal[t]!==this.xVal[t+1]){this.xSteps[t]=p([this.xVal[t],this.xVal[t+1]],e,0)/d(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],r=Math.ceil(Number(n.toFixed(3))-1),i=this.xVal[t]+this.xNumSteps[t]*r;this.xHighestCompleteStep[t]=i}else this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t]},t}(),w={to:function(t){return void 0===t?"":t.toFixed(2)},from:Number},x={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},k=".__tooltips",E=".__aria";function S(t,e){if(!o(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function A(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function M(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function C(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function N(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new b(e,t.snap||!1,t.singleStep)}function T(t,e){if(e=u(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function O(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function j(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function P(t,e){if("number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function D(t,e){var n,r=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(n=1;n<t.handles;n++)r.push(e);r.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=e}t.connect=r}function L(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function I(t,e){if(!o(e))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==e&&(t.margin=t.spectrum.getDistance(e))}function z(t,e){if(!o(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function B(t,e){var n;if(!o(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!o(e[0])&&!o(e[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var r=e[0]+e[1],i=t.spectrum.xVal[0];if(r/(t.spectrum.xVal[t.spectrum.xVal.length-1]-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function R(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function q(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,r=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,a=e.indexOf("hover")>=0,s=e.indexOf("unconstrained")>=0,u=e.indexOf("drag-all")>=0,l=e.indexOf("smooth-steps")>=0;if(i){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");I(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||o,drag:r,dragAll:u,smoothSteps:l,fixed:i,snap:o,hover:a,unconstrained:s}}function F(t,n){if(!1!==n)if(!0===n||e(n)){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(n)}else{if((n=u(n)).length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");n.forEach((function(t){if("boolean"!=typeof t&&!e(t))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),t.tooltips=n}}function U(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function H(t,n){if(!e(n))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=n}function V(t,n){if(!function(t){return e(t)&&"function"==typeof t.from}(n))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=n}function W(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Y(t,e){t.documentElement=e}function X(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function $(t,e){if("object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(e).forEach((function(n){t.cssClasses[n]=t.cssPrefix+e[n]}))):t.cssClasses=e}function G(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:w,format:w},n={step:{r:!1,t:S},keyboardPageMultiplier:{r:!1,t:A},keyboardMultiplier:{r:!1,t:M},keyboardDefaultStep:{r:!1,t:C},start:{r:!0,t:T},connect:{r:!0,t:D},direction:{r:!0,t:R},snap:{r:!1,t:O},animate:{r:!1,t:j},animationDuration:{r:!1,t:P},range:{r:!0,t:N},orientation:{r:!1,t:L},margin:{r:!1,t:I},limit:{r:!1,t:z},padding:{r:!1,t:B},behaviour:{r:!0,t:q},ariaFormat:{r:!1,t:H},format:{r:!1,t:V},tooltips:{r:!1,t:F},keyboardSupport:{r:!0,t:W},documentElement:{r:!1,t:Y},cssPrefix:{r:!0,t:X},cssClasses:{r:!0,t:$},handleAttributes:{r:!1,t:U}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:x,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach((function(o){if(r(t[o])||void 0!==i[o])n[o].t(e,r(t[o])?t[o]:i[o]);else if(n[o].r)throw new Error("noUiSlider: '"+o+"' is required.")})),e.pips=t.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,s=void 0!==o.style.transform;e.transformRule=s?"transform":a?"msTransform":"webkitTransform";return e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function Z(e,o,l){var d,p,_,v,g,m,y,b=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),x=e,S=o.spectrum,A=[],M=[],C=[],N=0,T={},O=e.ownerDocument,j=o.documentElement||O.documentElement,P=O.body,D="rtl"===O.dir||1===o.ort?0:100;function L(t,e){var n=O.createElement("div");return e&&c(n,e),t.appendChild(n),n}function I(t,e){var n=L(t,o.cssClasses.origin),r=L(n,o.cssClasses.handle);if(L(r,o.cssClasses.touchArea),r.setAttribute("data-handle",String(e)),o.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",(function(t){return function(t,e){if(R()||q(e))return!1;var n=["Left","Right"],r=["Down","Up"],i=["PageDown","PageUp"],a=["Home","End"];o.dir&&!o.ort?n.reverse():o.ort&&!o.dir&&(r.reverse(),i.reverse());var s,u=t.key.replace("Arrow",""),l=u===i[0],c=u===i[1],h=u===r[0]||u===n[0]||l,f=u===r[1]||u===n[1]||c,d=u===a[0],p=u===a[1];if(!(h||f||d||p))return!0;if(t.preventDefault(),f||h){var _=h?0:1,v=gt(e)[_];if(null===v)return!1;!1===v&&(v=S.getDefaultStep(M[e],h,o.keyboardDefaultStep)),v*=c||l?o.keyboardPageMultiplier:o.keyboardMultiplier,v=Math.max(v,1e-7),v*=h?-1:1,s=A[e]+v}else s=p?o.spectrum.xVal[o.spectrum.xVal.length-1]:o.spectrum.xVal[0];return ft(e,S.toStepping(s),!0,!0),at("slide",e),at("update",e),at("change",e),at("set",e),!1}(t,e)}))),void 0!==o.handleAttributes){var i=o.handleAttributes[e];Object.keys(i).forEach((function(t){r.setAttribute(t,i[t])}))}return r.setAttribute("role","slider"),r.setAttribute("aria-orientation",o.ort?"vertical":"horizontal"),0===e?c(r,o.cssClasses.handleLower):e===o.handles-1&&c(r,o.cssClasses.handleUpper),n.handle=r,n}function z(t,e){return!!e&&L(t,o.cssClasses.connect)}function B(t,e){return!(!o.tooltips||!o.tooltips[e])&&L(t.firstChild,o.cssClasses.tooltip)}function R(){return x.hasAttribute("disabled")}function q(t){return p[t].hasAttribute("disabled")}function F(){g&&(ot("update"+k),g.forEach((function(t){t&&n(t)})),g=null)}function U(){F(),g=p.map(B),it("update"+k,(function(t,e,n){if(g&&o.tooltips&&!1!==g[e]){var r=t[e];!0!==o.tooltips[e]&&(r=o.tooltips[e].to(n[e])),g[e].innerHTML=r}}))}function H(t,e){return t.map((function(t){return S.fromStepping(e?S.getStep(t):t)}))}function V(e){var n,r=function(e){if(e.mode===t.PipsMode.Range||e.mode===t.PipsMode.Steps)return S.xVal;if(e.mode===t.PipsMode.Count){if(e.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=e.values-1,r=100/n,i=[];n--;)i[n]=n*r;return i.push(100),H(i,e.stepped)}return e.mode===t.PipsMode.Positions?H(e.values,e.stepped):e.mode===t.PipsMode.Values?e.stepped?e.values.map((function(t){return S.fromStepping(S.getStep(S.toStepping(t)))})):e.values:[]}(e),i={},o=S.xVal[0],a=S.xVal[S.xVal.length-1],s=!1,u=!1,l=0;return(n=r.slice().sort((function(t,e){return t-e})),r=n.filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==o&&(r.unshift(o),s=!0),r[r.length-1]!==a&&(r.push(a),u=!0),r.forEach((function(n,o){var a,c,h,f,d,p,_,v,g,m,y=n,b=r[o+1],w=e.mode===t.PipsMode.Steps;for(w&&(a=S.xNumSteps[o]),a||(a=b-y),void 0===b&&(b=y),a=Math.max(a,1e-7),c=y;c<=b;c=Number((c+a).toFixed(7))){for(v=(d=(f=S.toStepping(c))-l)/(e.density||1),m=d/(g=Math.round(v)),h=1;h<=g;h+=1)i[(p=l+h*m).toFixed(5)]=[S.fromStepping(p),0];_=r.indexOf(c)>-1?t.PipsType.LargeValue:w?t.PipsType.SmallValue:t.PipsType.NoValue,!o&&s&&c!==b&&(_=0),c===b&&u||(i[f.toFixed(5)]=[c,_]),l=f}})),i}function W(e,n,r){var i,a,s=O.createElement("div"),u=((i={})[t.PipsType.None]="",i[t.PipsType.NoValue]=o.cssClasses.valueNormal,i[t.PipsType.LargeValue]=o.cssClasses.valueLarge,i[t.PipsType.SmallValue]=o.cssClasses.valueSub,i),l=((a={})[t.PipsType.None]="",a[t.PipsType.NoValue]=o.cssClasses.markerNormal,a[t.PipsType.LargeValue]=o.cssClasses.markerLarge,a[t.PipsType.SmallValue]=o.cssClasses.markerSub,a),h=[o.cssClasses.valueHorizontal,o.cssClasses.valueVertical],f=[o.cssClasses.markerHorizontal,o.cssClasses.markerVertical];function d(t,e){var n=e===o.cssClasses.value,r=n?u:l;return e+" "+(n?h:f)[o.ort]+" "+r[t]}return c(s,o.cssClasses.pips),c(s,0===o.ort?o.cssClasses.pipsHorizontal:o.cssClasses.pipsVertical),Object.keys(e).forEach((function(i){!function(e,i,a){if((a=n?n(i,a):a)!==t.PipsType.None){var u=L(s,!1);u.className=d(a,o.cssClasses.marker),u.style[o.style]=e+"%",a>t.PipsType.NoValue&&((u=L(s,!1)).className=d(a,o.cssClasses.value),u.setAttribute("data-value",String(i)),u.style[o.style]=e+"%",u.innerHTML=String(r.to(i)))}}(i,e[i][0],e[i][1])})),s}function Y(){v&&(n(v),v=null)}function X(t){Y();var e=V(t),n=t.filter,r=t.format||{to:function(t){return String(Math.round(t))}};return v=x.appendChild(W(e,n,r))}function $(){var t=d.getBoundingClientRect(),e="offset"+["Width","Height"][o.ort];return 0===o.ort?t.width||d[e]:t.height||d[e]}function Z(t,e,n,r){var i=function(i){var a,s,u=function(t,e,n){var r=0===t.type.indexOf("touch"),i=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),a=0,s=0;if(0===t.type.indexOf("MSPointer")&&(o=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(r){var u=function(e){var r=e.target;return r===n||n.contains(r)||t.composed&&t.composedPath().shift()===n};if("touchstart"===t.type){var l=Array.prototype.filter.call(t.touches,u);if(l.length>1)return!1;a=l[0].pageX,s=l[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,u);if(!c)return!1;a=c.pageX,s=c.pageY}}return e=e||f(O),(i||o)&&(a=t.clientX+e.x,s=t.clientY+e.y),t.pageOffset=e,t.points=[a,s],t.cursor=i||o,t}(i,r.pageOffset,r.target||e);return!!u&&!(R()&&!r.doNotReject)&&(a=x,s=o.cssClasses.tap,!((a.classList?a.classList.contains(s):new RegExp("\\b"+s+"\\b").test(a.className))&&!r.doNotReject))&&!(t===b.start&&void 0!==u.buttons&&u.buttons>1)&&(!r.hover||!u.buttons)&&(w||u.preventDefault(),u.calcPoint=u.points[o.ort],void n(u,r))},a=[];return t.split(" ").forEach((function(t){e.addEventListener(t,i,!!w&&{passive:!0}),a.push([t,i])})),a}function K(t){var e,n,r,i,a,u,l=100*(t-(e=d,n=o.ort,r=e.getBoundingClientRect(),i=e.ownerDocument,a=i.documentElement,u=f(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(u.x=0),n?r.top+u.y-a.clientTop:r.left+u.x-a.clientLeft))/$();return l=s(l),o.dir?100-l:l}function J(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&tt(t,e)}function Q(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return tt(t,e);var n=(o.dir?-1:1)*(t.calcPoint-e.startCalcPoint);lt(n>0,100*n/e.baseSize,e.locations,e.handleNumbers,e.connect)}function tt(t,e){e.handle&&(h(e.handle,o.cssClasses.active),N-=1),e.listeners.forEach((function(t){j.removeEventListener(t[0],t[1])})),0===N&&(h(x,o.cssClasses.drag),ht(),t.cursor&&(P.style.cursor="",P.removeEventListener("selectstart",i))),o.events.smoothSteps&&(e.handleNumbers.forEach((function(t){ft(t,M[t],!0,!0,!1,!1)})),e.handleNumbers.forEach((function(t){at("update",t)}))),e.handleNumbers.forEach((function(t){at("change",t),at("set",t),at("end",t)}))}function et(t,e){if(!e.handleNumbers.some(q)){var n;1===e.handleNumbers.length&&(n=p[e.handleNumbers[0]].children[0],N+=1,c(n,o.cssClasses.active)),t.stopPropagation();var r=[],a=Z(b.move,j,Q,{target:t.target,handle:n,connect:e.connect,listeners:r,startCalcPoint:t.calcPoint,baseSize:$(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:M.slice()}),s=Z(b.end,j,tt,{target:t.target,handle:n,listeners:r,doNotReject:!0,handleNumbers:e.handleNumbers}),u=Z("mouseout",j,J,{target:t.target,handle:n,listeners:r,doNotReject:!0,handleNumbers:e.handleNumbers});r.push.apply(r,a.concat(s,u)),t.cursor&&(P.style.cursor=getComputedStyle(t.target).cursor,p.length>1&&c(x,o.cssClasses.drag),P.addEventListener("selectstart",i,!1)),e.handleNumbers.forEach((function(t){at("start",t)}))}}function nt(t){t.stopPropagation();var e=K(t.calcPoint),n=function(t){var e=100,n=!1;return p.forEach((function(r,i){if(!q(i)){var o=M[i],a=Math.abs(o-t);(a<e||a<=e&&t>o||100===a&&100===e)&&(n=i,e=a)}})),n}(e);!1!==n&&(o.events.snap||a(x,o.cssClasses.tap,o.animationDuration),ft(n,e,!0,!0),ht(),at("slide",n,!0),at("update",n,!0),o.events.snap?et(t,{handleNumbers:[n]}):(at("change",n,!0),at("set",n,!0)))}function rt(t){var e=K(t.calcPoint),n=S.getStep(e),r=S.fromStepping(n);Object.keys(T).forEach((function(t){"hover"===t.split(".")[0]&&T[t].forEach((function(t){t.call(mt,r)}))}))}function it(t,e){T[t]=T[t]||[],T[t].push(e),"update"===t.split(".")[0]&&p.forEach((function(t,e){at("update",e)}))}function ot(t){var e=t&&t.split(".")[0],n=e?t.substring(e.length):t;Object.keys(T).forEach((function(t){var r=t.split(".")[0],i=t.substring(r.length);e&&e!==r||n&&n!==i||function(t){return t===E||t===k}(i)&&n!==i||delete T[t]}))}function at(t,e,n){Object.keys(T).forEach((function(r){var i=r.split(".")[0];t===i&&T[r].forEach((function(t){t.call(mt,A.map(o.format.to),e,A.slice(),n||!1,M.slice(),mt)}))}))}function st(t,e,n,r,i,a,u){var l;return p.length>1&&!o.events.unconstrained&&(r&&e>0&&(l=S.getAbsoluteDistance(t[e-1],o.margin,!1),n=Math.max(n,l)),i&&e<p.length-1&&(l=S.getAbsoluteDistance(t[e+1],o.margin,!0),n=Math.min(n,l))),p.length>1&&o.limit&&(r&&e>0&&(l=S.getAbsoluteDistance(t[e-1],o.limit,!1),n=Math.min(n,l)),i&&e<p.length-1&&(l=S.getAbsoluteDistance(t[e+1],o.limit,!0),n=Math.max(n,l))),o.padding&&(0===e&&(l=S.getAbsoluteDistance(0,o.padding[0],!1),n=Math.max(n,l)),e===p.length-1&&(l=S.getAbsoluteDistance(100,o.padding[1],!0),n=Math.min(n,l))),u||(n=S.getStep(n)),!((n=s(n))===t[e]&&!a)&&n}function ut(t,e){var n=o.ort;return(n?e:t)+", "+(n?t:e)}function lt(t,e,n,r,i){var a=n.slice(),s=r[0],u=o.events.smoothSteps,l=[!t,t],c=[t,!t];r=r.slice(),t&&r.reverse(),r.length>1?r.forEach((function(t,n){var r=st(a,t,a[t]+e,l[n],c[n],!1,u);!1===r?e=0:(e=r-a[t],a[t]=r)})):l=c=[!0];var h=!1;r.forEach((function(t,r){h=ft(t,n[t]+e,l[r],c[r],!1,u)||h})),h&&(r.forEach((function(t){at("update",t),at("slide",t)})),null!=i&&at("drag",s))}function ct(t,e){return o.dir?100-t-e:t}function ht(){C.forEach((function(t){var e=M[t]>50?-1:1,n=3+(p.length+e*t);p[t].style.zIndex=String(n)}))}function ft(t,e,n,r,i,a){return i||(e=st(M,t,e,n,r,!1,a)),!1!==e&&(function(t,e){M[t]=e,A[t]=S.fromStepping(e);var n="translate("+ut(ct(e,0)-D+"%","0")+")";p[t].style[o.transformRule]=n,dt(t),dt(t+1)}(t,e),!0)}function dt(t){if(_[t]){var e=0,n=100;0!==t&&(e=M[t-1]),t!==_.length-1&&(n=M[t]);var r=n-e,i="translate("+ut(ct(e,r)+"%","0")+")",a="scale("+ut(r/100,"1")+")";_[t].style[o.transformRule]=i+" "+a}}function pt(t,e){return null===t||!1===t||void 0===t?M[e]:("number"==typeof t&&(t=String(t)),!1!==(t=o.format.from(t))&&(t=S.toStepping(t)),!1===t||isNaN(t)?M[e]:t)}function _t(t,e,n){var r=u(t),i=void 0===M[0];e=void 0===e||e,o.animate&&!i&&a(x,o.cssClasses.tap,o.animationDuration),C.forEach((function(t){ft(t,pt(r[t],t),!0,!1,n)}));var s=1===C.length?0:1;if(i&&S.hasNoSize()&&(n=!0,M[0]=0,C.length>1)){var l=100/(C.length-1);C.forEach((function(t){M[t]=t*l}))}for(;s<C.length;++s)C.forEach((function(t){ft(t,M[t],!0,!0,n)}));ht(),C.forEach((function(t){at("update",t),null!==r[t]&&e&&at("set",t)}))}function vt(t){if(void 0===t&&(t=!1),t)return 1===A.length?A[0]:A.slice(0);var e=A.map(o.format.to);return 1===e.length?e[0]:e}function gt(t){var e=M[t],n=S.getNearbySteps(e),r=A[t],i=n.thisStep.step,a=null;if(o.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];!1!==i&&r+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-r),a=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===e?i=null:0===e&&(a=null);var s=S.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(s))),null!==a&&!1!==a&&(a=Number(a.toFixed(s))),[a,i]}c(y=x,o.cssClasses.target),0===o.dir?c(y,o.cssClasses.ltr):c(y,o.cssClasses.rtl),0===o.ort?c(y,o.cssClasses.horizontal):c(y,o.cssClasses.vertical),c(y,"rtl"===getComputedStyle(y).direction?o.cssClasses.textDirectionRtl:o.cssClasses.textDirectionLtr),d=L(y,o.cssClasses.base),function(t,e){var n=L(e,o.cssClasses.connects);p=[],(_=[]).push(z(n,t[0]));for(var r=0;r<o.handles;r++)p.push(I(e,r)),C[r]=r,_.push(z(n,t[r+1]))}(o.connect,d),(m=o.events).fixed||p.forEach((function(t,e){Z(b.start,t.children[0],et,{handleNumbers:[e]})})),m.tap&&Z(b.start,d,nt,{}),m.hover&&Z(b.move,d,rt,{hover:!0}),m.drag&&_.forEach((function(t,e){if(!1!==t&&0!==e&&e!==_.length-1){var n=p[e-1],r=p[e],i=[t],a=[n,r],s=[e-1,e];c(t,o.cssClasses.draggable),m.fixed&&(i.push(n.children[0]),i.push(r.children[0])),m.dragAll&&(a=p,s=C),i.forEach((function(e){Z(b.start,e,et,{handles:a,handleNumbers:s,connect:t})}))}})),_t(o.start),o.pips&&X(o.pips),o.tooltips&&U(),ot("update"+E),it("update"+E,(function(t,e,n,r,i){C.forEach((function(t){var e=p[t],r=st(M,t,0,!0,!0,!0),a=st(M,t,100,!0,!0,!0),s=i[t],u=String(o.ariaFormat.to(n[t]));r=S.fromStepping(r).toFixed(1),a=S.fromStepping(a).toFixed(1),s=S.fromStepping(s).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",a),e.children[0].setAttribute("aria-valuenow",s),e.children[0].setAttribute("aria-valuetext",u)}))}));var mt={destroy:function(){for(ot(E),ot(k),Object.keys(o.cssClasses).forEach((function(t){h(x,o.cssClasses[t])}));x.firstChild;)x.removeChild(x.firstChild);delete x.noUiSlider},steps:function(){return C.map(gt)},on:it,off:ot,get:vt,set:_t,setHandle:function(t,e,n,r){if(!((t=Number(t))>=0&&t<C.length))throw new Error("noUiSlider: invalid handle number, got: "+t);ft(t,pt(e,t),!0,!0,r),at("update",t),n&&at("set",t)},reset:function(t){_t(o.start,t)},disable:function(t){null!=t?(p[t].setAttribute("disabled",""),p[t].handle.removeAttribute("tabindex")):(x.setAttribute("disabled",""),p.forEach((function(t){t.handle.removeAttribute("tabindex")})))},enable:function(t){null!=t?(p[t].removeAttribute("disabled"),p[t].handle.setAttribute("tabindex","0")):(x.removeAttribute("disabled"),p.forEach((function(t){t.removeAttribute("disabled"),t.handle.setAttribute("tabindex","0")})))},__moveHandles:function(t,e,n){lt(t,e,M,n)},options:l,updateOptions:function(t,e){var n=vt(),i=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];i.forEach((function(e){void 0!==t[e]&&(l[e]=t[e])}));var a=G(l);i.forEach((function(e){void 0!==t[e]&&(o[e]=a[e])})),S=a.spectrum,o.margin=a.margin,o.limit=a.limit,o.padding=a.padding,o.pips?X(o.pips):Y(),o.tooltips?U():F(),M=[],_t(r(t.start)?t.start:n,e)},target:x,removePips:Y,removeTooltips:F,getPositions:function(){return M.slice()},getTooltips:function(){return g},getOrigins:function(){return p},pips:X};return mt}function K(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=Z(t,G(e),e);return t.noUiSlider=n,n}var J={__spectrum:b,cssClasses:x,create:K};t.create=K,t.cssClasses=x,t.default=J,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{VERSION:()=>b_,after:()=>Zg,all:()=>vm,allKeys:()=>jv,any:()=>gm,assign:()=>Zv,before:()=>Kg,bind:()=>Bg,bindAll:()=>Fg,chain:()=>Dg,chunk:()=>Qm,clone:()=>tg,collect:()=>cm,compact:()=>Um,compose:()=>Gg,constant:()=>pv,contains:()=>mm,countBy:()=>jm,create:()=>Qv,debounce:()=>Yg,default:()=>ny,defaults:()=>Kv,defer:()=>Vg,delay:()=>Hg,detect:()=>sm,difference:()=>Vm,drop:()=>qm,each:()=>lm,escape:()=>xg,every:()=>vm,extend:()=>Gv,extendOwn:()=>Zv,filter:()=>pm,find:()=>sm,findIndex:()=>em,findKey:()=>Qg,findLastIndex:()=>nm,findWhere:()=>um,first:()=>Rm,flatten:()=>Hm,foldl:()=>fm,foldr:()=>dm,forEach:()=>lm,functions:()=>Xv,get:()=>og,groupBy:()=>Tm,has:()=>ag,head:()=>Rm,identity:()=>sg,include:()=>mm,includes:()=>mm,indexBy:()=>Om,indexOf:()=>om,initial:()=>Bm,inject:()=>fm,intersection:()=>$m,invert:()=>Yv,invoke:()=>ym,isArguments:()=>hv,isArray:()=>uv,isArrayBuffer:()=>Q_,isBoolean:()=>V_,isDataView:()=>sv,isDate:()=>G_,isElement:()=>W_,isEmpty:()=>Ev,isEqual:()=>Ov,isError:()=>K_,isFinite:()=>fv,isFunction:()=>nv,isMap:()=>qv,isMatch:()=>Sv,isNaN:()=>dv,isNull:()=>U_,isNumber:()=>$_,isObject:()=>F_,isRegExp:()=>Z_,isSet:()=>Uv,isString:()=>X_,isSymbol:()=>J_,isTypedArray:()=>bv,isUndefined:()=>H_,isWeakMap:()=>Fv,isWeakSet:()=>Hv,iteratee:()=>fg,keys:()=>kv,last:()=>Fm,lastIndexOf:()=>am,map:()=>cm,mapObject:()=>pg,matcher:()=>ug,matches:()=>ug,max:()=>xm,memoize:()=>Ug,methods:()=>Xv,min:()=>km,mixin:()=>ey,negate:()=>$g,noop:()=>_g,now:()=>yg,object:()=>Km,omit:()=>zm,once:()=>Jg,pairs:()=>Wv,partial:()=>zg,partition:()=>Pm,pick:()=>Im,pluck:()=>bm,property:()=>lg,propertyOf:()=>vg,random:()=>mg,range:()=>Jm,reduce:()=>fm,reduceRight:()=>dm,reject:()=>_m,rest:()=>qm,restArguments:()=>q_,result:()=>Og,sample:()=>Am,select:()=>pm,shuffle:()=>Mm,size:()=>Dm,some:()=>gm,sortBy:()=>Cm,sortedIndex:()=>rm,tail:()=>qm,take:()=>Rm,tap:()=>eg,template:()=>Tg,templateSettings:()=>Eg,throttle:()=>Wg,times:()=>gg,toArray:()=>Sm,toPath:()=>ng,transpose:()=>Gm,unescape:()=>kg,union:()=>Xm,uniq:()=>Ym,unique:()=>Ym,uniqueId:()=>Pg,unzip:()=>Gm,values:()=>Vv,where:()=>wm,without:()=>Wm,wrap:()=>Xg,zip:()=>Zm});var e={};n.r(e),n.d(e,{addChild:()=>oy,assignAttributes:()=>dy,clearInternalNodes:()=>vy,createNode:()=>ay,deleteANode:()=>sy,getInternals:()=>ly,getNodeByName:()=>fy,getNodes:()=>hy,getRootNode:()=>cy,getTips:()=>uy,graftANode:()=>iy,isLeafNode:()=>py,updateKeyName:()=>_y});var r={};n.r(r),n.d(r,{default:()=>by,loadAnnotations:()=>yy,parseAnnotations:()=>my});var i={};n.r(i),n.d(i,{pathToRoot:()=>Ny,reroot:()=>My,rootpath:()=>Cy});var o={};n.r(o),n.d(o,{alignTips:()=>Hy,css_classes:()=>qy,internalNames:()=>Fy,layoutHandler:()=>Yy,nodeBubbleSize:()=>Vy,nodeSpan:()=>$y,predefined_selecters:()=>Gy,radial:()=>Uy,selectionCallback:()=>Zy,selectionLabel:()=>Xy,shiftTip:()=>Wy});var a={};n.r(a),n.d(a,{defNodeLabel:()=>lb,drawNode:()=>Jy,hasHiddenNodes:()=>ob,internalLabel:()=>ub,isNodeCollapsed:()=>ab,nodeCssSelectors:()=>sb,nodeLabel:()=>cb,nodeNotshown:()=>ib,nodeSpan:()=>eb,nodeVisible:()=>rb,reclassNode:()=>nb,shiftTip:()=>Ky,showInternalName:()=>tb,updateHasHiddenNodes:()=>Qy});var s={};n.r(s),n.d(s,{cladeCssSelectors:()=>hb,updateCollapsedClades:()=>fb});var u={};n.r(u),n.d(u,{drawEdge:()=>db,edgeCssSelectors:()=>mb,edgeVisible:()=>gb,initializeEdgeLabels:()=>_b,placeAlongAnEdge:()=>yb,reclassEdge:()=>pb,syncEdgeLabels:()=>vb});var l={};n.r(l),n.d(l,{countUpdate:()=>Sb,d3PhylotreeAddEventListener:()=>Cb,d3PhylotreeEventListener:()=>Mb,d3PhylotreeSvgRotate:()=>Tb,d3PhylotreeSvgTranslate:()=>Nb,d3PhylotreeTriggerLayout:()=>Ab,rescale:()=>kb,resizeSvg:()=>xb,toggleCollapse:()=>wb,triggerRefresh:()=>Eb});var c={};function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(c),n.d(c,{addCustomMenu:()=>Pb,getSelection:()=>Lb,modifySelection:()=>Db,nodeDropdownMenu:()=>jb,selectAllDescendants:()=>Ib,selectionCallback:()=>zb});var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"createNodesData",value:function(t,e){for(var n=[],r=Math.max.apply(Math,function(t){if(Array.isArray(t))return v(t)}(l=Object.values(e))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(l)||_(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())+1,i=0;i<t[0].length;i++){var o,a=new Set,s=p(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;a.add(u[i])}}catch(t){s.e(t)}finally{s.f()}a.delete("-"),n.push(Array.from(a).sort((function(t,n){var i=e[t],o=e[n];return(i||r)-(o||r)})).map((function(t){return{label:t}})))}var l;return n}},{key:"createLinksData",value:function(t,e){var n,r={},i=p(t);try{for(i.s();!(n=i.n()).done;){for(var o=n.value,a=0;"-"===o[a];)a++;for(var s=a+1;s<o.length;s++)if("-"!==o[s]){var u="".concat(a,",").concat(s),l="".concat(o[a],",").concat(o[s]);u in r||(r[u]={}),l in r[u]||(r[u][l]=0),r[u][l]+=1,a=s}}}catch(t){i.e(t)}finally{i.f()}var c=[];for(var h in r){var f=h.split(","),d=parseInt(f[0]),_=parseInt(f[1]);for(var v in r[h]){var g=r[h][v],m=v.split(","),y=m[0],b=m[1],w=void 0,x=void 0;for(var k in e[d])e[d][k].label===y&&(w=parseInt(k));for(var E in e[_])e[_][E].label===b&&(x=parseInt(E));c.push({from:{column:d,node:w},to:{column:_,node:x},value:g})}}return c}},{key:"createAcidsGroupMap",value:function(t){return t.map((function(t){return t.acids.reduce((function(e,n){return f(f({},e),{},d({},n,t.name))}),{})})).reduce((function(t,e){return f(f({},t),e)}),{})}},{key:"createGroupedNodesData",value:function(e,n){for(var r=t.createAcidsGroupMap(n),i=n.map((function(t){return t.name})).reduce((function(t,e,n){return f(f({},t),{},d({},e,n))}),{}),o=[],a=0;a<e[0].length;a++){var s,u=new Set,l=p(e);try{for(l.s();!(s=l.n()).done;){var c=r[s.value[a]];c&&u.add(c)}}catch(t){l.e(t)}finally{l.f()}o.push(Array.from(u).sort((function(t,e){return i[t]-i[e]})).map((function(t){return{label:t}})))}return o}},{key:"createGroupedLinksData",value:function(e,n,r){var i,o=t.createAcidsGroupMap(r),a={},s=p(e);try{for(s.s();!(i=s.n()).done;){for(var u=i.value,l=0;"-"===u[l];)l++;for(var c=l+1;c<u.length;c++)if("-"!==u[c]){var h="".concat(l,",").concat(c),f=o[u[l]]?o[u[l]]:u[l],d=o[u[c]]?o[u[c]]:u[c],_="".concat(f,",").concat(d);h in a||(a[h]={}),_ in a[h]||(a[h][_]=0),a[h][_]+=1,l=c}}}catch(t){s.e(t)}finally{s.f()}var v=[];for(var g in a){var m=g.split(","),y=parseInt(m[0]),b=parseInt(m[1]);for(var w in a[g]){var x=a[g][w],k=w.split(","),E=k[0],S=k[1],A=void 0,M=void 0;for(var C in n[y])n[y][C].label===E&&(A=parseInt(C));for(var N in n[b])n[b][N].label===S&&(M=parseInt(N));v.push({from:{column:y,node:A},to:{column:b,node:M},value:x})}}return v}}],null&&g(e.prototype,null),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),y=n(211),b=n.n(y);function w(){}function x(t){return null==t?w:function(){return this.querySelector(t)}}function k(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function E(){return[]}function S(t){return null==t?E:function(){return this.querySelectorAll(t)}}function A(t){return function(){return this.matches(t)}}function M(t){return function(e){return e.matches(t)}}var C=Array.prototype.find;function N(){return this.firstElementChild}var T=Array.prototype.filter;function O(){return Array.from(this.children)}function j(t){return new Array(t.length)}function P(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function D(t){return function(){return t}}function L(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new P(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function I(t,e,n,r,i,o,a){var s,u,l,c=new Map,h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new P(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c.get(d[s])===u&&(i[s]=u)}function z(t){return t.__data__}function B(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function R(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}P.prototype={constructor:P,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var q="http://www.w3.org/1999/xhtml";const F={svg:"http://www.w3.org/2000/svg",xhtml:q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),F.hasOwnProperty(e)?{space:F[e],local:t}:t}function H(t){return function(){this.removeAttribute(t)}}function V(t){return function(){this.removeAttributeNS(t.space,t.local)}}function W(t,e){return function(){this.setAttribute(t,e)}}function Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function X(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function G(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Z(t){return function(){this.style.removeProperty(t)}}function K(t,e,n){return function(){this.style.setProperty(t,e,n)}}function J(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Q(t,e){return t.style.getPropertyValue(e)||G(t).getComputedStyle(t,null).getPropertyValue(e)}function tt(t){return function(){delete this[t]}}function et(t,e){return function(){this[t]=e}}function nt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function rt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=rt(t.getAttribute("class")||"")}function at(t,e){for(var n=it(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function st(t,e){for(var n=it(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ut(t){return function(){at(this,t)}}function lt(t){return function(){st(this,t)}}function ct(t,e){return function(){(e.apply(this,arguments)?at:st)(this,t)}}function ht(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function dt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pt(){this.innerHTML=""}function _t(t){return function(){this.innerHTML=t}}function vt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function gt(){this.nextSibling&&this.parentNode.appendChild(this)}function mt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===q&&e.documentElement.namespaceURI===q?e.createElement(t):e.createElementNS(n,t)}}function bt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function wt(t){var e=U(t);return(e.local?bt:yt)(e)}function xt(){return null}function kt(){var t=this.parentNode;t&&t.removeChild(this)}function Et(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function St(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function At(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Mt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Ct(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Nt(t,e,n){var r=G(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Tt(t,e){return function(){return Nt(this,t,e)}}function Ot(t,e){return function(){return Nt(this,t,e.apply(this,arguments))}}ot.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var jt=[null];function Pt(t,e){this._groups=t,this._parents=e}function Dt(){return new Pt([[document.documentElement]],jt)}Pt.prototype=Dt.prototype={constructor:Pt,select:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Pt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return k(t.apply(this,arguments))}}(t):S(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Pt(r,i)},selectChild:function(t){return this.select(null==t?N:function(t){return function(){return C.call(this.children,t)}}("function"==typeof t?t:M(t)))},selectChildren:function(t){return this.selectAll(null==t?O:function(t){return function(){return T.call(this.children,t)}}("function"==typeof t?t:M(t)))},filter:function(t){"function"!=typeof t&&(t=A(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Pt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,z);var n=e?I:L,r=this._parents,i=this._groups;"function"!=typeof t&&(t=D(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,d=B(t.call(c,c&&c.__data__,l,r)),p=d.length,_=s[l]=new Array(p),v=a[l]=new Array(p),g=u[l]=new Array(f);n(c,h,_,v,g,d,e);for(var m,y,b=0,w=0;b<p;++b)if(m=_[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<p;);m._next=y||null}}return(a=new Pt(a,r))._enter=s,a._exit=u,a},enter:function(){return new Pt(this._enter||this._groups.map(j),this._parents)},exit:function(){return new Pt(this._exit||this._groups.map(j),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],h=r[u],f=c.length,d=s[u]=new Array(f),p=0;p<f;++p)(l=c[p]||h[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new Pt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=R);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new Pt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=U(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?V:H:"function"==typeof e?n.local?$:X:n.local?Y:W)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Z:"function"==typeof e?J:K)(t,e,null==n?"":n)):Q(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?tt:"function"==typeof e?nt:et)(t,e)):this.node()[t]},classed:function(t,e){var n=rt(t+"");if(arguments.length<2){for(var r=it(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ct:e?ut:lt)(n,e))},text:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?dt:ft)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?vt:_t)(t)):this.node().innerHTML},raise:function(){return this.each(gt)},lower:function(){return this.each(mt)},append:function(t){var e="function"==typeof t?t:wt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:wt(t),r=null==e?xt:"function"==typeof e?e:x(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(kt)},clone:function(t){return this.select(t?St:Et)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=At(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Ct:Mt,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Ot:Tt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Lt=Dt;var It={value:()=>{}};function zt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Bt(r)}function Bt(t){this._=t}function Rt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function qt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ft(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=It,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Bt.prototype=zt.prototype={constructor:Bt,on:function(t,e){var n,r=this._,i=Rt(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Ft(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ft(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=qt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Bt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Ut=zt;var Ht,Vt,Wt=0,Yt=0,Xt=0,$t=0,Gt=0,Zt=0,Kt="object"==typeof performance&&performance.now?performance:Date,Jt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qt(){return Gt||(Jt(te),Gt=Kt.now()+Zt)}function te(){Gt=0}function ee(){this._call=this._time=this._next=null}function ne(t,e,n){var r=new ee;return r.restart(t,e,n),r}function re(){Gt=($t=Kt.now())+Zt,Wt=Yt=0;try{!function(){Qt(),++Wt;for(var t,e=Ht;e;)(t=Gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wt}()}finally{Wt=0,function(){for(var t,e,n=Ht,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ht=e);Vt=t,oe(r)}(),Gt=0}}function ie(){var t=Kt.now(),e=t-$t;e>1e3&&(Zt-=e,$t=t)}function oe(t){Wt||(Yt&&(Yt=clearTimeout(Yt)),t-Gt>24?(t<1/0&&(Yt=setTimeout(re,t-Kt.now()-Zt)),Xt&&(Xt=clearInterval(Xt))):(Xt||($t=Kt.now(),Xt=setInterval(ie,1e3)),Wt=1,Jt(re)))}function ae(t,e,n){var r=new ee;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}ee.prototype=ne.prototype={constructor:ee,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qt():+n)+(null==e?0:+e),this._next||Vt===this||(Vt?Vt._next=this:Ht=this,Vt=this),this._call=t,this._time=n,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};var se=Ut("start","end","cancel","interrupt"),ue=[];function le(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var l,c,h,f;if(1!==n.state)return s();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return ae(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(ae((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ne((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:se,tween:ue,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function ce(t,e){var n=fe(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function he(t,e){var n=fe(t,e);if(n.state>3)throw new Error("too late; already running");return n}function fe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function de(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var pe,_e=180/Math.PI,ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ge(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*_e,skewX:Math.atan(u)*_e,scaleX:a,scaleY:s}}function me(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:de(t,i)},{i:u-2,x:de(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:de(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:de(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:de(t,n)},{i:s-2,x:de(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var ye=me((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ve:ge(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),be=me((function(t){return null==t?ve:(pe||(pe=document.createElementNS("http://www.w3.org/2000/svg","g")),pe.setAttribute("transform",t),(t=pe.transform.baseVal.consolidate())?ge((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ve)}),", ",")",")");function we(t,e){var n,r;return function(){var i=he(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function xe(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=he(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function ke(t,e,n){var r=t._id;return t.each((function(){var t=he(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return fe(t,r).value[e]}}function Ee(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Se(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ae(){}var Me=.7,Ce=1/Me,Ne="\\s*([+-]?\\d+)\\s*",Te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",je=/^#([0-9a-f]{3,8})$/,Pe=new RegExp(`^rgb\\(${Ne},${Ne},${Ne}\\)$`),De=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),Le=new RegExp(`^rgba\\(${Ne},${Ne},${Ne},${Te}\\)$`),Ie=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Te}\\)$`),ze=new RegExp(`^hsl\\(${Te},${Oe},${Oe}\\)$`),Be=new RegExp(`^hsla\\(${Te},${Oe},${Oe},${Te}\\)$`),Re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qe(){return this.rgb().formatHex()}function Fe(){return this.rgb().formatRgb()}function Ue(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=je.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?He(e):3===n?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ve(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ve(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pe.exec(t))?new Xe(e[1],e[2],e[3],1):(e=De.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Le.exec(t))?Ve(e[1],e[2],e[3],e[4]):(e=Ie.exec(t))?Ve(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ze.exec(t))?Qe(e[1],e[2]/100,e[3]/100,1):(e=Be.exec(t))?Qe(e[1],e[2]/100,e[3]/100,e[4]):Re.hasOwnProperty(t)?He(Re[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function He(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function Ve(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xe(t,e,n,r)}function We(t){return t instanceof Ae||(t=Ue(t)),t?new Xe((t=t.rgb()).r,t.g,t.b,t.opacity):new Xe}function Ye(t,e,n,r){return 1===arguments.length?We(t):new Xe(t,e,n,null==r?1:r)}function Xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $e(){return`#${Je(this.r)}${Je(this.g)}${Je(this.b)}`}function Ge(){const t=Ze(this.opacity);return`${1===t?"rgb(":"rgba("}${Ke(this.r)}, ${Ke(this.g)}, ${Ke(this.b)}${1===t?")":`, ${t})`}`}function Ze(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ke(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Je(t){return((t=Ke(t))<16?"0":"")+t.toString(16)}function Qe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new en(t,e,n,r)}function tn(t){if(t instanceof en)return new en(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=Ue(t)),!t)return new en;if(t instanceof en)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new en(a,s,u,t.opacity)}function en(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function nn(t){return(t=(t||0)%360)<0?t+360:t}function rn(t){return Math.max(0,Math.min(1,t||0))}function on(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function an(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Ee(Ae,Ue,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qe,formatHex:qe,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tn(this).formatHsl()},formatRgb:Fe,toString:Fe}),Ee(Xe,Ye,Se(Ae,{brighter(t){return t=null==t?Ce:Math.pow(Ce,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Me:Math.pow(Me,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xe(Ke(this.r),Ke(this.g),Ke(this.b),Ze(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$e,formatHex:$e,formatHex8:function(){return`#${Je(this.r)}${Je(this.g)}${Je(this.b)}${Je(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ge,toString:Ge})),Ee(en,(function(t,e,n,r){return 1===arguments.length?tn(t):new en(t,e,n,null==r?1:r)}),Se(Ae,{brighter(t){return t=null==t?Ce:Math.pow(Ce,t),new en(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Me:Math.pow(Me,t),new en(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xe(on(t>=240?t-240:t+120,i,r),on(t,i,r),on(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new en(nn(this.h),rn(this.s),rn(this.l),Ze(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ze(this.opacity);return`${1===t?"hsl(":"hsla("}${nn(this.h)}, ${100*rn(this.s)}%, ${100*rn(this.l)}%${1===t?")":`, ${t})`}`}}));const sn=t=>()=>t;function un(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):sn(isNaN(t)?e:t)}const ln=function t(e){var n=function(t){return 1==(t=+t)?un:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):sn(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Ye(t)).r,(e=Ye(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=un(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function cn(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ye(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}cn((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return an((n-r/e)*e,a,i,o,s)}})),cn((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return an((n-r/e)*e,i,o,a,s)}}));var hn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(hn.source,"g");function dn(t,e){var n,r,i,o=hn.lastIndex=fn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=hn.exec(t))&&(r=fn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:de(n,r)})),o=fn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function pn(t,e){var n;return("number"==typeof e?de:e instanceof Ue?ln:(n=Ue(e))?(e=n,ln):dn)(t,e)}function _n(t){return function(){this.removeAttribute(t)}}function vn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function mn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function yn(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function bn(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function wn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function kn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&xn(t,i)),n}return i._value=e,i}function En(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&wn(t,i)),n}return i._value=e,i}function Sn(t,e){return function(){ce(this,t).delay=+e.apply(this,arguments)}}function An(t,e){return e=+e,function(){ce(this,t).delay=e}}function Mn(t,e){return function(){he(this,t).duration=+e.apply(this,arguments)}}function Cn(t,e){return e=+e,function(){he(this,t).duration=e}}function Nn(t,e){if("function"!=typeof e)throw new Error;return function(){he(this,t).ease=e}}function Tn(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ce:he;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var On=Lt.prototype.constructor;function jn(t){return function(){this.style.removeProperty(t)}}function Pn(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Dn(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Pn(t,o,n)),r}return o._value=e,o}function Ln(t){return function(e){this.textContent=t.call(this,e)}}function In(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ln(r)),e}return r._value=t,r}var zn=0;function Bn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Rn(){return++zn}var qn=Lt.prototype;Bn.prototype=function(t){return Lt().transition(t)}.prototype={constructor:Bn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=x(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,h=o[a]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,le(h[f],e,n,f,h,fe(s,n)));return new Bn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=S(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=fe(u,n),_=0,v=d.length;_<v;++_)(f=d[_])&&le(f,e,n,_,d,p);o.push(d),a.push(u)}return new Bn(o,a,e,n)},selectChild:qn.selectChild,selectChildren:qn.selectChildren,filter:function(t){"function"!=typeof t&&(t=A(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Bn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Bn(a,this._parents,this._name,this._id)},selection:function(){return new On(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Rn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=fe(a,e);le(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bn(r,this._parents,t,n)},call:qn.call,nodes:qn.nodes,node:qn.node,size:qn.size,empty:qn.empty,each:qn.each,on:function(t,e){var n=this._id;return arguments.length<2?fe(this.node(),n).on.on(t):this.each(Tn(n,t,e))},attr:function(t,e){var n=U(t),r="transform"===n?be:pn;return this.attrTween(t,"function"==typeof e?(n.local?bn:yn)(n,r,ke(this,"attr."+t,e)):null==e?(n.local?vn:_n)(n):(n.local?mn:gn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=U(t);return this.tween(n,(r.local?kn:En)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ye:pn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Q(this,t),a=(this.style.removeProperty(t),Q(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,jn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Q(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Q(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,ke(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=he(this,t),l=u.on,c=null==u.value[a]?o||(o=jn(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Q(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Dn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ke(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,In(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=fe(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?we:xe)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Sn:An)(e,t)):fe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Mn:Cn)(e,t)):fe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Nn(e,t)):fe(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;he(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=he(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:qn[Symbol.iterator]};var Fn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Un(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Lt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},Lt.prototype.transition=function(t){var e,n;t instanceof Bn?(e=t._id,t=t._name):(e=Rn(),(n=Fn).time=Qt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&le(a,t,e,l,s,n||Un(a,e));return new Bn(r,this._parents,t,e)};const{abs:Hn,max:Vn,min:Wn}=Math;function Yn(t){return{type:t}}["w","e"].map(Yn),["n","s"].map(Yn),["n","w","e","s","nw","ne","sw","se"].map(Yn);class Xn extends Map{constructor(t,e=Jn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Gn(this,t))}has(t){return super.has(Gn(this,t))}set(t,e){return super.set(Zn(this,t),e)}delete(t){return super.delete(Kn(this,t))}}class $n extends Set{constructor(t,e=Jn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Gn(this,t))}add(t){return super.add(Zn(this,t))}delete(t){return super.delete(Kn(this,t))}}function Gn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Zn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Kn({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Jn(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Qn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const tr=Symbol("implicit");function er(){var t=new Xn,e=[],n=[],r=tr;function i(i){let o=t.get(i);if(void 0===o){if(r!==tr)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Xn;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return er(e,n).unknown(r)},Qn.apply(i,arguments),i}const nr=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");function rr(t,e,n){this.k=t,this.x=e,this.y=n}rr.prototype={constructor:rr,scale:function(t){return 1===t?this:new rr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new rr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new rr(1,0,0),rr.prototype;var ir='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',or="http://www.w3.org/2000/xmlns/",ar="http://www.w3.org/1999/xlink",sr="http://www.w3.org/2000/svg",ur="untitled";function lr(){var t=document.createElementNS(sr,"svg");document.body.appendChild(t),t.style.all="initial";var e=getComputedStyle(t);return document.body.removeChild(t),t=null,e}function cr(t,e){function n(t){for(var n,r,i=getComputedStyle(t),o="",a=0,s=i.length;a<s;a++)n=i[a],(r=i.getPropertyValue(n))!==e.getPropertyValue(n)&&(o+="".concat(n,":").concat(r,";"));t.setAttribute("style",o)}for(var r,i,o=((i=[]).push(r=t),function t(e){if(e&&e.hasChildNodes())for(var n=e.firstChild;n;)1===n.nodeType&&"SCRIPT"!==n.nodeName&&(i.push(n),t(n)),n=n.nextSibling}(r),i),a=o.length;a--;)n(o[a])}function hr(t){var e=document.createElement("style");e.innerHTML=Array.from(document.styleSheets).filter((function(t){return!t.href||t.href.startsWith(document.location.origin)})).map((function(t){return Array.from(t.cssRules).map((function(t){return t.cssText})).join(" ")})).join(" "),t.prepend(e)}function fr(t,e,n){var r=document.createElement("a");document.body.appendChild(r),r.setAttribute("class","svg-crowbar"),r.setAttribute("download",t),r.setAttribute("href",e),r.style.display="none",r.click(),setTimeout((function(){n&&n(),document.body.removeChild(r)}),10)}var dr={debug:!1,fixSource:function(t){return btoa(unescape(encodeURIComponent(t.replace(/[\u00A0-\u2666]/g,(function(t){return"&#".concat(t.charCodeAt(0),";")})))))},scale:1};var pr=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dr,r=n.debug,i=void 0===r?dr.debug:r,o=n.fixSource,a=void 0===o?dr.fixSource:o,s=n.scale,u=void 0===s?dr.scale:s,l=document.createElement("canvas"),c=window.devicePixelRatio||1;document.body.appendChild(l),l.setAttribute("id","svg-image"),l.setAttribute("width",t.width*c*u),l.setAttribute("height",t.height*c*u),!1===i&&(l.style.display="none");var h=l.getContext("2d"),f="data:image/svg+xml;base64,".concat(a(t.source)),d=new Image;function p(){h.scale(c*u,c*u),h.drawImage(d,0,0);var t=l.toDataURL("image/png");!1===i&&fr("".concat(e,".png"),t,(function(){return document.body.removeChild(l)}))}d.onload=p,d.src=f,!0===i&&document.body.appendChild(d)}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.css,r=void 0===n?"inline":n;if(!(t instanceof SVGElement))throw new Error("SVG element is required");t.setAttribute("version","1.1"),t.removeAttribute("xmlns"),t.removeAttribute("xlink"),t.hasAttributeNS(or,"xmlns")||t.setAttributeNS(or,"xmlns",sr),t.hasAttributeNS(or,"xmlns:xlink")||t.setAttributeNS(or,"xmlns:xlink",ar),"inline"===r?cr(t,lr()):"internal"===r&&hr(t);var i=(new XMLSerializer).serializeToString(t),o=t.getBoundingClientRect(),a={top:o.top,left:o.left,width:o.width,height:o.height,class:t.getAttribute("class"),id:t.getAttribute("id"),name:t.getAttribute("name"),childElementCount:t.childElementCount,source:ir+i};return a}(t,n),e||function(t){if(!(t instanceof SVGElement))throw new Error("SVG Element is required");return t.getAttribute("id")||t.getAttribute("class")||document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()||ur}(t),null==n?void 0:n.downloadPNGOptions)};function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}function mr(t,e){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mr(t,e)}function yr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wr(t);if(e){var i=wr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return br(this,n)}}function br(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wr(t){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wr(t)}function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t,e,n){return e&&kr(t.prototype,e),n&&kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sr(t,e){Cr(t,e),e.add(t)}function Ar(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mr(t,e,n){Cr(t,e),e.set(t,n)}function Cr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nr(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Tr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,jr(t,e,"get"))}function Or(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,jr(t,e,"set"),n),n}function jr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Pr=new WeakMap,Dr=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,zr=new WeakMap,Br=new WeakMap,Rr=new WeakMap,qr=new WeakMap,Fr=new WeakMap,Ur=new WeakMap,Hr=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,$r=new WeakMap,Gr=new WeakMap,Zr=new WeakMap,Kr=new WeakMap,Jr=new WeakMap,Qr=new WeakMap,ti=new WeakMap,ei=new WeakMap,ni=new WeakMap,ri=new WeakMap,ii=new WeakMap,oi=new WeakMap,ai=new WeakMap,si=new WeakMap,ui=new WeakMap,li=new WeakMap,ci=new WeakMap,hi=new WeakMap,fi=new WeakMap,di=new WeakSet,pi=new WeakSet,_i=new WeakSet,vi=new WeakSet,gi=function(){function t(e,n,r,i,o,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};xr(this,t),Sr(this,vi),Sr(this,_i),Sr(this,pi),Sr(this,di),Mr(this,Pr,{writable:!0,value:void 0}),Mr(this,Dr,{writable:!0,value:void 0}),Mr(this,Lr,{writable:!0,value:void 0}),Mr(this,Ir,{writable:!0,value:void 0}),Mr(this,zr,{writable:!0,value:void 0}),Mr(this,Br,{writable:!0,value:void 0}),Mr(this,Rr,{writable:!0,value:void 0}),Mr(this,qr,{writable:!0,value:void 0}),Mr(this,Fr,{writable:!0,value:void 0}),Mr(this,Ur,{writable:!0,value:void 0}),Mr(this,Hr,{writable:!0,value:void 0}),Mr(this,Vr,{writable:!0,value:void 0}),Mr(this,Wr,{writable:!0,value:void 0}),Mr(this,Yr,{writable:!0,value:void 0}),Mr(this,Xr,{writable:!0,value:void 0}),Mr(this,$r,{writable:!0,value:void 0}),Mr(this,Gr,{writable:!0,value:void 0}),Mr(this,Zr,{writable:!0,value:void 0}),Mr(this,Kr,{writable:!0,value:void 0}),Mr(this,Jr,{writable:!0,value:void 0}),Mr(this,Qr,{writable:!0,value:void 0}),Mr(this,ti,{writable:!0,value:void 0}),Mr(this,ei,{writable:!0,value:void 0}),Mr(this,ni,{writable:!0,value:void 0}),Mr(this,ri,{writable:!0,value:void 0}),Mr(this,ii,{writable:!0,value:void 0}),Mr(this,oi,{writable:!0,value:void 0}),Mr(this,ai,{writable:!0,value:void 0}),Ar(this,"lines_style_object",void 0),Ar(this,"column_names_style_object",void 0),Mr(this,si,{writable:!0,value:void 0}),Mr(this,ui,{writable:!0,value:void 0}),Mr(this,li,{writable:!0,value:void 0}),Ar(this,"nodes_data",void 0),Ar(this,"links_data_structure",void 0),Ar(this,"nodes_data_structure",void 0),Mr(this,ci,{writable:!0,value:void 0}),Mr(this,hi,{writable:!0,value:void 0}),Mr(this,fi,{writable:!0,value:void 0}),Ar(this,"sankey_plot",void 0),Or(this,ci,document.createElement("div")),e.appendChild(Tr(this,ci)),Tr(this,ci).setAttribute("id","sankey_plot_auto_container"),Tr(this,ci).style.overflow="auto",Tr(this,ci).classList.add("noselect"),this.nodes_data=n,this.links_data_structure=r,Or(this,Pr,i),Or(this,Dr,o),Or(this,Rr,a),Or(this,qr,s);var l={vertical_gap_between_nodes:.7,node_percent_of_column_width:.3,show_column_lines:!0,show_column_names:!0,show_links_out_of_range:!0,node_move_y:!0,linear_gradient_links:!0,link_min_arc:5,link_arc_iterated_increase:5,plot_background_color:"#f5ecec",default_links_color:"blue",default_nodes_color:"grey",default_links_opacity:.25,default_gradient_links_opacity:.43,default_sublinks_color:"red",default_sublinks_opacity:.8,label_colors_object:{},column_names:void 0,start_node_count_from:0,start_column_count_from:0,on_node_click_function:void 0,on_link_click_function:void 0,on_node_hover_function:function(t,e,n,r){return"".concat(t.label)},on_link_hover_function:function(t,e,n,r){return"From: (column - ".concat(t.from_column,", node - ").concat(t.from_node,', label - "').concat(t.from_label,'") To: (column - ').concat(t.to_column,", node - ").concat(t.to_node,', label - "').concat(t.to_label,'") Value: ').concat(t.value)},hover_node_cursor:"pointer",hover_link_cursor:"help",grabbing_node_cursor:"grabbing"};Object.assign(l,u),Or(this,Lr,l.vertical_gap_between_nodes),Or(this,Ir,l.node_percent_of_column_width),Or(this,Fr,l.show_column_lines),Or(this,Ur,l.show_column_names),Or(this,Wr,l.show_links_out_of_range),Or(this,Hr,l.node_move_y),Or(this,Vr,l.linear_gradient_links),Or(this,zr,l.link_min_arc),Or(this,Br,l.link_arc_iterated_increase),Or(this,Yr,l.plot_background_color),Or(this,Xr,l.default_links_color),Or(this,$r,l.default_nodes_color),Or(this,Gr,l.default_links_opacity),Or(this,Zr,l.default_gradient_links_opacity),Or(this,Kr,l.default_sublinks_color),Or(this,Jr,l.default_sublinks_opacity),Or(this,ai,l.label_colors_object),Or(this,si,l.column_names),Or(this,ui,l.start_node_count_from),Or(this,li,l.start_column_count_from),Or(this,ni,l.on_node_click_function),Or(this,ri,l.on_link_click_function),Or(this,ii,l.on_node_hover_function),Or(this,oi,l.on_link_hover_function),Or(this,Qr,l.hover_node_cursor),Or(this,ti,l.hover_link_cursor),Or(this,ei,l.grabbing_node_cursor),Or(this,Rr,Tr(this,Rr)-Tr(this,li)),Or(this,qr,Tr(this,qr)-Tr(this,li)),this.lines_style_object={stroke:"red","stroke-width":2,"stroke-opacity":.35,"stroke-dasharray":"5,5"},u.hasOwnProperty("lines_style_object")&&Object.assign(this.lines_style_object,u.lines_style_object),this.column_names_style_object={"font-size":"15px",color:"red",opacity:.5,"font-weight":"bold"},u.hasOwnProperty("column_names_style_object")&&Object.assign(this.column_names_style_object,u.column_names_style_object),Or(this,hi,void 0),this.nodes_data_structure=[],Nr(this,pi,yi).call(this),Nr(this,di,mi).call(this),Nr(this,_i,bi).call(this),Or(this,fi,Tr(this,Pr)/(Tr(this,qr)-Tr(this,Rr))),this.sankey_plot=Nr(this,vi,wi).call(this)}return Er(t,[{key:"changeColumnRange",value:function(t,e){return t<Tr(this,li)||e>this.nodes_data_structure.length+Tr(this,li)||t>=e?(console.warn("CANNOT CHANGE COLUMN RANGE TO (".concat(t,",").concat(e,").")),!1):(Or(this,Rr,t-Tr(this,li)),Or(this,qr,e-Tr(this,li)),this.reloadPlot(),!0)}},{key:"reloadPlot",value:function(){this.sankey_plot=void 0,this.sankey_plot=Nr(this,vi,wi).call(this)}},{key:"columnNames",value:function(t){Or(this,Ur,t),this.reloadPlot()}},{key:"columnLines",value:function(t){Or(this,Fr,t),this.reloadPlot()}},{key:"yMovement",value:function(t){Or(this,Hr,t),this.reloadPlot()}},{key:"linearGradient",value:function(t){Or(this,Vr,t),this.reloadPlot()}},{key:"removePlot",value:function(){this.sankey_plot.clearData(),Tr(this,ci).removeChild(this.sankey_plot.dom_node),this.sankey_plot=void 0,this.links_data_structure=void 0,this.nodes_data_structure=void 0,this.nodes_data=void 0,Tr(this,ci).remove()}},{key:"setShowLinksOutOfRange",value:function(t){Or(this,Wr,t),this.reloadPlot()}},{key:"setLabelColorsObject",value:function(t){Or(this,ai,t),this.reloadPlot()}},{key:"getShowLinksOutOfRange",value:function(){return Tr(this,Wr)}},{key:"setPlotBackgroundColor",value:function(){}},{key:"getPlotBackgroundColor",value:function(){return Tr(this,Yr)}},{key:"setDefaultLinksColor",value:function(){}},{key:"getDefaultLinksColor",value:function(){return Tr(this,Xr)}},{key:"setDefaultNodesColor",value:function(t){Or(this,$r,t),this.reloadPlot()}},{key:"getDefaultNodesColor",value:function(){return Tr(this,$r)}},{key:"setDefaultLinksOpacity",value:function(){}},{key:"getDefaultLinksOpacity",value:function(){return Tr(this,Gr)}},{key:"setDefaultGradientLinksOpacity",value:function(){}},{key:"getDefaultGradientLinksOpacity",value:function(){return Tr(this,Zr)}},{key:"setDefaultSublinksColor",value:function(){}},{key:"getDefaultSublinksColor",value:function(){return Tr(this,Kr)}},{key:"setDefaultSublinksOpacity",value:function(){}},{key:"getDefaultSublinksOpacity",value:function(){return Tr(this,Jr)}},{key:"setHoverNodeCursor",value:function(){}},{key:"getHoverNodeCursor",value:function(){return Tr(this,Qr)}},{key:"setHoverLinkCursor",value:function(){}},{key:"getHoverLinkCursor",value:function(){return Tr(this,ti)}},{key:"setGrabbingNodeCursor",value:function(){}},{key:"getGrabbingNodeCursor",value:function(){return Tr(this,ei)}}]),t}();function mi(){this.links_data_structure.sort((function(t,e){return t.from.node-e.from.node})),this.links_data_structure.sort((function(t,e){return t.from.column-e.from.column})),this.links_data_structure.sort((function(t,e){return t.to.node-e.to.node})),this.links_data_structure.sort((function(t,e){return t.to.column-t.from.column-(e.to.column-e.from.column)}));var t=this.links_data_structure[this.links_data_structure.length-1];Or(this,hi,t.to.column-t.from.column)}function yi(){for(var t in this.links_data_structure){var e=this.links_data_structure[t],n=e.from.column,r=e.to.column;if(n===r){if(e.from.node!==e.to.node)throw new Error("LINKS CANNOT BE DEFINED BETWEEN NODES IN THE SAME COLUMN, UNLESS IT'S THE SAME NODE");if(["LL","RR"].includes(e.link_type))throw new Error("RR,LL LINKS CANNOT YET BE DEFINED BETWEEN THE SAME NODE");if(void 0!==e.link_type&&"LR"!==e.link_type&&"RL"!==e.link_type)throw new Error('"'.concat(e.link_type,'" IS NOT A VALID LINK TYPE'));e.link_type="LR"}else if(n>r)if(e.hasOwnProperty("link_type")){if(!["LR","RL","LL","RR"].includes(e.link_type))throw new Error('"'.concat(e.link_type,'" IS NOT A VALID LINK TYPE'));e.link_type=e.link_type[1]+e.link_type[0],e.reversed=!0;var i=e.from;e.from=e.to,e.to=i}else{e.link_type="LR",e.reversed=!0;var o=e.from;e.from=e.to,e.to=o}}}function bi(){for(var t in this.nodes_data){var e=[];for(var n in this.nodes_data[t])e.push({properties_object:this.nodes_data[t][n],height:0,y:0,horizontal_shift:0,vertical_shift:0,left_side_sum:0,right_side_sum:0,links_references:[]});this.nodes_data_structure.push(e)}for(var r in this.links_data_structure){var i=this.links_data_structure[r];switch(this.nodes_data_structure[i.from.column][i.from.node].links_references.push({link_id:r,second_node_column:i.to.column,second_node_position:i.to.node}),i.to.column===i.from.column&&i.to.node===i.from.node||this.nodes_data_structure[i.to.column][i.to.node].links_references.push({link_id:r,second_node_column:i.from.column,second_node_position:i.from.node}),i.link_type){case"LL":this.nodes_data_structure[i.from.column][i.from.node].left_side_sum+=i.value,this.nodes_data_structure[i.to.column][i.to.node].left_side_sum+=i.value;break;case"LR":this.nodes_data_structure[i.from.column][i.from.node].left_side_sum+=i.value,this.nodes_data_structure[i.to.column][i.to.node].right_side_sum+=i.value;break;case"RR":this.nodes_data_structure[i.from.column][i.from.node].right_side_sum+=i.value,this.nodes_data_structure[i.to.column][i.to.node].right_side_sum+=i.value;break;case"RL":case void 0:this.nodes_data_structure[i.from.column][i.from.node].right_side_sum+=i.value,this.nodes_data_structure[i.to.column][i.to.node].left_side_sum+=i.value;break;default:throw new Error("".concat(i.link_type," IS NOT A VALID LINK TYPE"))}}var o=0,a=[];for(var s in this.nodes_data_structure){var u=0;for(var l in this.nodes_data_structure[s]){var c,h=this.nodes_data_structure[s][l];c=h.right_side_sum>h.left_side_sum?h.right_side_sum:h.left_side_sum,h.height=c,c>o&&(o=c),u+=c}a.push(u)}var f=Math.max.apply(null,a);for(var d in this.node_height_unit=(1-Tr(this,Lr))*Tr(this,Dr)/f,this.nodes_data_structure){var p=this.nodes_data_structure[d].length+1,_=(Tr(this,Lr)*Tr(this,Dr)/this.node_height_unit+(f-a[d]))/p,v=_;for(var g in this.nodes_data_structure[d]){var m=this.nodes_data_structure[d][g];m.y=v*this.node_height_unit,v+=m.height,m.height*=this.node_height_unit,v+=_}}for(var y in this.nodes_data_structure)for(var b in this.nodes_data_structure[y]){var w=this.nodes_data_structure[y][b],x=[],k=[],E=[],S=[];for(var A in w.links_references){var M=this.links_data_structure[w.links_references[A].link_id];switch(M.link_type){case"LL":w.links_references[A].second_node_column>y?E.push(M):x.push(M);break;case"LR":w.links_references[A].second_node_column>y?E.push(M):w.links_references[A].second_node_column==y?(E.push(M),S.push(M)):S.push(M);break;case"RR":w.links_references[A].second_node_column>y?k.push(M):S.push(M);break;case"RL":case void 0:w.links_references[A].second_node_column>y?k.push(M):x.push(M);break;default:throw new Error("".concat(M.link_type," IS NOT A VALID LINK TYPE"))}}var C=0;for(var N in x){var T=x[N];T.right_side_rel_to_node_height=C,C+=T.value*this.node_height_unit}var O=0;for(var j in k){var P=k[j];P.left_side_rel_to_node_height=O,O+=P.value*this.node_height_unit}E.sort((function(t,e){return e.to.node-t.to.node})),E.sort((function(t,e){return e.to.column-t.to.column}));var D=w.height,L=-Tr(this,Br)+Tr(this,zr),I=0;for(var z in E){var B=E[E.length-1-z],R=B.value*this.node_height_unit;B.left_side_rel_to_node_height=D-I-R,I+=R,B.left_side_curve=L+Tr(this,Br),L+=R+Tr(this,Br)}S.sort((function(t,e){return e.from.node-t.from.node})),S.sort((function(t,e){return t.from.column-e.from.column}));var q=-Tr(this,Br)+Tr(this,zr),F=0;for(var U in S){var H=S[S.length-1-U],V=H.value*this.node_height_unit;H.right_side_rel_to_node_height=D-F-V,F+=V,H.right_side_curve=q+Tr(this,Br),q+=V+Tr(this,Br)}}}function wi(){return Tr(this,ci).replaceChildren(),new Ti(Tr(this,ci),this.nodes_data_structure,this.links_data_structure,Tr(this,Pr),Tr(this,Dr),Tr(this,Ir),Tr(this,Rr),Tr(this,qr),this.node_height_unit,Tr(this,hi),Tr(this,fi),Tr(this,Fr),Tr(this,Ur),Tr(this,Hr),Tr(this,Vr),Tr(this,Br),Tr(this,ai),Tr(this,Yr),Tr(this,Xr),Tr(this,Gr),Tr(this,Zr),Tr(this,Kr),Tr(this,Jr),this.lines_style_object,Tr(this,si),this.column_names_style_object,Tr(this,$r),Tr(this,ui),Tr(this,li),Tr(this,Wr),Tr(this,ni),Tr(this,ri),Tr(this,ii),Tr(this,oi),Tr(this,Qr),Tr(this,ti),Tr(this,ei))}var xi=new WeakSet,ki=new WeakSet,Ei=new WeakSet,Si=new WeakSet,Ai=new WeakSet,Mi=new WeakSet,Ci=new WeakSet,Ni=new WeakSet,Ti=function(){function t(e,n,r,i,o,a,s,u,l,c,h){var f=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13],_=!(arguments.length>14&&void 0!==arguments[14])||arguments[14],v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:5,g=arguments.length>16&&void 0!==arguments[16]?arguments[16]:{},m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:"#f5ecec",y=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"blue",b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:.25,w=arguments.length>20&&void 0!==arguments[20]?arguments[20]:.43,x=arguments.length>21&&void 0!==arguments[21]?arguments[21]:"red",k=arguments.length>22&&void 0!==arguments[22]?arguments[22]:.8,E=arguments.length>23&&void 0!==arguments[23]?arguments[23]:{stroke:"red","stroke-width":2,"stroke-opacity":.35,"stroke-dasharray":"5,5"},S=arguments.length>24&&void 0!==arguments[24]?arguments[24]:void 0,A=arguments.length>25&&void 0!==arguments[25]?arguments[25]:{"font-size":"15px",color:"red",opacity:.5,"font-weight":"bold"},M=arguments.length>26&&void 0!==arguments[26]?arguments[26]:"grey",C=arguments.length>27&&void 0!==arguments[27]?arguments[27]:0,N=arguments.length>28&&void 0!==arguments[28]?arguments[28]:0,T=!(arguments.length>29&&void 0!==arguments[29])||arguments[29],O=arguments.length>30&&void 0!==arguments[30]?arguments[30]:void 0,j=arguments.length>31&&void 0!==arguments[31]?arguments[31]:void 0,P=arguments.length>32&&void 0!==arguments[32]?arguments[32]:void 0,D=arguments.length>33&&void 0!==arguments[33]?arguments[33]:void 0,L=arguments.length>34&&void 0!==arguments[34]?arguments[34]:"pointer",I=arguments.length>35&&void 0!==arguments[35]?arguments[35]:"help",z=arguments.length>36&&void 0!==arguments[36]?arguments[36]:"grabbing";xr(this,t),Sr(this,Ni),Sr(this,Ci),Sr(this,Mi),Sr(this,Ai),Sr(this,Si),Sr(this,Ei),Sr(this,ki),Sr(this,xi),this.dom_container=e,this.nodes_data_structure=n,this.links_data=r,this.plot_width=i,this.plot_height=o,this.nodes_width_percent=a,this.first_column=s,this.last_column=u,this.selected_node=void 0,this.node_height_unit=l,this.longest_link_length=c,this.last_column_width=h,this.column_width=this.plot_width/(this.last_column-this.first_column),this.node_move_y=p,this.linear_gradient_links=_,this.link_arc_iterated_increase=v,this.label_colors_object=g,this.plot_background_color=m,this.default_links_color=y,this.default_links_opacity=b,this.default_gradient_links_opacity=w,this.default_sublinks_color=x,this.default_sublinks_opacity=k,this.line_definition_object=E,this.column_names=S,this.column_names_style=A,this.default_nodes_color=M,this.start_node_count_from=C,this.start_column_count_from=N,this.show_links_out_of_range=T,this.on_node_click_function=O,this.on_link_click_function=j,this.on_node_hover_function=P,this.on_link_hover_function=D,this.hover_node_cursor=L,this.hover_link_cursor=I,this.grabbing_node_cursor=z,this.node_info_div=void 0,this.mouseovered_node=void 0,this.link_info_div=void 0,this.mouseovered_link=void 0,Nr(this,xi,Oi).call(this),Nr(this,Si,Di).call(this),f&&Nr(this,Ai,Li).call(this),d&&Nr(this,Mi,Ii).call(this),this.linear_gradient_colors_object={},Nr(this,Ci,zi).call(this),Nr(this,Ni,Bi).call(this)}return Er(t,[{key:"clearData",value:function(){this.nodes_data_structure=void 0,this.links_data=void 0,this.column_names=void 0,this.nodes=void 0,this.defs=void 0}}]),t}();function Oi(){this.dom_node=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this.dom_node.appendChild(this.defs),Gi(this.dom_node,{width:this.plot_width,height:this.plot_height,id:"sankey_field",viewBox:"0 0 ".concat(this.plot_width," ").concat(this.plot_height)}),this.dom_node.style.backgroundColor=this.plot_background_color,this.dom_container.appendChild(this.dom_node)}function ji(t){var e=this.nodes[t.target.getAttribute("column")][t.target.getAttribute("position")],n=e.column,r=e.position,i=this.nodes_data_structure[n][r],o=e.label,a=Math.max(i.left_side_sum,i.right_side_sum),s=i.links_references.length,u=i.left_side_sum,l=i.right_side_sum,c=0,h=0;for(var f in i.links_references){var d=this.links_data[i.links_references[f].link_id],p=i.links_references[f].second_node_column;n>p?d.hasOwnProperty("link_type")?"L"===d.link_type[1]?c+=1:"R"===d.link_type[1]&&(h+=1):c+=1:n<p&&(d.hasOwnProperty("link_type")?"L"===d.link_type[0]?c+=1:"R"===d.link_type[0]&&(h+=1):h+=1)}return this.column_names?n=this.column_names[n]:n+=this.start_column_count_from,{label:o,height:a,number_of_links:s,left_side_sum:u,right_side_sum:l,column:n,position:r+=this.start_node_count_from,number_of_links_left:c,number_of_links_right:h}}function Pi(t){var e=t.target.getAttribute("links_array_id"),n=this.links_data[e],r=parseInt(n.from.column),i=parseInt(n.to.column),o=parseInt(n.from.node),a=parseInt(n.to.node);if(n.hasOwnProperty("reversed")){var s=r;r=i,i=s,s=o,o=a,a=s}var u=this.nodes_data_structure[r][o].properties_object.label,l=this.nodes_data_structure[i][a].properties_object.label,c=n.value,h=t.target.getAttribute("sublink_index");return h&&(c=n.sublinks[h].value),o+=this.start_node_count_from,a+=this.start_node_count_from,this.column_names?(r=this.column_names[r],i=this.column_names[i]):(r+=this.start_column_count_from,i+=this.start_column_count_from),{from_column:r,to_column:i,from_node:o,to_node:a,from_label:u,to_label:l,value:c,sublink_data:h?n.sublinks[h]:void 0}}function Di(){var t=this,e=navigator.userAgent.toLocaleLowerCase().includes("firefox"),n=!1;this.dom_node.addEventListener("click",(function(r){if(e&&n)n=!1;else{if("SankeyNode"===r.target.getAttribute("identifier")&&t.on_node_click_function){var i=r.target,o=t.nodes[i.getAttribute("column")][i.getAttribute("position")],a=t.nodes_data_structure[o.column][o.position].properties_object;t.on_node_click_function(Nr(t,ki,ji).call(t,r),a,i,r)}if("SankeyLink"===r.target.getAttribute("identifier")&&t.on_link_click_function){var s=r.target,u=t.links_data[r.target.getAttribute("links_array_id")];t.on_link_click_function(Nr(t,Ei,Pi).call(t,r),u,s,r)}}})),this.dom_node.addEventListener("pointerdown",(function(e){"SankeyNode"===e.target.getAttribute("identifier")&&(t.node_info_div&&(t.dom_container.removeChild(t.node_info_div),t.node_info_div=void 0),t.selected_node=t.nodes[e.target.getAttribute("column")][e.target.getAttribute("position")],t.selected_node.mouse_locked=!0,t.cursor_distance_from_node_top=Math.abs(e.clientY-t.dom_node.getBoundingClientRect().top-t.selected_node.current_y),t.selected_node.dom_rectangle.classList.add("focused_SankeyNode"),t.dom_node.style.cursor=t.grabbing_node_cursor)})),this.dom_node.addEventListener("pointermove",(function(r){t.selected_node&&t.selected_node.mouse_locked&&(e&&(n=!0),t.selected_node.move(r.clientX,r.clientY-t.dom_node.getBoundingClientRect().top))})),this.dom_node.addEventListener("pointerup",(function(e){t.selected_node&&(t.selected_node.mouse_locked=!1,t.selected_node.dom_rectangle.classList.remove("focused_SankeyNode"),t.selected_node=void 0,t.dom_node.style.removeProperty("cursor"))})),this.dom_node.addEventListener("pointerover",(function(e){if("SankeyNode"!==e.target.getAttribute("identifier")||t.selected_node){if("SankeyLink"===e.target.getAttribute("identifier")&&!t.selected_node){t.dom_node.style.cursor=t.hover_link_cursor,t.mouseovered_link=e.target,t.mouseovered_link.classList.add("hovered_SankeyLink");var n=void 0;if(t.on_link_hover_function){var r=e.target,i=t.links_data[e.target.getAttribute("links_array_id")];n=t.on_link_hover_function(Nr(t,Ei,Pi).call(t,e),i,r,e)}var o=document.createElement("div");o.classList.add("link_info_div"),o.innerHTML=n,t.dom_container.appendChild(o);var a=e.clientY-o.offsetHeight-15,s=e.clientX+15;o.style.top="".concat(a>0?a:0,"px"),o.style.left="".concat(s>0?s:0,"px"),t.link_info_div=o}}else{t.dom_node.style.cursor=t.hover_node_cursor,t.mouseovered_node=t.nodes[e.target.getAttribute("column")][e.target.getAttribute("position")];var u=void 0;if(t.on_node_hover_function){var l=e.target,c=t.nodes[l.getAttribute("column")][l.getAttribute("position")],h=t.nodes_data_structure[c.column][c.position].properties_object;u=t.on_node_hover_function(Nr(t,ki,ji).call(t,e),h,l,e)}var f=document.createElement("div");f.classList.add("node_info_div"),f.innerHTML=u,t.dom_container.appendChild(f);var d=t.mouseovered_node.current_y-f.offsetHeight+t.dom_container.getBoundingClientRect().top-5,p=t.mouseovered_node.current_x+t.dom_container.getBoundingClientRect().left+(t.mouseovered_node.width-f.offsetWidth)/2;p=p>0?p:0,0===(d=d>0?d:0)&&(p+=f.offsetWidth),f.style.top="".concat(d,"px"),f.style.left="".concat(p,"px"),t.node_info_div=f}})),this.dom_node.addEventListener("pointerout",(function(e){"SankeyNode"===e.target.getAttribute("identifier")?(t.selected_node||t.dom_node.style.removeProperty("cursor"),t.node_info_div&&(t.dom_container.removeChild(t.node_info_div),t.node_info_div=void 0)):"SankeyLink"===e.target.getAttribute("identifier")&&(t.selected_node||t.dom_node.style.removeProperty("cursor"),t.link_info_div&&(t.mouseovered_link.classList.remove("hovered_SankeyLink"),t.dom_container.removeChild(t.link_info_div),t.link_info_div=void 0))}))}function Li(){for(var t=0;t<this.last_column-this.first_column-1;t++){var e=document.createElementNS("http://www.w3.org/2000/svg","line");Gi(e,{x1:this.column_width*(t+1),x2:this.column_width*(t+1),y1:0,y2:this.plot_height,stroke:this.line_definition_object.stroke,"stroke-width":this.line_definition_object["stroke-width"],"stroke-opacity":this.line_definition_object["stroke-opacity"],"stroke-dasharray":this.line_definition_object["stroke-dasharray"]}),this.dom_node.appendChild(e)}}function Ii(){for(var t=this.last_column-this.first_column,e=Math.ceil(t/10),n=Math.floor(this.nodes_data_structure.length%e/2),r=n+Math.floor((this.first_column-n)/e)*e-this.first_column;r<t;r+=e){var i=document.createElementNS("http://www.w3.org/2000/svg","text");i.textContent=this.column_names?this.column_names[r+this.first_column]:r+this.first_column+this.start_column_count_from,Gi(i,{x:this.column_width/2+r*this.column_width,y:10,"text-anchor":"middle","dominant-baseline":"hanging",style:"font-size:".concat(this.column_names_style["font-size"],";fill:").concat(this.column_names_style.color,";\n                opacity:").concat(this.column_names_style.opacity,";font-weight:").concat(this.column_names_style["font-weight"])}),this.dom_node.appendChild(i)}}function zi(){var t,e=[];this.links_to_create_indexes=[];for(var n=this.first_column;n<this.last_column;n++)for(var r in this.nodes_data_structure[n])for(var i in this.nodes_data_structure[n][r].links_references){var o=this.nodes_data_structure[n][r].links_references[i];this.links_to_create_indexes.push(o.link_id),(o.second_node_column<this.first_column||o.second_node_column>=this.last_column)&&e.push({column:o.second_node_column,position:o.second_node_position})}if(this.nodes={},this.show_links_out_of_range)for(var a=this.nodes_data_structure.length,s=a-this.last_column>this.first_column?[this.first_column-this.longest_link_length>0?this.first_column-this.longest_link_length:0,this.first_column]:[this.last_column,this.last_column+this.longest_link_length<a?this.last_column+this.longest_link_length:a],u=s[0];u<s[1];u++)for(var l in this.nodes_data_structure[u])for(var c in this.nodes_data_structure[u][l].links_references){var h=this.nodes_data_structure[u][l].links_references[c];(h.second_node_column<this.first_column||h.second_node_column>=this.last_column)&&(e.push({column:h.second_node_column,position:h.second_node_position}),this.links_to_create_indexes.push(h.link_id))}this.links_to_create_indexes=function(t){if(Array.isArray(t))return vr(t)}(t=new Set(this.links_to_create_indexes))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return vr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();for(var f=this.first_column;f<this.last_column;f++){this.nodes.hasOwnProperty(f)||(this.nodes[f]={});for(var d=0;d<this.nodes_data_structure[f].length;d++){var p=this.nodes_data_structure[f][d],_="";p.properties_object.hasOwnProperty("label")&&(_=p.properties_object.label);var v=this.default_nodes_color;this.label_colors_object.hasOwnProperty(_)&&(v=this.label_colors_object[_]),p.properties_object.hasOwnProperty("color")&&(v=p.properties_object.color);var g;g=p.properties_object.hasOwnProperty("width")?this.column_width*parseFloat(p.properties_object.width):this.column_width*this.nodes_width_percent,this.nodes[f][d]=new qi((f-this.first_column)*this.column_width+(this.column_width-g)/2+p.horizontal_shift*(this.column_width/this.last_column_width),p.y+p.vertical_shift,g,p.height,this,f,d,v,_,p.properties_object)}}for(var m in e){var y=e[m].column,b=e[m].position;this.nodes.hasOwnProperty(y)||(this.nodes[y]={});var w=this.nodes_data_structure[y][b],x="";w.properties_object.hasOwnProperty("label")&&(x=w.properties_object.label);var k=this.default_nodes_color;this.label_colors_object.hasOwnProperty(x)&&(k=this.label_colors_object[x]),w.properties_object.hasOwnProperty("color")&&(k=w.properties_object.color);var E;E=w.properties_object.hasOwnProperty("width")?this.column_width*parseFloat(w.properties_object.width):this.column_width*this.nodes_width_percent,this.nodes[y][b]=new qi((y-this.first_column)*this.column_width+(this.column_width-E)/2+w.horizontal_shift*(this.column_width/this.last_column_width),w.y+w.vertical_shift,E,w.height,this,y,b,k,x,w.properties_object)}}function Bi(){for(var t in this.links_to_create_indexes.sort((function(t,e){return t-e})),this.links_to_create_indexes){var e=this.links_data[this.links_to_create_indexes[t]],n="RL";e.hasOwnProperty("link_type")&&(n=e.link_type);var r=this.nodes[e.from.column][e.from.node],i=this.nodes[e.to.column][e.to.node],o=e.value*this.node_height_unit,a=e.hasOwnProperty("color")?e.color:void 0;switch(n){case"RL":new Wi(r,i,o,this,this.links_to_create_indexes[t],a);break;case"LR":new Yi(r,i,o,this,this.links_to_create_indexes[t],a);break;case"LL":new Xi(r,i,o,this,this.links_to_create_indexes[t],a);break;case"RR":new $i(r,i,o,this,this.links_to_create_indexes[t],a);break;default:throw new Error("NOT A VALID LINK TYPE")}if(e.hasOwnProperty("sublinks"))for(var s in e.sublinks){s=parseInt(s);var u=e.sublinks[s];switch(a=u.hasOwnProperty("color")?u.color:void 0,n){case"RL":new Wi(r,i,o,this,this.links_to_create_indexes[t],a,[u,s]);break;case"LR":new Yi(r,i,o,this,this.links_to_create_indexes[t],a,[u,s]);break;case"LL":new Xi(r,i,o,this,this.links_to_create_indexes[t],a,[u,s]);break;case"RR":new $i(r,i,o,this,this.links_to_create_indexes[t],a,[u,s]);break;default:throw new Error("NOT A VALID LINK TYPE")}}}for(var l in this.nodes)for(var c in this.nodes[l])this.nodes[l][c].redraw()}var Ri=new WeakSet,qi=function(){function t(e,n,r,i,o,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"blue",l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{};xr(this,t),Sr(this,Ri),this.original_x=e,this.original_y=n,this.current_x=e,this.current_y=n,this.column=a,this.position=s,this.original_color=u,this.width=r,this.height=i,this.label=l,this.properties_object=c,this.links=[],this.sankey_plot_object=o,this.dom_group_node=void 0,this.dom_rectangle=void 0,this.dom_label=void 0,this.mouse_locked=!1,Nr(this,Ri,Fi).call(this)}return Er(t,[{key:"move",value:function(t,e){if(this.sankey_plot_object.node_move_y){var n=e-0-this.sankey_plot_object.cursor_distance_from_node_top+this.sankey_plot_object.dom_node.parentNode.scrollTop;this.sankey_plot_object.nodes_data_structure[this.column][this.position].vertical_shift+=n-this.current_y,this.current_y=n}for(var r in this.dom_group_node.style.transform="translate(".concat(this.current_x,"px, ").concat(this.current_y,"px)"),this.links)this.links[r].updateD();this.redraw()}},{key:"redraw",value:function(){this.sankey_plot_object.dom_node.removeChild(this.dom_group_node),this.sankey_plot_object.dom_node.appendChild(this.dom_group_node)}},{key:"addLink",value:function(t){this.links.push(t)}}]),t}();function Fi(){this.dom_group_node=document.createElementNS("http://www.w3.org/2000/svg","g"),this.dom_rectangle=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.sankey_plot_object.dom_node.appendChild(this.dom_group_node),this.dom_group_node.appendChild(this.dom_rectangle),this.dom_group_node.style.transform="translate(".concat(this.original_x,"px, ").concat(this.original_y,"px)"),Gi(this.dom_rectangle,{width:"".concat(this.width,"px"),height:this.height,fill:this.original_color,x:0,y:0,identifier:"SankeyNode",column:this.column,position:this.position})}var Ui=new WeakSet,Hi=function(){function t(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;xr(this,t),Sr(this,Ui),this.node1=e,this.node2=n,this.height=r,this.sankey_plot_object=i,this.links_array_index=o,this.fill=a,this.opacity=void 0,this.dom_node=void 0,this.node1_render_height=0,this.node2_render_height=0,this.node1.addLink(this),this.node2.addLink(this),this.node1_render_height=this.sankey_plot_object.links_data[this.links_array_index].left_side_rel_to_node_height,this.node2_render_height=this.sankey_plot_object.links_data[this.links_array_index].right_side_rel_to_node_height,this.sublink_data=void 0,s&&(this.sublink_data=s[0],this.node1_render_height+=this.height*this.sublink_data.shift,this.node2_render_height+=this.height*this.sublink_data.shift,this.parent_link_height=this.height,this.height=this.sankey_plot_object.node_height_unit*this.sublink_data.value,this.sublink_index=s[1]),Nr(this,Ui,Vi).call(this)}return Er(t,[{key:"_calculateD",value:function(t,e,n,r,i,o,a){}},{key:"updateD",value:function(){this.dom_node.setAttribute("d",this._calculateD(this.node1.current_x,this.node2.current_x,this.node1.current_y+this.node1_render_height,this.node2.current_y+this.node2_render_height,this.height,this.node1.width,this.node2.width)),this.sankey_plot_object.dom_node.removeChild(this.dom_node),this.sankey_plot_object.dom_node.appendChild(this.dom_node)}},{key:"_createDomElement",value:function(){this.dom_node=document.createElementNS("http://www.w3.org/2000/svg","path"),Gi(this.dom_node,{identifier:"SankeyLink",links_array_id:this.links_array_index,fill:this.fill,"fill-opacity":this.opacity,d:this._calculateD(this.node1.original_x,this.node2.original_x,this.node1.original_y+this.node1_render_height,this.node2.original_y+this.node2_render_height,this.height,this.node1.width,this.node2.width)}),this.sublink_data&&this.dom_node.setAttribute("sublink_index",this.sublink_index),this.sankey_plot_object.dom_node.appendChild(this.dom_node)}}]),t}();function Vi(){if(!this.sankey_plot_object.linear_gradient_links||this.fill||this.sublink_data)this.fill||(this.fill=this.sublink_data?this.sankey_plot_object.default_sublinks_color:this.sankey_plot_object.default_links_color),this.opacity=this.sublink_data?this.sankey_plot_object.default_sublinks_opacity:this.sankey_plot_object.default_links_opacity;else{var t=this.node1.original_color,e=this.node2.original_color;if(this.sankey_plot_object.linear_gradient_colors_object.hasOwnProperty(t)||(this.sankey_plot_object.linear_gradient_colors_object[t]={}),!this.sankey_plot_object.linear_gradient_colors_object[t].hasOwnProperty(e)){var n=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");Gi(n,{id:"_".concat(t,"_to_").concat(e),x1:"0%",x2:"100%",y1:"0%",y2:"0%"});var r=document.createElementNS("http://www.w3.org/2000/svg","stop");r.setAttribute("offset","10%"),r.style.stopColor=t,r.style.stopOpacity="1";var i=document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset","90%"),i.style.stopColor=e,i.style.stopOpacity="1",n.appendChild(r),n.appendChild(i),this.sankey_plot_object.defs.appendChild(n),this.sankey_plot_object.linear_gradient_colors_object[t][e]=!0}this.fill="url('#_".concat(t,"_to_").concat(e,"')"),this.opacity=this.sankey_plot_object.default_gradient_links_opacity}}var Wi=function(t){gr(n,t);var e=yr(n);function n(t,r,i,o,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return xr(this,n),(s=e.call(this,t,r,i,o,a,u,l))._createDomElement(),s}return Er(n,[{key:"_calculateD",value:function(t,e,n,r,i,o,a){var s=(t+o+e)/2;return"M ".concat(t+o," ").concat(n," C ").concat(s," ").concat(n,", ").concat(s," ").concat(r,",\n            ").concat(e," ").concat(r," l 0 ").concat(i," C ").concat(s," ").concat(r+i,",\n            ").concat(s," ").concat(n+i,", ").concat(t+o," ").concat(n+i," Z")}}]),n}(Hi),Yi=function(t){gr(n,t);var e=yr(n);function n(t,r,i,o,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return xr(this,n),(s=e.call(this,t,r,i,o,a,u,l)).left_side_curve=s.sankey_plot_object.links_data[s.links_array_index].left_side_curve,s.right_side_curve=s.sankey_plot_object.links_data[s.links_array_index].right_side_curve,s.sublink_data&&(s.left_side_curve+=s.parent_link_height*(1-s.sublink_data.shift)-s.height,s.right_side_curve+=s.parent_link_height*(1-s.sublink_data.shift)-s.height),s._createDomElement(),s}return Er(n,[{key:"_calculateD",value:function(t,e,n,r,i,o,a){var s=this.left_side_curve,u=this.right_side_curve,l=(t+e+a)/2;return"M ".concat(t," ").concat(n+i," l -").concat(0," 0 a ").concat(s," ").concat(s," 0, 0, 0,\n         -").concat(s," ").concat(s," l 0 ").concat(0,"\n        a ").concat(s," ").concat(s," 0, 0, 0, ").concat(s," ").concat(s,"\n        C ").concat(l," ").concat(n+i+2*s+0,", ").concat(l," \n        ").concat(r+i+2*u+0,", ").concat(e+a," ").concat(r+i+2*u+0,"\n        l ").concat(0," 0 a ").concat(u,", ").concat(u,", 0, 0, 0,\n        ").concat(u," -").concat(u," l 0 -").concat(0,"\n        a ").concat(u,", ").concat(u,",\n        0, 0, 0, -").concat(u," -").concat(u," l -").concat(0," 0 l 0 -").concat(i," l ").concat(0," 0\n        a ").concat(i+u," ").concat(i+u,", 0, 0, 1,\n        ").concat(i+u,", ").concat(i+u," l 0 ").concat(0,"\n        a ").concat(i+u," ").concat(i+u,", 0, 0, 1,\n        -").concat(i+u,", ").concat(i+u," l -").concat(0," 0\n        C ").concat(l," ").concat(r+2*i+2*u+0,", ").concat(l," ").concat(n+2*i+2*s+0,",\n         ").concat(t," ").concat(n+2*i+2*s+0," l -").concat(0," 0\n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        -").concat(i+s,", -").concat(i+s," l 0 ").concat(-0,"\n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        ").concat(i+s,", -").concat(i+s," l ").concat(0," 0 Z")}}]),n}(Hi),Xi=function(t){gr(n,t);var e=yr(n);function n(t,r,i,o,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return xr(this,n),(s=e.call(this,t,r,i,o,a,u,l)).left_side_curve=s.sankey_plot_object.links_data[s.links_array_index].left_side_curve,s.sublink_data&&(s.left_side_curve+=s.parent_link_height*(1-s.sublink_data.shift)-s.height),s._createDomElement(),s}return Er(n,[{key:"_calculateD",value:function(t,e,n,r,i,o,a){var s=this.left_side_curve,u=(t+e)/2;return"M ".concat(t," ").concat(n+i," l -").concat(0," 0 a ").concat(s," ").concat(s," 0, 0, 0,\n         -").concat(s," ").concat(s," l 0 ").concat(0,"\n        a ").concat(s," ").concat(s," 0, 0, 0, ").concat(s," ").concat(s," l ").concat(0," 0\n        C ").concat(u," ").concat(n+i+2*s+0,", ").concat(u," \n        ").concat(r,", ").concat(e," ").concat(r," l 0 ").concat(i," C ").concat(u," ").concat(r+i,", ").concat(u,"\n        ").concat(n+2*i+2*s+0,", ").concat(t," ").concat(n+2*i+2*s+0," l -").concat(0," 0 \n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        -").concat(i+s,", -").concat(i+s," l 0 ").concat(-0,"\n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        ").concat(i+s,", -").concat(i+s," l ").concat(0," 0 Z")}}]),n}(Hi),$i=function(t){gr(n,t);var e=yr(n);function n(t,r,i,o,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return xr(this,n),(s=e.call(this,t,r,i,o,a,u,l)).right_side_curve=s.sankey_plot_object.links_data[s.links_array_index].right_side_curve,s.sublink_data&&(s.right_side_curve+=s.parent_link_height*(1-s.sublink_data.shift)-s.height),s._createDomElement(),s}return Er(n,[{key:"_calculateD",value:function(t,e,n,r,i,o,a){var s=this.right_side_curve,u=(t+e+o+a)/2;return"M ".concat(t+o," ").concat(n," C ").concat(u," ").concat(n,", ").concat(u," \n        ").concat(r+i+2*s+0,", ").concat(e+a," ").concat(r+i+2*s+0,"\n        l ").concat(0," 0 a ").concat(s,", ").concat(s,", 0, 0, 0,\n        ").concat(s," -").concat(s," l 0 -").concat(0," a ").concat(s,", ").concat(s,",\n        0, 0, 0, -").concat(s," -").concat(s," l -").concat(0," 0 l 0 -").concat(i," l ").concat(0," 0\n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        ").concat(i+s,", ").concat(i+s," l 0 ").concat(0,"\n        a ").concat(i+s," ").concat(i+s,", 0, 0, 1,\n        -").concat(i+s,", ").concat(i+s," l -").concat(0," 0\n        C ").concat(u," ").concat(r+2*i+2*s+0,", ").concat(u," ").concat(n+i,",\n         ").concat(t+o," ").concat(n+i," Z")}}]),n}(Hi);function Gi(t,e){for(var n in e)t.setAttribute(n,e[n])}function Zi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zi(Object(n),!0).forEach((function(e){Qi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ji(t){return Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ji(t)}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function to(){return to=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},to.apply(this,arguments)}function eo(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function no(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var ro=no(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),io=no(/Edge/i),oo=no(/firefox/i),ao=no(/safari/i)&&!no(/chrome/i)&&!no(/android/i),so=no(/iP(ad|od|hone)/i),uo=no(/chrome/i)&&no(/android/i),lo={capture:!1,passive:!1};function co(t,e,n){t.addEventListener(e,n,!ro&&lo)}function ho(t,e,n){t.removeEventListener(e,n,!ro&&lo)}function fo(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function po(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function _o(t,e,n,r){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&fo(t,e):fo(t,e))||r&&t===n)return t;if(t===n)break}while(t=po(t))}return null}var vo,go=/\s+/g;function mo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(go," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(go," ")}}function yo(t,e,n){var r=t&&t.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=n+("string"==typeof n?"":"px")}}function bo(t,e){var n="";if("string"==typeof t)n=t;else do{var r=yo(t,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function wo(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function xo(){return document.scrollingElement||document.documentElement}function ko(t,e,n,r,i){if(t.getBoundingClientRect||t===window){var o,a,s,u,l,c,h;if(t!==window&&t.parentNode&&t!==xo()?(a=(o=t.getBoundingClientRect()).top,s=o.left,u=o.bottom,l=o.right,c=o.height,h=o.width):(a=0,s=0,u=window.innerHeight,l=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!ro))do{if(i&&i.getBoundingClientRect&&("none"!==yo(i,"transform")||n&&"static"!==yo(i,"position"))){var f=i.getBoundingClientRect();a-=f.top+parseInt(yo(i,"border-top-width")),s-=f.left+parseInt(yo(i,"border-left-width")),u=a+o.height,l=s+o.width;break}}while(i=i.parentNode);if(r&&t!==window){var d=bo(i||t),p=d&&d.a,_=d&&d.d;d&&(u=(a/=_)+(c/=_),l=(s/=p)+(h/=p))}return{top:a,left:s,bottom:u,right:l,width:h,height:c}}}function Eo(t,e,n){for(var r=No(t,!0),i=ko(t)[e];r;){var o=ko(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===xo())break;r=No(r,!1)}return!1}function So(t,e,n,r){for(var i=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Oa.ghost&&(r||a[o]!==Oa.dragged)&&_o(a[o],n.draggable,t,!1)){if(i===e)return a[o];i++}o++}return null}function Ao(t,e){for(var n=t.lastElementChild;n&&(n===Oa.ghost||"none"===yo(n,"display")||e&&!fo(n,e));)n=n.previousElementSibling;return n||null}function Mo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Oa.clone||e&&!fo(t,e)||n++;return n}function Co(t){var e=0,n=0,r=xo();if(t)do{var i=bo(t),o=i.a,a=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function No(t,e){if(!t||!t.getBoundingClientRect)return xo();var n=t,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=yo(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return xo();if(r||e)return n;r=!0}}}while(n=n.parentNode);return xo()}function To(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Oo(t,e){return function(){if(!vo){var n=arguments,r=this;1===n.length?t.call(r,n[0]):t.apply(r,n),vo=setTimeout((function(){vo=void 0}),e)}}}function jo(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Po(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var Do="Sortable"+(new Date).getTime();var Lo=[],Io={initializeByDefault:!0},zo={mount:function(t){for(var e in Io)Io.hasOwnProperty(e)&&!(e in t)&&(t[e]=Io[e]);Lo.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Lo.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";Lo.forEach((function(r){e[r.pluginName]&&(e[r.pluginName][i]&&e[r.pluginName][i](Ki({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](Ki({sortable:e},n)))}))},initializePlugins:function(t,e,n,r){for(var i in Lo.forEach((function(r){var i=r.pluginName;if(t.options[i]||r.initializeByDefault){var o=new r(t,e,t.options);o.sortable=t,o.options=t.options,t[i]=o,to(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);void 0!==o&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return Lo.forEach((function(r){"function"==typeof r.eventProperties&&to(n,r.eventProperties.call(e[r.pluginName],t))})),n},modifyOption:function(t,e,n){var r;return Lo.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(r=i.optionListeners[e].call(t[i.pluginName],n))})),r}};var Bo=["evt"],Ro=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=eo(n,Bo);zo.pluginEvent.bind(Oa)(t,e,Ki({dragEl:Fo,parentEl:Uo,ghostEl:Ho,rootEl:Vo,nextEl:Wo,lastDownEl:Yo,cloneEl:Xo,cloneHidden:$o,dragStarted:sa,putSortable:ta,activeSortable:Oa.active,originalEvent:r,oldIndex:Go,oldDraggableIndex:Ko,newIndex:Zo,newDraggableIndex:Jo,hideGhostForTarget:Ma,unhideGhostForTarget:Ca,cloneNowHidden:function(){$o=!0},cloneNowShown:function(){$o=!1},dispatchSortableEvent:function(t){qo({sortable:e,name:t,originalEvent:r})}},i))};function qo(t){!function(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,u=t.oldIndex,l=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,f=t.originalEvent,d=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Do]){var _,v=e.options,g="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||ro||io?(_=document.createEvent("Event")).initEvent(r,!0,!0):_=new CustomEvent(r,{bubbles:!0,cancelable:!0}),_.to=a||n,_.from=s||n,_.item=i||n,_.clone=o,_.oldIndex=u,_.newIndex=l,_.oldDraggableIndex=c,_.newDraggableIndex=h,_.originalEvent=f,_.pullMode=d?d.lastPutMode:void 0;var m=Ki(Ki({},p),zo.getEventProperties(r,e));for(var y in m)_[y]=m[y];n&&n.dispatchEvent(_),v[g]&&v[g].call(e,_)}}(Ki({putSortable:ta,cloneEl:Xo,targetEl:Fo,rootEl:Vo,oldIndex:Go,oldDraggableIndex:Ko,newIndex:Zo,newDraggableIndex:Jo},t))}var Fo,Uo,Ho,Vo,Wo,Yo,Xo,$o,Go,Zo,Ko,Jo,Qo,ta,ea,na,ra,ia,oa,aa,sa,ua,la,ca,ha,fa=!1,da=!1,pa=[],_a=!1,va=!1,ga=[],ma=!1,ya=[],ba="undefined"!=typeof document,wa=so,xa=io||ro?"cssFloat":"float",ka=ba&&!uo&&!so&&"draggable"in document.createElement("div"),Ea=function(){if(ba){if(ro)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Sa=function(t,e){var n=yo(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=So(t,0,e),o=So(t,1,e),a=i&&yo(i),s=o&&yo(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ko(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ko(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||u>=r&&"none"===n[xa]||o&&"none"===n[xa]&&u+l>r)?"vertical":"horizontal"},Aa=function(t){function e(t,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(r,i,o,a),n)(r,i,o,a);var u=(n?r:i).options.group.name;return!0===t||"string"==typeof t&&t===u||t.join&&t.indexOf(u)>-1}}var n={},r=t.group;r&&"object"==Ji(r)||(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},Ma=function(){!Ea&&Ho&&yo(Ho,"display","none")},Ca=function(){!Ea&&Ho&&yo(Ho,"display","")};ba&&!uo&&document.addEventListener("click",(function(t){if(da)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),da=!1,!1}),!0);var Na=function(t){if(Fo){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,o=t.clientY,pa.some((function(t){var e=t[Do].options.emptyInsertThreshold;if(e&&!Ao(t)){var n=ko(t),r=i>=n.left-e&&i<=n.right+e,s=o>=n.top-e&&o<=n.bottom+e;return r&&s?a=t:void 0}})),a);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Do]._onDragOver(n)}}var i,o,a},Ta=function(t){Fo&&Fo.parentNode[Do]._isOutsideThisEl(t.target)};function Oa(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=to({},e),t[Do]=this;var n,r,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Sa(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Oa.supportPointer&&"PointerEvent"in window&&!ao,emptyInsertThreshold:5};for(var o in zo.initializePlugins(this,t,i),i)!(o in e)&&(e[o]=i[o]);for(var a in Aa(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&ka,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?co(t,"pointerdown",this._onTapStart):(co(t,"mousedown",this._onTapStart),co(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(co(t,"dragover",this),co(t,"dragenter",this)),pa.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),to(this,(r=[],{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==yo(t,"display")&&t!==Oa.ghost){r.push({target:t,rect:ko(t)});var e=Ki({},r[r.length-1].rect);if(t.thisAnimationDuration){var n=bo(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){r.push(t)},removeAnimationState:function(t){r.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n);return-1}(r,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var i=!1,o=0;r.forEach((function(t){var n=0,r=t.target,a=r.fromRect,s=ko(r),u=r.prevFromRect,l=r.prevToRect,c=t.rect,h=bo(r,!0);h&&(s.top-=h.f,s.left-=h.e),r.toRect=s,r.thisAnimationDuration&&To(u,s)&&!To(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(n=function(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}(c,u,l,e.options)),To(s,a)||(r.prevFromRect=a,r.prevToRect=s,n||(n=e.options.animation),e.animate(r,c,s,n)),n&&(i=!0,o=Math.max(o,n),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),n),r.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof t&&t()}),o):"function"==typeof t&&t(),r=[]},animate:function(t,e,n,r){if(r){yo(t,"transition",""),yo(t,"transform","");var i=bo(this.el),o=i&&i.a,a=i&&i.d,s=(e.left-n.left)/(o||1),u=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!u,yo(t,"transform","translate3d("+s+"px,"+u+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),yo(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),yo(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){yo(t,"transition",""),yo(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),r)}}}))}function ja(t,e,n,r,i,o,a,s){var u,l,c=t[Do],h=c.options.onMove;return!window.CustomEvent||ro||io?(u=document.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=e,u.from=t,u.dragged=n,u.draggedRect=r,u.related=i||e,u.relatedRect=o||ko(e),u.willInsertAfter=s,u.originalEvent=a,t.dispatchEvent(u),h&&(l=h.call(c,u,a)),l}function Pa(t){t.draggable=!1}function Da(){ma=!1}function La(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Ia(t){return setTimeout(t,0)}function za(t){return clearTimeout(t)}Oa.prototype={constructor:Oa,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ua=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Fo):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,l=r.filter;if(function(t){ya.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ya.push(r)}}(n),!Fo&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||r.disabled)&&!u.isContentEditable&&(this.nativeDraggable||!ao||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=_o(s,r.draggable,n,!1))&&s.animated||Yo===s)){if(Go=Mo(s),Ko=Mo(s,r.draggable),"function"==typeof l){if(l.call(this,t,s,this))return qo({sortable:e,rootEl:u,name:"filter",targetEl:s,toEl:n,fromEl:n}),Ro("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(l&&(l=l.split(",").some((function(r){if(r=_o(u,r.trim(),n,!1))return qo({sortable:e,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),Ro("filter",e,{evt:t}),!0}))))return void(i&&t.cancelable&&t.preventDefault());r.handle&&!_o(u,r.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!Fo&&n.parentNode===o){var u=ko(n);if(Vo=o,Uo=(Fo=n).parentNode,Wo=Fo.nextSibling,Yo=n,Qo=a.group,Oa.dragged=Fo,ea={target:Fo,clientX:(e||t).clientX,clientY:(e||t).clientY},oa=ea.clientX-u.left,aa=ea.clientY-u.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Fo.style["will-change"]="all",r=function(){Ro("delayEnded",i,{evt:t}),Oa.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!oo&&i.nativeDraggable&&(Fo.draggable=!0),i._triggerDragStart(t,e),qo({sortable:i,name:"choose",originalEvent:t}),mo(Fo,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){wo(Fo,t.trim(),Pa)})),co(s,"dragover",Na),co(s,"mousemove",Na),co(s,"touchmove",Na),co(s,"mouseup",i._onDrop),co(s,"touchend",i._onDrop),co(s,"touchcancel",i._onDrop),oo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Fo.draggable=!0),Ro("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(io||ro))r();else{if(Oa.eventCanceled)return void this._onDrop();co(s,"mouseup",i._disableDelayedDrag),co(s,"touchend",i._disableDelayedDrag),co(s,"touchcancel",i._disableDelayedDrag),co(s,"mousemove",i._delayedDragTouchMoveHandler),co(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&co(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Fo&&Pa(Fo),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ho(t,"mouseup",this._disableDelayedDrag),ho(t,"touchend",this._disableDelayedDrag),ho(t,"touchcancel",this._disableDelayedDrag),ho(t,"mousemove",this._delayedDragTouchMoveHandler),ho(t,"touchmove",this._delayedDragTouchMoveHandler),ho(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?co(document,"pointermove",this._onTouchMove):co(document,e?"touchmove":"mousemove",this._onTouchMove):(co(Fo,"dragend",this),co(Vo,"dragstart",this._onDragStart));try{document.selection?Ia((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(fa=!1,Vo&&Fo){Ro("dragStarted",this,{evt:e}),this.nativeDraggable&&co(document,"dragover",Ta);var n=this.options;!t&&mo(Fo,n.dragClass,!1),mo(Fo,n.ghostClass,!0),Oa.active=this,t&&this._appendGhost(),qo({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(na){this._lastX=na.clientX,this._lastY=na.clientY,Ma();for(var t=document.elementFromPoint(na.clientX,na.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(na.clientX,na.clientY))!==e;)e=t;if(Fo.parentNode[Do]._isOutsideThisEl(t),e)do{if(e[Do]&&e[Do]._onDragOver({clientX:na.clientX,clientY:na.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Ca()}},_onTouchMove:function(t){if(ea){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=Ho&&bo(Ho,!0),a=Ho&&o&&o.a,s=Ho&&o&&o.d,u=wa&&ha&&Co(ha),l=(i.clientX-ea.clientX+r.x)/(a||1)+(u?u[0]-ga[0]:0)/(a||1),c=(i.clientY-ea.clientY+r.y)/(s||1)+(u?u[1]-ga[1]:0)/(s||1);if(!Oa.active&&!fa){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ho){o?(o.e+=l-(ra||0),o.f+=c-(ia||0)):o={a:1,b:0,c:0,d:1,e:l,f:c};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");yo(Ho,"webkitTransform",h),yo(Ho,"mozTransform",h),yo(Ho,"msTransform",h),yo(Ho,"transform",h),ra=l,ia=c,na=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ho){var t=this.options.fallbackOnBody?document.body:Vo,e=ko(Fo,!0,wa,!0,t),n=this.options;if(wa){for(ha=t;"static"===yo(ha,"position")&&"none"===yo(ha,"transform")&&ha!==document;)ha=ha.parentNode;ha!==document.body&&ha!==document.documentElement?(ha===document&&(ha=xo()),e.top+=ha.scrollTop,e.left+=ha.scrollLeft):ha=xo(),ga=Co(ha)}mo(Ho=Fo.cloneNode(!0),n.ghostClass,!1),mo(Ho,n.fallbackClass,!0),mo(Ho,n.dragClass,!0),yo(Ho,"transition",""),yo(Ho,"transform",""),yo(Ho,"box-sizing","border-box"),yo(Ho,"margin",0),yo(Ho,"top",e.top),yo(Ho,"left",e.left),yo(Ho,"width",e.width),yo(Ho,"height",e.height),yo(Ho,"opacity","0.8"),yo(Ho,"position",wa?"absolute":"fixed"),yo(Ho,"zIndex","100000"),yo(Ho,"pointerEvents","none"),Oa.ghost=Ho,t.appendChild(Ho),yo(Ho,"transform-origin",oa/parseInt(Ho.style.width)*100+"% "+aa/parseInt(Ho.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;Ro("dragStart",this,{evt:t}),Oa.eventCanceled?this._onDrop():(Ro("setupClone",this),Oa.eventCanceled||((Xo=Po(Fo)).removeAttribute("id"),Xo.draggable=!1,Xo.style["will-change"]="",this._hideClone(),mo(Xo,this.options.chosenClass,!1),Oa.clone=Xo),n.cloneId=Ia((function(){Ro("clone",n),Oa.eventCanceled||(n.options.removeCloneOnHide||Vo.insertBefore(Xo,Fo),n._hideClone(),qo({sortable:n,name:"clone"}))})),!e&&mo(Fo,i.dragClass,!0),e?(da=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ho(document,"mouseup",n._onDrop),ho(document,"touchend",n._onDrop),ho(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,Fo)),co(document,"drop",n),yo(Fo,"transform","translateZ(0)")),fa=!0,n._dragStartId=Ia(n._dragStarted.bind(n,e,t)),co(document,"selectstart",n),sa=!0,ao&&yo(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,r,i,o=this.el,a=t.target,s=this.options,u=s.group,l=Oa.active,c=Qo===u,h=s.sort,f=ta||l,d=this,p=!1;if(!ma){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=_o(a,s.draggable,o,!0),N("dragOver"),Oa.eventCanceled)return p;if(Fo.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||d._ignoreWhileAnimating===a)return O(!1);if(da=!1,l&&!s.disabled&&(c?h||(r=Uo!==Vo):ta===this||(this.lastPutMode=Qo.checkPull(this,l,Fo,t))&&u.checkPut(this,l,Fo,t))){if(i="vertical"===this._getDirection(t,a),e=ko(Fo),N("dragOverValid"),Oa.eventCanceled)return p;if(r)return Uo=Vo,T(),this._hideClone(),N("revert"),Oa.eventCanceled||(Wo?Vo.insertBefore(Fo,Wo):Vo.appendChild(Fo)),O(!0);var _=Ao(o,s.draggable);if(!_||function(t,e,n){var r=ko(Ao(n.el,n.options.draggable));return e?t.clientX>r.right+10||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+10}(t,i,this)&&!_.animated){if(_===Fo)return O(!1);if(_&&o===t.target&&(a=_),a&&(n=ko(a)),!1!==ja(Vo,o,Fo,e,a,n,t,!!a))return T(),_&&_.nextSibling?o.insertBefore(Fo,_.nextSibling):o.appendChild(Fo),Uo=o,j(),O(!0)}else if(_&&function(t,e,n){var r=ko(So(n.el,0,n.options,!0));return e?t.clientX<r.left-10||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-10||t.clientY<r.bottom&&t.clientX<r.left}(t,i,this)){var v=So(o,0,s,!0);if(v===Fo)return O(!1);if(n=ko(a=v),!1!==ja(Vo,o,Fo,e,a,n,t,!1))return T(),o.insertBefore(Fo,v),Uo=o,j(),O(!0)}else if(a.parentNode===o){n=ko(a);var g,m,y,b=Fo.parentNode!==o,w=!function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,u=n?e.width:e.height;return r===a||i===s||r+o/2===a+u/2}(Fo.animated&&Fo.toRect||e,a.animated&&a.toRect||n,i),x=i?"top":"left",k=Eo(a,"top","top")||Eo(Fo,"top","top"),E=k?k.scrollTop:void 0;if(ua!==a&&(m=n[x],_a=!1,va=!w&&s.invertSwap||b),g=function(t,e,n,r,i,o,a,s){var u=r?t.clientY:t.clientX,l=r?n.height:n.width,c=r?n.top:n.left,h=r?n.bottom:n.right,f=!1;if(!a)if(s&&ca<l*i){if(!_a&&(1===la?u>c+l*o/2:u<h-l*o/2)&&(_a=!0),_a)f=!0;else if(1===la?u<c+ca:u>h-ca)return-la}else if(u>c+l*(1-i)/2&&u<h-l*(1-i)/2)return function(t){return Mo(Fo)<Mo(t)?1:-1}(e);return(f=f||a)&&(u<c+l*o/2||u>h-l*o/2)?u>c+l/2?1:-1:0}(t,a,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,va,ua===a),0!==g){var S=Mo(Fo);do{S-=g,y=Uo.children[S]}while(y&&("none"===yo(y,"display")||y===Ho))}if(0===g||y===a)return O(!1);ua=a,la=g;var A=a.nextElementSibling,M=!1,C=ja(Vo,o,Fo,e,a,n,t,M=1===g);if(!1!==C)return 1!==C&&-1!==C||(M=1===C),ma=!0,setTimeout(Da,30),T(),M&&!A?o.appendChild(Fo):a.parentNode.insertBefore(Fo,M?A:a),k&&jo(k,0,E-k.scrollTop),Uo=Fo.parentNode,void 0===m||va||(ca=Math.abs(m-ko(a)[x])),j(),O(!0)}if(o.contains(Fo))return O(!1)}return!1}function N(s,u){Ro(s,d,Ki({evt:t,isOwner:c,axis:i?"vertical":"horizontal",revert:r,dragRect:e,targetRect:n,canSort:h,fromSortable:f,target:a,completed:O,onMove:function(n,r){return ja(Vo,o,Fo,e,n,ko(n),t,r)},changed:j},u))}function T(){N("dragOverAnimationCapture"),d.captureAnimationState(),d!==f&&f.captureAnimationState()}function O(e){return N("dragOverCompleted",{insertion:e}),e&&(c?l._hideClone():l._showClone(d),d!==f&&(mo(Fo,ta?ta.options.ghostClass:l.options.ghostClass,!1),mo(Fo,s.ghostClass,!0)),ta!==d&&d!==Oa.active?ta=d:d===Oa.active&&ta&&(ta=null),f===d&&(d._ignoreWhileAnimating=a),d.animateAll((function(){N("dragOverAnimationComplete"),d._ignoreWhileAnimating=null})),d!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===Fo&&!Fo.animated||a===o&&!a.animated)&&(ua=null),s.dragoverBubble||t.rootEl||a===document||(Fo.parentNode[Do]._isOutsideThisEl(t.target),!e&&Na(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function j(){Zo=Mo(Fo),Jo=Mo(Fo,s.draggable),qo({sortable:d,name:"change",toEl:o,newIndex:Zo,newDraggableIndex:Jo,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ho(document,"mousemove",this._onTouchMove),ho(document,"touchmove",this._onTouchMove),ho(document,"pointermove",this._onTouchMove),ho(document,"dragover",Na),ho(document,"mousemove",Na),ho(document,"touchmove",Na)},_offUpEvents:function(){var t=this.el.ownerDocument;ho(t,"mouseup",this._onDrop),ho(t,"touchend",this._onDrop),ho(t,"pointerup",this._onDrop),ho(t,"touchcancel",this._onDrop),ho(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Zo=Mo(Fo),Jo=Mo(Fo,n.draggable),Ro("drop",this,{evt:t}),Uo=Fo&&Fo.parentNode,Zo=Mo(Fo),Jo=Mo(Fo,n.draggable),Oa.eventCanceled||(fa=!1,va=!1,_a=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),za(this.cloneId),za(this._dragStartId),this.nativeDraggable&&(ho(document,"drop",this),ho(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ao&&yo(document.body,"user-select",""),yo(Fo,"transform",""),t&&(sa&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ho&&Ho.parentNode&&Ho.parentNode.removeChild(Ho),(Vo===Uo||ta&&"clone"!==ta.lastPutMode)&&Xo&&Xo.parentNode&&Xo.parentNode.removeChild(Xo),Fo&&(this.nativeDraggable&&ho(Fo,"dragend",this),Pa(Fo),Fo.style["will-change"]="",sa&&!fa&&mo(Fo,ta?ta.options.ghostClass:this.options.ghostClass,!1),mo(Fo,this.options.chosenClass,!1),qo({sortable:this,name:"unchoose",toEl:Uo,newIndex:null,newDraggableIndex:null,originalEvent:t}),Vo!==Uo?(Zo>=0&&(qo({rootEl:Uo,name:"add",toEl:Uo,fromEl:Vo,originalEvent:t}),qo({sortable:this,name:"remove",toEl:Uo,originalEvent:t}),qo({rootEl:Uo,name:"sort",toEl:Uo,fromEl:Vo,originalEvent:t}),qo({sortable:this,name:"sort",toEl:Uo,originalEvent:t})),ta&&ta.save()):Zo!==Go&&Zo>=0&&(qo({sortable:this,name:"update",toEl:Uo,originalEvent:t}),qo({sortable:this,name:"sort",toEl:Uo,originalEvent:t})),Oa.active&&(null!=Zo&&-1!==Zo||(Zo=Go,Jo=Ko),qo({sortable:this,name:"end",toEl:Uo,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Ro("nulling",this),Vo=Fo=Uo=Ho=Wo=Xo=Yo=$o=ea=na=sa=Zo=Jo=Go=Ko=ua=la=ta=Qo=Oa.dragged=Oa.ghost=Oa.clone=Oa.active=null,ya.forEach((function(t){t.checked=!0})),ya.length=ra=ia=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Fo&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)_o(t=n[r],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||La(t));return e},sort:function(t,e){var n={},r=this.el;this.toArray().forEach((function(t,e){var i=r.children[e];_o(i,this.options.draggable,r,!1)&&(n[t]=i)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(r.removeChild(n[t]),r.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return _o(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var r=zo.modifyOption(this,t,e);n[t]=void 0!==r?r:e,"group"===t&&Aa(n)},destroy:function(){Ro("destroy",this);var t=this.el;t[Do]=null,ho(t,"mousedown",this._onTapStart),ho(t,"touchstart",this._onTapStart),ho(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ho(t,"dragover",this),ho(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),pa.splice(pa.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!$o){if(Ro("hideClone",this),Oa.eventCanceled)return;yo(Xo,"display","none"),this.options.removeCloneOnHide&&Xo.parentNode&&Xo.parentNode.removeChild(Xo),$o=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if($o){if(Ro("showClone",this),Oa.eventCanceled)return;Fo.parentNode!=Vo||this.options.group.revertClone?Wo?Vo.insertBefore(Xo,Wo):Vo.appendChild(Xo):Vo.insertBefore(Xo,Fo),this.options.group.revertClone&&this.animate(Fo,Xo),yo(Xo,"display",""),$o=!1}}else this._hideClone()}},ba&&co(document,"touchmove",(function(t){(Oa.active||fa)&&t.cancelable&&t.preventDefault()})),Oa.utils={on:co,off:ho,css:yo,find:wo,is:function(t,e){return!!_o(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:Oo,closest:_o,toggleClass:mo,clone:Po,index:Mo,nextTick:Ia,cancelNextTick:za,detectDirection:Sa,getChild:So},Oa.get=function(t){return t[Do]},Oa.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Oa.utils=Ki(Ki({},Oa.utils),t.utils)),zo.mount(t)}))},Oa.create=function(t,e){return new Oa(t,e)},Oa.version="1.15.0";var Ba,Ra,qa,Fa,Ua,Ha,Va=[],Wa=!1;function Ya(){Va.forEach((function(t){clearInterval(t.pid)})),Va=[]}function Xa(){clearInterval(Ha)}var $a=Oo((function(t,e,n,r){if(e.scroll){var i,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,u=e.scrollSpeed,l=xo(),c=!1;Ra!==n&&(Ra=n,Ya(),Ba=e.scroll,i=e.scrollFn,!0===Ba&&(Ba=No(n,!0)));var h=0,f=Ba;do{var d=f,p=ko(d),_=p.top,v=p.bottom,g=p.left,m=p.right,y=p.width,b=p.height,w=void 0,x=void 0,k=d.scrollWidth,E=d.scrollHeight,S=yo(d),A=d.scrollLeft,M=d.scrollTop;d===l?(w=y<k&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),x=b<E&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=y<k&&("auto"===S.overflowX||"scroll"===S.overflowX),x=b<E&&("auto"===S.overflowY||"scroll"===S.overflowY));var C=w&&(Math.abs(m-o)<=s&&A+y<k)-(Math.abs(g-o)<=s&&!!A),N=x&&(Math.abs(v-a)<=s&&M+b<E)-(Math.abs(_-a)<=s&&!!M);if(!Va[h])for(var T=0;T<=h;T++)Va[T]||(Va[T]={});Va[h].vx==C&&Va[h].vy==N&&Va[h].el===d||(Va[h].el=d,Va[h].vx=C,Va[h].vy=N,clearInterval(Va[h].pid),0==C&&0==N||(c=!0,Va[h].pid=setInterval(function(){r&&0===this.layer&&Oa.active._onTouchMove(Ua);var e=Va[this.layer].vy?Va[this.layer].vy*u:0,n=Va[this.layer].vx?Va[this.layer].vx*u:0;"function"==typeof i&&"continue"!==i.call(Oa.dragged.parentNode[Do],n,e,t,Ua,Va[this.layer].el)||jo(Va[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==l&&(f=No(f,!1)));Wa=c}}),30),Ga=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var u=n||i;a();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(l.clientX,l.clientY);s(),u&&!u.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Za(){}function Ka(){}function Ja(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(n),!0).forEach((function(e){rs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function es(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ns(t,e,n){return e&&es(t.prototype,e),n&&es(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Za.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=So(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Ga},to(Za,{pluginName:"revertOnSpill"}),Ka.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Ga},to(Ka,{pluginName:"removeOnSpill"}),Oa.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?co(document,"dragover",this._handleAutoScroll):this.options.supportPointer?co(document,"pointermove",this._handleFallbackAutoScroll):e.touches?co(document,"touchmove",this._handleFallbackAutoScroll):co(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?ho(document,"dragover",this._handleAutoScroll):(ho(document,"pointermove",this._handleFallbackAutoScroll),ho(document,"touchmove",this._handleFallbackAutoScroll),ho(document,"mousemove",this._handleFallbackAutoScroll)),Xa(),Ya(),clearTimeout(vo),vo=void 0},nulling:function(){Ua=Ra=Ba=Wa=Ha=qa=Fa=null,Va.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,r=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(r,i);if(Ua=t,e||this.options.forceAutoScrollFallback||io||ro||ao){$a(t,this.options,o,e);var a=No(o,!0);!Wa||Ha&&r===qa&&i===Fa||(Ha&&Xa(),Ha=setInterval((function(){var o=No(document.elementFromPoint(r,i),!0);o!==a&&(a=o,Ya()),$a(t,n.options,o,e)}),10),qa=r,Fa=i)}else{if(!this.options.bubbleScroll||No(o,!0)===xo())return void Ya();$a(t,this.options,No(o,!1),!1)}}},to(t,{pluginName:"scroll",initializeByDefault:!0})}),Oa.mount(Ka,Za);var is=function(){function t(e){var n=this,r=e.groups,i=e.acids_coloring,o=e.element;ts(this,t),rs(this,"main_dom_element",void 0),rs(this,"groups",[]),this.main_dom_element=o;var a=Qa({},i);delete a["-"],r.forEach((function(t){return n.createGroup(Qa(Qa({},t),{},{acids_coloring:a}))})),document.getElementById("add_group").addEventListener("click",(function(){n.createGroup({acids:[],name:"New group",color:"#000000",acids_coloring:{}})}))}return ns(t,[{key:"refreshColoring",value:function(t){var e=this,n=Qa({},t);delete n["-"];var r=this.groups.map((function(t){return t.getGroupData()}));this.groups.forEach((function(t){return t.destroy()})),this.groups=[];var i=new Set(Object.keys(n));r.forEach((function(t){t.acids.forEach((function(t){i.delete(t)}))})),r.forEach((function(t){0!==t.acids.length&&e.createGroup(Qa(Qa({},t),{},{acids_coloring:n}))})),0!==i.size&&this.createGroup({acids:Array.from(i),name:"New group",color:"#000000",acids_coloring:n})}},{key:"createGroup",value:function(t){var e=t.acids,n=t.name,r=t.color,i=t.acids_coloring,o=new os({acids:e,name:n,color:r,acids_coloring:i,parent_element:this.main_dom_element});this.groups.push(o)}},{key:"getGroupsData",value:function(){return this.groups.map((function(t){return t.getGroupData()}))}}]),t}(),os=function(){function t(e){var n=e.acids,r=e.name,i=e.color,o=e.acids_coloring,a=e.parent_element;ts(this,t),rs(this,"main_element",document.createElement("div")),rs(this,"sortable_element",document.createElement("div")),this.main_element.classList.add("acids_group_wrapper"),a.appendChild(this.main_element),this.sortable_element.classList.add("amino_acids_group"),Oa.create(this.sortable_element,{group:"acids",sort:!0});var s=document.createElement("div");s.classList.add("acids_inputs_wrapper");var u=document.createElement("label");u.textContent="Name";var l=document.createElement("label");l.textContent="Color";var c=document.createElement("input");c.type="text",c.value=r,c.classList.add("acids_group_name_input");var h=document.createElement("input");h.type="color",h.value=i,h.classList.add("acids_color_input"),this.main_element.append(this.sortable_element,s),s.append(u,c,l,h),this.createAcids(n,o)}return ns(t,[{key:"createAcids",value:function(t,e){var n=this;t.forEach((function(t){return new as({parent_element:n.sortable_element,name:t,color:t in e?e[t]:document.getElementById("other_color").value})}))}},{key:"getGroupData",value:function(){return{acids:Array.from(this.sortable_element.children).map((function(t){return t.textContent})),name:this.main_element.getElementsByClassName("acids_group_name_input")[0].value,color:this.main_element.getElementsByClassName("acids_color_input")[0].value}}},{key:"destroy",value:function(){this.sortable_element.remove(),this.sortable_element=void 0,this.main_element.remove(),this.main_element=void 0}}]),t}(),as=ns((function t(e){var n=e.parent_element,r=e.name,i=e.color;ts(this,t),rs(this,"element",document.createElement("div")),this.element.textContent=r,this.element.classList.add("draggable_amino_acid"),this.element.setAttribute("id","test_"+r),this.element.style.backgroundColor=i,n.appendChild(this.element)}));function ss(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=us(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function us(t,e){if(t){if("string"==typeof t)return ls(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ls(t,e):void 0}}function ls(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fs=function(){function t(e){var n=e.dom_element,r=e.n_sequences,i=e.column_height,o=e.sequences_names;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),hs(this,"main_dom_element",void 0),hs(this,"sequences_names",void 0),hs(this,"first_column",void 0),hs(this,"last_column",void 0),this.main_dom_element=n,this.main_dom_element.style.gridTemplateRows="repeat(".concat(r,", ").concat(i,")"),this.sequences_names=o,this.create()}var e,n;return e=t,n=[{key:"create",value:function(){var t=this,e=document.getElementById("letter_info_div");this.main_dom_element.addEventListener("mouseover",(function(n){var r,i,o=(r=t.getAlignmentLetterInfo(parseInt(n.target.getAttribute("index"))),i=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(r,i)||us(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];a&&(e.style.display="block",e.style.bottom="".concat(window.innerHeight-n.target.getBoundingClientRect().top,"px"),e.style.left="".concat(n.target.getBoundingClientRect().left,"px"),e.innerHTML="<b>".concat(n.target.textContent?n.target.textContent:n.target.getAttribute("content"),"</b></br> ").concat(a,"</br> column ").concat(s))})),this.main_dom_element.addEventListener("mouseout",(function(t){e.style.display="none"}))}},{key:"getAlignmentLetterInfo",value:function(t){var e=Math.floor(t/(this.last_column-this.first_column));return[this.sequences_names[e],t-e*(this.last_column-this.first_column)+this.first_column]}},{key:"displayRange",value:function(t){var e=t.start,n=t.end,r=t.symbols_coloring,i=t.undefined_symbol_color,o=t.sequences,a=n+1;this.first_column=e,this.last_column=a,this.main_dom_element.replaceChildren(),this.main_dom_element.style.gridTemplateColumns="repeat(".concat(a-e,",1fr)");var s,u=0,l=ss(o);try{for(l.s();!(s=l.n()).done;){var c,h=ss(s.value.substring(e-1,a-1));try{for(h.s();!(c=h.n()).done;){var f=c.value,d=document.createElement("div");d.style.backgroundColor=r[f]?r[f]:i,a-e<45?d.textContent=f:d.setAttribute("content",f),d.setAttribute("index",u),this.main_dom_element.appendChild(d),u+=1}}catch(t){h.e(t)}finally{h.f()}}}catch(t){l.e(t)}finally{l.f()}}}],n&&cs(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ds(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ps(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ps(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ps(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vs=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"selectSequence",value:function(e){for(var n=e.sequences,r=e.nodes,i=e.links,o=e.sequence_index,a=e.merged,s=void 0!==a&&a,u=e.acids_labels_groups_map,l=void 0===u?{}:u,c=n[o=Number(o)],h=0,f={},d=1;d<c.length;d++)if("-"!==c[d]){var p=c[h],_=c[d];f["".concat(h,",").concat(d)]=s?"".concat(l[p],",").concat(l[_]):"".concat(p,",").concat(_),h=d}var v,g=ds(i);try{for(g.s();!(v=g.n()).done;){var m=v.value,y=m.from.column,b=m.to.column,w=r[y][m.from.node].label,x=r[b][m.to.node].label,k="".concat(y,",").concat(b),E=k in f,S=f[k]==="".concat(w,",").concat(x);if(E&&S){for(var A=0,M=0;M<o;M++){var C=n[M],N=C.substring(y+1,b),T=C[y],O=C[b];[w===(s?l[T]:T),x===(s?l[O]:O),t.everyOnString(N,(function(t){return"-"===t}))].every((function(t){return t}))&&A++}"sublinks"in m||(m.sublinks=[]),m.sublinks.push({value:1,shift:A/m.value,sequence_index:o})}}}catch(t){g.e(t)}finally{g.f()}}},{key:"everyOnString",value:function(t,e){var n,r=ds(t);try{for(r.s();!(n=r.n()).done;)if(!e(n.value))return!1}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"unselectSequence",value:function(t){var e,n=t.links,r=t.sequence_index,i=ds(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;if("sublinks"in o){var a=o.sublinks,s=void 0;for(var u in a)if(a[u].sequence_index===r){s=u;break}s&&(a.splice(s,1),0===a.length&&delete o.sublinks)}}}catch(t){i.e(t)}finally{i.f()}}},{key:"unselectAllSequences",value:function(t){var e,n=ds(t);try{for(n.s();!(e=n.n()).done;)delete e.value.sublinks}catch(t){n.e(t)}finally{n.f()}}}],null&&_s(e.prototype,null),n&&_s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),gs={A:"#3680f7",C:"#39db64",T:"#eb4034",G:"#ebc950",U:"#eb7a34","?":"#808080","-":"#FFFFFF"},ms={A:"#D04E3A",V:"#D66453",I:"#DC7A6B",L:"#E29084",M:"#E8A79D",F:"#EBA178",Y:"#E89162",W:"#E5814B",S:"#2475B2",T:"#5B98C5",N:"#92BAD8",Q:"#A0C1D9",C:"#EA6DDE",U:"#ED7FE2",G:"#EF92E6",P:"#F2A4EA",R:"#62CB35",H:"#B1E59A",K:"#89D868",D:"#DDE22D",E:"#EAED7C",B:"#858585",J:"#949494",O:"#A4A4A4",Z:"#B3B3B3",X:"#808080","*":"#808080","-":"#FFFFFF","?":"#808080"};function ys(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||ws(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ws(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ws(t,e){if(t){if("string"==typeof t)return xs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(t,e):void 0}}function xs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ks(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ks(Object(n),!0).forEach((function(e){As(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ss(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function As(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ms=function(){function t(e){var n=e.alignment_type,r=e.visualization_manager;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),As(this,"coloring_schemes",{nucleic:Es({},gs),protein:Es({},ms),custom_nucleic:Es({},gs),custom_protein:Es({},ms),custom_full:{}}),As(this,"colors",void 0),As(this,"visualization_manager",void 0),As(this,"coloring_select_input",document.getElementById("coloring_select")),As(this,"helper_div",document.getElementById("color_chooser_helper")),this.colors=this.coloring_schemes[n],this.visualization_manager=r;var i,o=bs(this.coloring_select_input);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.value===n&&a.setAttribute("selected","selected")}}catch(t){o.e(t)}finally{o.f()}this.generateNewColorChooser(!1),this.addEventListeners()}var e,n;return e=t,n=[{key:"generateNewColorChooser",value:function(t){this.helper_div.replaceChildren();for(var e=0,n=Object.entries(this.colors);e<n.length;e++){var r=ys(n[e],2),i=r[0],o=r[1],a=document.createElement("div");a.classList.add("color_picker_wrapper");var s=document.createElement("input");Gi(s,{type:"text",maxlength:"1"}),s.value=i;var u=void 0;t?(Gi(u=document.createElement("input"),{type:"color"}),u.value=o):((u=document.createElement("div")).style.backgroundColor=o,s.setAttribute("readonly","readonly")),u.classList.add("color_picker"),a.appendChild(s),a.appendChild(u),t&&a.appendChild(this.createRemoveSymbolButton()),this.helper_div.appendChild(a)}}},{key:"createAddSymbolButton",value:function(){var t=this,e=document.createElement("button");e.setAttribute("id","add_color"),e.classList.add("normal_buttons"),e.textContent="Add symbol",e.style.display="block",this.helper_div.appendChild(e),e.addEventListener("click",(function(){var n=document.createElement("div");n.classList.add("color_picker_wrapper");var r=document.createElement("input");Gi(r,{type:"text",maxlength:"1"});var i=document.createElement("input");Gi(i,{type:"color"}),i.classList.add("color_picker"),n.appendChild(r),n.appendChild(i),n.appendChild(t.createRemoveSymbolButton()),t.helper_div.removeChild(e),t.helper_div.appendChild(n),t.helper_div.appendChild(e)}))}},{key:"createRemoveSymbolButton",value:function(){var t=document.createElement("input");return Gi(t,{type:"button"}),t.classList.add("normal_buttons"),t.value="x",t.style.cursor="pointer",t.style.display="block",t.addEventListener("click",(function(t){t.target.parentElement.remove()})),t}},{key:"addEventListeners",value:function(){var t=this;this.coloring_select_input.addEventListener("change",(function(e){t.colors=t.coloring_schemes[e.target.value],t.refreshVisualizationManager(),["custom_nucleic","custom_protein","custom_full"].includes(e.target.value)?(t.generateNewColorChooser(!0),t.createAddSymbolButton(),document.getElementById("apply_colors").style.removeProperty("display")):(t.generateNewColorChooser(!1),document.getElementById("apply_colors").style.display="none")})),document.getElementById("apply_colors").addEventListener("click",(function(){var e,n={},r=bs(Array.from(t.helper_div.children).slice(0,-1));try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.children[0].value;o&&(n[o]=i.children[1].value)}}catch(t){r.e(t)}finally{r.f()}t.colors=n,t.coloring_schemes[document.getElementById("coloring_select").value]=t.colors,t.refreshVisualizationManager()})),document.getElementById("other_color").addEventListener("change",(function(){t.refreshVisualizationManager()}))}},{key:"refreshVisualizationManager",value:function(){document.getElementById("merge_nodes_vertically").checked||this.visualization_manager.plot.setLabelColorsObject(this.colors);var t=ys(this.visualization_manager.rangeMediator.getRange(),2),e=t[0],n=t[1];this.visualization_manager.updateAlignmentMatrix(e,n),this.visualization_manager.refreshDraggable(this.colors)}},{key:"getCurrentColoring",value:function(){return this.colors}}],n&&Ss(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ns(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ts=function(){function t(e){var n=e.slider,r=e.inputFrom,i=e.inputTo,o=e.columnFrom,a=e.columnTo,s=e.length;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ns(this,"slider",void 0),Ns(this,"inputFrom",void 0),Ns(this,"inputTo",void 0),Ns(this,"columnFrom",void 0),Ns(this,"columnTo",void 0),Ns(this,"length",void 0),this.slider=n,this.inputFrom=r,this.inputTo=i,this.columnFrom=o,this.columnTo=a,this.length=s}var e,n;return e=t,(n=[{key:"updateRange",value:function(t){var e=t.columnFrom,n=t.columnTo,r=t.source,i=null!=e?e:this.columnFrom,o=null!=n?n:this.columnTo;if(i===this.columnFrom&&o===this.columnTo)return!1;if(i<1||o>this.length)return!1;switch(r){case"slider":this._updateInputs({newFrom:i,newTo:o});break;case"key_or_arrow":this._updateInputs({newFrom:i,newTo:o}),this._updateSlider({newFrom:i,newTo:o});break;case"input":this._updateSlider({newFrom:i,newTo:o})}return this.columnFrom=i,this.columnTo=o,!0}},{key:"getRange",value:function(){return[this.columnFrom,this.columnTo]}},{key:"_updateInputs",value:function(t){var e=t.newFrom,n=t.newTo;this.inputFrom.value=e,this.inputTo.value=n}},{key:"_updateSlider",value:function(t){var e=t.newFrom,n=t.newTo;this.slider.set([e,n])}}])&&Cs(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Os=[{acids:["A","V","I","L","M","F","Y","W"],name:"Hydrophobic",color:"#E4472F"},{acids:["S","T","N","Q"],name:"Polar Uncharged",color:"#3E93D0"},{acids:["C","U","G","P"],name:"Special Cases",color:"#E873DC"},{acids:["R","H","K","D","E"],name:"Electrically Charged",color:"#DDE22D"},{acids:["B","J","O","Z","X","*","?"],name:"Other",color:"#B3B3B3"}];function js(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?js(Object(n),!0).forEach((function(e){Rs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ds(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Is(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ls(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||Is(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(t,e){if(t){if("string"==typeof t)return zs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zs(t,e):void 0}}function zs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qs=function(){function t(e){var n=this,r=e.nodes,i=e.links,o=e.sequences,a=e.sequences_names,s=e.alignment_type,u=e.tree;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rs(this,"alignment_matrix_visualization",void 0),Rs(this,"tree",void 0),Rs(this,"selection_id",0),Rs(this,"color_scheme",er(nr)),Rs(this,"sequences",void 0),Rs(this,"sequences_names",void 0),Rs(this,"sequences_order",void 0),Rs(this,"nodes",void 0),Rs(this,"links",void 0),Rs(this,"plot_width",void 0),Rs(this,"plot_height",void 0),Rs(this,"plot",void 0),Rs(this,"slider",void 0),Rs(this,"color_chooser",void 0),Rs(this,"undefined_symbol_color",void 0),Rs(this,"highlight_color",getComputedStyle(document.body).getPropertyValue("--bright-main-color")),Rs(this,"drag_and_drop",void 0),Rs(this,"selected_sequences_buttons",{}),Rs(this,"merged",!1),Rs(this,"merge_colors",{}),Rs(this,"rangeMediator",void 0);var l=Math.min(15,o[0].length+1);this.setInitialPlotDimensions(),this.sequences=o,this.sequences_names=a,this.nodes=r,this.links=i,this.sequences_order={},a.forEach((function(t,e){n.sequences_order[t]=e}));var c=document.getElementById("from_column"),h=document.getElementById("to_column"),f=document.getElementById("alignment_bar");c.value=1,h.value=l,b().create(f,{start:[1,l],connect:!0,range:{min:1,max:o[0].length},margin:1,step:1,keyboardSupport:!1,behaviour:"drag"}),this.slider=f.noUiSlider,this.rangeMediator=new Ts({slider:this.slider,inputFrom:c,inputTo:h,columnFrom:1,columnTo:l,length:this.sequences[0].length}),this.undefined_symbol_color="#808080",this.color_chooser=new Ms({alignment_type:s,visualization_manager:this}),this.createPlot(this.nodes,this.links,this.color_chooser.getCurrentColoring()),this.functionalizeNavigation({inputFrom:c,inputTo:h}),this.addClearButtonEvent(),this.functionalizeSettings(s),this.createDraggable(),this.tree=u||void 0,this.tree&&this.createTree(),this.createClassicalAlignment()}var e,n;return e=t,n=[{key:"setInitialPlotDimensions",value:function(){var t=document.getElementById("sankey_diagram_container"),e=Math.floor(t.getBoundingClientRect().width)-4;document.getElementById("main_grid").style.minWidth="".concat(e/65*100,"px"),document.body.style.setProperty("--sankey-plot-width","".concat(e,"px")),t.style.setProperty("width","var(--sankey-plot-width)"),this.plot_width=e,this.plot_height=398}},{key:"createPlot",value:function(t,e,n){var r=this,i=getComputedStyle(document.body).getPropertyValue("--second-color"),o=Ls(this.rangeMediator.getRange(),2),a=o[0],s=o[1];this.plot=new gi(document.getElementById("sankey_diagram_container"),t,e,this.plot_width,this.plot_height,a,s+1,{vertical_gap_between_nodes:.5,node_percent_of_column_width:.3,show_column_lines:Boolean(document.getElementById("show_column_lines").checked),show_column_names:Boolean(document.getElementById("show_column_numbers").checked),node_move_y:Boolean(document.getElementById("allow_moving_nodes").checked),linear_gradient_links:Boolean(document.getElementById("linear_gradient_links").checked),plot_background_color:"white",default_nodes_color:this.undefined_symbol_color,default_links_color:i,default_links_opacity:.25,default_gradient_links_opacity:.43,default_sublinks_color:this.highlight_color,default_sublinks_opacity:1,label_colors_object:n,start_column_count_from:1,start_node_count_from:1,show_links_out_of_range:Boolean(document.getElementById("links_out_of_range").checked),lines_style_object:{stroke:i,"stroke-width":2,"stroke-opacity":.35,"stroke-dasharray":"5,5"},column_names_style_object:{"font-size":"16px",color:i,opacity:1,"font-weight":"bold"},on_node_click_function:function(t){var e,n=t.label,i=r.merged?m.createAcidsGroupMap(r.current_groups_data):{},o=t.column-1,a=[],s=Ds(r.sequences_names);try{for(s.s();!(e=s.n()).done;){var u=e.value,l=r.sequences[r.sequences_order[u]][o];n===(r.merged?i[l]:l)&&a.push(u)}}catch(t){s.e(t)}finally{s.f()}var c=new Set(r.getSelectedSequences()),h=a.filter((function(t){return!c.has(t)}));0===h.length?(a.forEach((function(t){return r.toggleSequenceHighlight(t)})),r.unselectTreeNodes(a)):(h.forEach((function(t){return r.toggleSequenceHighlight(t)})),r.selectTreeNodes(h)),setTimeout((function(){r.plot.reloadPlot()}),0)},on_node_hover_function:function(t){var e=Math.max(t.left_side_sum,t.right_side_sum);return"<b>".concat(t.label,"</b></br>").concat(t.height," ").concat(e>1?"sequences":"sequence","</br>column ").concat(t.column)},on_link_hover_function:function(t){var e="".concat(t.value," ").concat(t.value>1?"sequences":"sequence");return t.sublink_data&&(e=r.sequences_names[t.sublink_data.sequence_index]),"<b>(".concat(t.from_column,",").concat(t.from_label,") &#8594; (").concat(t.to_column,",").concat(t.to_label,")</b></br>").concat(e)},hover_link_cursor:"initial"})}},{key:"changeRange",value:function(t){var e=t.columnFrom,n=t.columnTo,r=t.source;this.rangeMediator.updateRange({columnFrom:e,columnTo:n,source:r})&&this.plot.changeColumnRange(e,n+1)&&this.updateAlignmentMatrix(e,n)}},{key:"functionalizeNavigation",value:function(t){var e=this,n=t.inputFrom,r=t.inputTo,i=function(){var t=e.rangeMediator.getRange();e.changeRange({columnFrom:t[0]-1,columnTo:t[1]-1,source:"key_or_arrow"})},o=function(){var t=e.rangeMediator.getRange();e.changeRange({columnFrom:t[0]+1,columnTo:t[1]+1,source:"key_or_arrow"})};document.getElementById("move_left").addEventListener("click",i),document.getElementById("move_right").addEventListener("click",o),this.keydownCallback=function(t){"input"!==t.target.tagName.toLowerCase()&&("ArrowRight"===t.key&&o(),"ArrowLeft"===t.key&&i())},document.addEventListener("keydown",this.keydownCallback),this.slider.on("update",(function(){var t=e.slider.get(),i=parseInt(t[0]),o=parseInt(t[1]);n.value=i,r.value=o})),this.slider.on("change",(function(){var t=e.slider.get(),n=parseInt(t[0]),r=parseInt(t[1]);e.changeRange({columnFrom:n,columnTo:r,source:"slider"})})),n.addEventListener("change",(function(t){var r=Ls(e.rangeMediator.getRange(),2),i=r[0],o=r[1],a=Math.floor(Number(t.target.value));a<=0||a>=o?n.value=i:e.changeRange({columnFrom:Number(t.target.value),columnTo:o,source:"input"})})),r.addEventListener("change",(function(t){var n=Ls(e.rangeMediator.getRange(),2),i=n[0],o=n[1],a=Math.floor(Number(t.target.value));a<=i||a>=e.sequences[0].length?r.value=o:e.changeRange({columnFrom:i,columnTo:Number(t.target.value),source:"input"})}))}},{key:"functionalizeSettings",value:function(t){var e=this,n=document.getElementById("merging_options"),r=document.getElementById("merge_nodes_wrapper");"nucleic"===t?n.style.display="none":n.style.removeProperty("display"),"nucleic"===t?r.style.display="none":r.style.removeProperty("display"),document.getElementById("show_column_lines").addEventListener("change",(function(t){e.plot.columnLines(t.target.checked)})),document.getElementById("show_column_numbers").addEventListener("change",(function(t){e.plot.columnNames(t.target.checked)})),document.getElementById("linear_gradient_links").addEventListener("change",(function(t){e.plot.linearGradient(t.target.checked)})),document.getElementById("allow_moving_nodes").addEventListener("change",(function(t){e.plot.yMovement(Boolean(t.target.checked))})),document.getElementById("links_out_of_range").addEventListener("change",(function(t){e.plot.setShowLinksOutOfRange(t.target.checked)}));var i=document.getElementById("other_color");i.value=this.undefined_symbol_color,i.addEventListener("change",(function(){e.undefined_symbol_color=i.value,e.plot.setDefaultNodesColor(i.value);var t=Ls(e.rangeMediator.getRange(),2),n=t[0],r=t[1];e.updateAlignmentMatrix(n,r)})),document.getElementById("save_image").addEventListener("click",(function(){pr(document.getElementById("sankey_field"),"poa_diagram"),e.plot.reloadPlot()})),document.getElementById("settings_button").addEventListener("click",(function(){var t=document.getElementById("sidebar").style;"none"===t.display?t.removeProperty("display"):t.display="none"}))}},{key:"addClearButtonEvent",value:function(){var t=this;document.getElementById("clear_button").addEventListener("click",(function(){t.clearSequencesHighlight(),t.plot.reloadPlot()}))}},{key:"getSelectedSequences",value:function(){for(var t=[],e=0,n=Object.entries(this.selected_sequences_buttons);e<n.length;e++){var r=Ls(n[e],2),i=r[0];r[1].selected&&t.push(i)}return t}},{key:"mergeNodes",value:function(t){var e=this;this.merged=t,this.plot.removePlot();var n=function(t){var n,r=Ds(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.toggleSequenceHighlight(i)}}catch(t){r.e(t)}finally{r.f()}e.selectTreeNodes(t)},r=this.getSelectedSequences();if(t){this.drag_and_drop.refreshColoring(this.color_chooser.getCurrentColoring()),this.current_groups_data=this.drag_and_drop.getGroupsData();var i=this.current_groups_data.reduce((function(t,e){return Ps(Ps({},t),{},Rs({},e.name,e.color))}),{});this.grouped_nodes=void 0,this.grouped_links=void 0,this.grouped_nodes=m.createGroupedNodesData(this.sequences,this.current_groups_data),this.grouped_links=m.createGroupedLinksData(this.sequences,this.grouped_nodes,this.current_groups_data),this.clearSequencesHighlight(),n(r),this.createPlot(this.grouped_nodes,this.grouped_links,i)}else this.clearSequencesHighlight(),n(r),this.createPlot(this.nodes,this.links,this.color_chooser.getCurrentColoring()),this.grouped_nodes=void 0,this.grouped_links=void 0;this.merge_colors=this.drag_and_drop.getGroupsData().reduce((function(t,e){var n=e.acids,r=e.color;return n.forEach((function(e){return t[e]=r})),t}),{"-":"#FFFFFF"});var o=Ls(this.rangeMediator.getRange(),2),a=o[0],s=o[1];this.updateAlignmentMatrix(a,s)}},{key:"createDraggable",value:function(){var t=this,e={standard:Os};this.drag_and_drop=new is({groups:e.standard,element:document.getElementById("for_draggable"),acids_coloring:this.color_chooser.getCurrentColoring()});var n=document.getElementById("merge_nodes_vertically");n.addEventListener("change",(function(e){var n=e.target.checked;t.mergeNodes(n)})),document.getElementById("apply_merging").addEventListener("click",(function(){n.checked=!0,t.mergeNodes(!0)}))}},{key:"refreshDraggable",value:function(t){this.drag_and_drop.refreshColoring(t)}},{key:"createClassicalAlignment",value:function(){var t,e=this,n=getComputedStyle(document.body).getPropertyValue("--select-sequence-button-height"),r="calc(".concat(getComputedStyle(document.body).getPropertyValue("--select-sequence-button-width")," + 2px)"),i=document.getElementById("for_buttons"),o=0,a=Ds(this.sequences_names);try{var s=function(){var n=t.value,a=document.createElement("div");e.selected_sequences_buttons[n]={button:a,selected:!1},a.setAttribute("value",n),a.textContent=n,a.style.width=r,a.classList.add("highlight_sequence_button"),a.classList.add("animated_button"),0===o&&(a.style.borderTop="2px solid var(--dark-second-color)"),o===e.sequences_names.length-1&&(a.style.borderBottom="2px solid var(--dark-second-color)"),i.appendChild(a),a.addEventListener("click",(function(){e.toggleSequenceHighlight(n),e.plot.reloadPlot()})),o++};for(a.s();!(t=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}var u=document.getElementById("for_tree");this.tree?i.style.display="none":i.style.removeProperty("display"),this.tree?u.style.removeProperty("display"):u.style.display="none",this.alignment_matrix_visualization=new fs({dom_element:document.getElementById("for_letters"),column_height:n,n_sequences:this.sequences.length,sequences_names:this.sequences_names});var l=Ls(this.rangeMediator.getRange(),2),c=l[0],h=l[1];this.updateAlignmentMatrix(c,h)}},{key:"updateAlignmentMatrix",value:function(t,e){this.alignment_matrix_visualization.displayRange({start:t,end:e,symbols_coloring:this.merged?this.merge_colors:this.color_chooser.getCurrentColoring(),undefined_symbol_color:this.undefined_symbol_color,sequences:this.sequences})}},{key:"selectSequence",value:function(t){var e=this.sequences_order[t];vs.selectSequence({sequences:this.sequences,sequence_index:e,merged:this.merged,nodes:this.merged?this.grouped_nodes:this.nodes,links:this.merged?this.grouped_links:this.links,acids_labels_groups_map:this.merged?m.createAcidsGroupMap(this.current_groups_data):{}})}},{key:"unselectSequence",value:function(t){var e=this.sequences_order[t];vs.unselectSequence({links:this.merged?this.grouped_links:this.links,sequence_index:e})}},{key:"clearSequencesHighlight",value:function(){if(this.tree)for(var t in this.tree.display.modifySelection((function(t){return!1})),this.selected_sequences_buttons)this.selected_sequences_buttons[t].selected=!1;for(var e in this.selected_sequences_buttons)this.selected_sequences_buttons[e].button.style.removeProperty("background-color"),this.selected_sequences_buttons[e].button.style.removeProperty("color"),this.selected_sequences_buttons[e].selected=!1;vs.unselectAllSequences(this.merged?this.grouped_links:this.links)}},{key:"toggleSequenceHighlight",value:function(t){this.selected_sequences_buttons[t].selected?(this.unselectSequence(t),this.selected_sequences_buttons[t].button.style.removeProperty("background-color"),this.selected_sequences_buttons[t].button.style.removeProperty("color"),this.selected_sequences_buttons[t].selected=!1):(this.selectSequence(t),this.selected_sequences_buttons[t].button.style.backgroundColor=this.highlight_color,this.selected_sequences_buttons[t].button.style.color="white",this.selected_sequences_buttons[t].selected=!0)}},{key:"allChildrenSelected",value:function(t){var e,n=this.selection_id,r=Ds(t.children);try{for(r.s();!(e=r.n()).done;)if(!e.value[n])return!1}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"modifyTreeSelection",value:function(t){var e=this.selection_id;this.tree.display.modifySelection((function(n){return!t.includes(n.target)&&!(t.includes(n.target)||!n.target[e])})),this.tree.display.modifySelection(t)}},{key:"createTree",value:function(){var t=this,e=Number(getComputedStyle(document.body).getPropertyValue("--select-sequence-button-height").slice(0,-2)),n=document.getElementById("for_tree");n.style.removeProperty("display");var r=e*this.sequences.length;n.style.height="".concat(r,"px"),this.tree.render({container:n,width:Math.floor(n.getBoundingClientRect().width),height:r,zoom:!1,collapsible:!1,reroot:!1,hide:!1,brush:!1,"align-tips":!0,"show-scale":!1,"show-menu":!1,"node-styler":function(e,n){t.treeNodeStyler(e,n)},"edge-styler":function(e,n){t.treeEdgeStyler(e,n)},"top-bottom-spacing":"fit-to-size","left-right-spacing":"fit-to-size","draw-size-bubbles":!1,"bubble-styler":function(t){return 5}}),n.append(this.tree.display.show()),this.updateTreeSelection();var i,o=Ds(this.sequences_names);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.selected_sequences_buttons[a]={selected:!1}}}catch(t){o.e(t)}finally{o.f()}}},{key:"toggleSankeyPaths",value:function(t){for(var e in this.selected_sequences_buttons)t.has(e)&&!this.selected_sequences_buttons[e].selected?(this.selectSequence(e),this.selected_sequences_buttons[e].selected=!0):!t.has(e)&&this.selected_sequences_buttons[e].selected&&(this.unselectSequence(e),this.selected_sequences_buttons[e].selected=!1);this.plot.reloadPlot()}},{key:"treeNodeStyler",value:function(t,e){var n=this;t.on("click",(function(){var t=n.tree.display.selectAllDescendants(e,!0,!0);if(e[n.selection_id]){n.tree.display.modifySelection(t);for(var r=e;r&&r[n.selection_id];)n.tree.display.modifySelection([r]),r=r.parent}else{n.modifyTreeSelection(t),n.tree.display.modifySelection([e]);for(var i=e.parent;i&&n.allChildrenSelected(i);)n.tree.display.modifySelection([i]),i=i.parent}var o=n.getTreeSelection();n.toggleSankeyPaths(o)}));try{var r=0,i=this.selection_id;e[i]&&(r++,t.style("fill","var(--bright-main-color)","important")),0==r&&t.style("fill","var(--second-color)","important")}catch(t){}}},{key:"treeEdgeStyler",value:function(t,e){var n=this;try{var r=0,i=this.selection_id;e[i]?(r++,t.style("stroke","var(--bright-main-color)","important").on("click",(function(){var t=n.tree.display.selectAllDescendants(e.target,!0,!0);n.tree.display.modifySelection(t),n.tree.display.modifySelection([e.target]);for(var r=e.source;r&&r[i]&&!n.allChildrenSelected(r);)n.tree.display.modifySelection([r]),r=r.parent;n.tree.display.update();var o=n.getTreeSelection();n.toggleSankeyPaths(o)}))):t.on("click",(function(){var t=n.tree.display.selectAllDescendants(e.target,!0,!0);n.modifyTreeSelection(t),n.tree.display.modifySelection([e.target]);for(var r=e.source;r&&n.allChildrenSelected(r);)n.tree.display.modifySelection([r]),r=r.parent;n.tree.display.update();var i=n.getTreeSelection();n.toggleSankeyPaths(i)})),0==r&&t.style("stroke","var(--dark-second-color)","important")}catch(t){}}},{key:"getTreeSelection",value:function(){var t=this,e=new Set;return this.tree.getTips().forEach((function(n){n[t.selection_id]&&e.add(n.data.name)})),e}},{key:"updateTreeSelection",value:function(){this.tree.display.selectionLabel(this.selection_id),this.tree.display.update()}},{key:"selectTreeNodes",value:function(t){if(this.tree){var e,n=Ds(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.selected_sequences_buttons[r].selected=!0;var i=this.tree.getNodeByName(r);this.tree.display.modifySelection([i]);for(var o=i.parent;o&&this.allChildrenSelected(o);)this.tree.display.modifySelection([o]),o=o.parent}}catch(t){n.e(t)}finally{n.f()}}}},{key:"unselectTreeNodes",value:function(t){if(this.tree){var e,n=this.selection_id,r=Ds(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.selected_sequences_buttons[i].selected=!1;for(var o=this.tree.getNodeByName(i);o&&o[n];)this.tree.display.modifySelection([o]),o=o.parent}}catch(t){r.e(t)}finally{r.f()}}}},{key:"removeAll",value:function(){this.sequences=void 0,this.sequences_names=void 0,this.nodes=void 0,this.links=void 0,this.alignment_matrix_visualization=void 0,this.tree=void 0,this.selection_id=void 0,this.color_scheme=void 0,this.plot.removePlot(),this.plot=void 0,this.color_chooser=void 0,this.undefined_symbol_color=void 0,this.highlight_color=void 0,this.drag_and_drop=void 0,this.selected_sequences_buttons=void 0,this.merged=void 0,this.rangeMediator=void 0;var t=document.getElementById("settings_control");t.replaceWith(t.cloneNode(!0)),document.querySelectorAll(".item-content").forEach((function(t){t.replaceWith(t.cloneNode(!0))})),document.getElementById("sidebar").style.display="none",document.removeEventListener("keydown",this.keydownCallback),this.slider=void 0;var e=document.getElementById("range_controls_wrapper");e.replaceChildren();var n=document.createElement("div");n.id="alignment_bar",e.appendChild(n),document.getElementById("from_column").value=1,document.getElementById("to_column").value=6,document.getElementById("show_column_lines").checked=!1,document.getElementById("show_column_numbers").checked=!0,document.getElementById("linear_gradient_links").checked=!1,document.getElementById("sankey_diagram_container").replaceChildren(),document.getElementById("for_buttons").replaceChildren();var r=document.getElementById("for_tree");r.replaceChildren(),r.style.display="none",document.getElementById("for_letters").replaceChildren(),document.getElementById("color_chooser_helper").replaceChildren(),document.getElementById("allow_moving_nodes").checked=!0,document.getElementById("links_out_of_range").checked=!1,document.getElementById("for_draggable").replaceChildren()}}],n&&Bs(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hs(t,e,n){return e&&Us(t.prototype,e),n&&Us(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Vs=function(){function t(){Fs(this,t),this.active_page=void 0}return Hs(t,[{key:"changeActivePage",value:function(t){this.active_page.hide(),this.active_page=t,this.active_page.show()}}]),t}(),Ws=function(){function t(e,n,r){var i=this;Fs(this,t),this.main_container=e,this.main_container.style.display="none",this.page_button=n,this.page_manager=r,this.page_button.addEventListener("click",(function(){i.page_manager.changeActivePage(i)}))}return Hs(t,[{key:"hide",value:function(){return this.main_container.style.display="none",this.page_button.classList.remove("page_button_selected"),this}},{key:"show",value:function(){return this.main_container.style.removeProperty("display"),this.page_button.classList.add("page_button_selected"),this}},{key:"remove",value:function(){this.main_container.remove()}}]),t}(),Ys={A:3,C:4,T:1,G:5,U:2,"?":6},Xs={A:1,C:13,D:20,E:21,F:6,G:15,H:19,I:3,K:18,L:4,M:5,N:11,P:16,Q:12,R:17,S:9,T:10,V:2,W:8,Y:7,U:14,B:22,J:23,O:24,Z:25,X:26,"*":27,"?":28},$s=Array.prototype.slice;function Gs(t){return t}var Zs=1e-6;function Ks(t){return"translate("+t+",0)"}function Js(t){return"translate(0,"+t+")"}function Qs(t){return e=>+t(e)}function tu(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function eu(){return!this.__axis}function nu(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",h=1===t||3===t?Ks:Js;function f(f){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):Gs:i,_=Math.max(o,0)+s,v=e.range(),g=+v[0]+u,m=+v[v.length-1]+u,y=(e.bandwidth?tu:Qs)(e.copy(),u),b=f.selection?f.selection():f,w=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(d,e).order(),k=x.exit(),E=x.enter().append("g").attr("class","tick"),S=x.select("line"),A=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),A=A.merge(E.append("text").attr("fill","currentColor").attr(c,l*_).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==b&&(w=w.transition(f),x=x.transition(f),S=S.transition(f),A=A.transition(f),k=k.transition(f).attr("opacity",Zs).attr("transform",(function(t){return isFinite(t=y(t))?h(t+u):this.getAttribute("transform")})),E.attr("opacity",Zs).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:y(t))+u)}))),k.remove(),w.attr("d",4===t||2===t?a?"M"+l*a+","+g+"H"+u+"V"+m+"H"+l*a:"M"+u+","+g+"V"+m:a?"M"+g+","+l*a+"V"+u+"H"+m+"V"+l*a:"M"+g+","+u+"H"+m),x.attr("opacity",1).attr("transform",(function(t){return h(y(t)+u)})),S.attr(c+"2",l*o),A.attr(c,l*_).text(p),b.filter(eu).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=$s.call(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:$s.call(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:$s.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(o=a=+t,f):o},f.tickSizeInner=function(t){return arguments.length?(o=+t,f):o},f.tickSizeOuter=function(t){return arguments.length?(a=+t,f):a},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(u=+t,f):u},f}var ru={value:()=>{}};function iu(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ou(r)}function ou(t){this._=t}function au(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function su(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function uu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ru,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ou.prototype=iu.prototype={constructor:ou,on:function(t,e){var n,r=this._,i=au(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=uu(r[n],t.name,e);else if(null==e)for(n in r)r[n]=uu(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=su(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ou(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const lu=iu;function cu(){}function hu(t){return null==t?cu:function(){return this.querySelector(t)}}function fu(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function du(){return[]}function pu(t){return null==t?du:function(){return this.querySelectorAll(t)}}function _u(t){return function(){return this.matches(t)}}function vu(t){return function(e){return e.matches(t)}}var gu=Array.prototype.find;function mu(){return this.firstElementChild}var yu=Array.prototype.filter;function bu(){return this.children}function wu(t){return new Array(t.length)}function xu(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ku(t){return function(){return t}}function Eu(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new xu(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Su(t,e,n,r,i,o,a){var s,u,l,c=new Map,h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new xu(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c.get(d[s])===u&&(i[s]=u)}function Au(t){return t.__data__}function Mu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}xu.prototype={constructor:xu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Cu="http://www.w3.org/1999/xhtml";const Nu={svg:"http://www.w3.org/2000/svg",xhtml:Cu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tu(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Nu.hasOwnProperty(e)?{space:Nu[e],local:t}:t}function Ou(t){return function(){this.removeAttribute(t)}}function ju(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pu(t,e){return function(){this.setAttribute(t,e)}}function Du(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Iu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function zu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Bu(t){return function(){this.style.removeProperty(t)}}function Ru(t,e,n){return function(){this.style.setProperty(t,e,n)}}function qu(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Fu(t,e){return t.style.getPropertyValue(e)||zu(t).getComputedStyle(t,null).getPropertyValue(e)}function Uu(t){return function(){delete this[t]}}function Hu(t,e){return function(){this[t]=e}}function Vu(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Wu(t){return t.trim().split(/^|\s+/)}function Yu(t){return t.classList||new Xu(t)}function Xu(t){this._node=t,this._names=Wu(t.getAttribute("class")||"")}function $u(t,e){for(var n=Yu(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gu(t,e){for(var n=Yu(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Zu(t){return function(){$u(this,t)}}function Ku(t){return function(){Gu(this,t)}}function Ju(t,e){return function(){(e.apply(this,arguments)?$u:Gu)(this,t)}}function Qu(){this.textContent=""}function tl(t){return function(){this.textContent=t}}function el(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function nl(){this.innerHTML=""}function rl(t){return function(){this.innerHTML=t}}function il(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ol(){this.nextSibling&&this.parentNode.appendChild(this)}function al(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cu&&e.documentElement.namespaceURI===Cu?e.createElement(t):e.createElementNS(n,t)}}function ul(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ll(t){var e=Tu(t);return(e.local?ul:sl)(e)}function cl(){return null}function hl(){var t=this.parentNode;t&&t.removeChild(this)}function fl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pl(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function _l(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function vl(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function gl(t,e,n){var r=zu(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ml(t,e){return function(){return gl(this,t,e)}}function yl(t,e){return function(){return gl(this,t,e.apply(this,arguments))}}Xu.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bl=[null];function wl(t,e){this._groups=t,this._parents=e}function xl(){return new wl([[document.documentElement]],bl)}wl.prototype=xl.prototype={constructor:wl,select:function(t){"function"!=typeof t&&(t=hu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new wl(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:fu(e)}}(t):pu(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new wl(r,i)},selectChild:function(t){return this.select(null==t?mu:function(t){return function(){return gu.call(this.children,t)}}("function"==typeof t?t:vu(t)))},selectChildren:function(t){return this.selectAll(null==t?bu:function(t){return function(){return yu.call(this.children,t)}}("function"==typeof t?t:vu(t)))},filter:function(t){"function"!=typeof t&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new wl(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Au);var n=e?Su:Eu,r=this._parents,i=this._groups;"function"!=typeof t&&(t=ku(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,d=fu(t.call(c,c&&c.__data__,l,r)),p=d.length,_=s[l]=new Array(p),v=a[l]=new Array(p),g=u[l]=new Array(f);n(c,h,_,v,g,d,e);for(var m,y,b=0,w=0;b<p;++b)if(m=_[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<p;);m._next=y||null}}return(a=new wl(a,r))._enter=s,a._exit=u,a},enter:function(){return new wl(this._enter||this._groups.map(wu),this._parents)},exit:function(){return new wl(this._exit||this._groups.map(wu),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof wl))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new wl(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Mu);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new wl(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Tu(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ju:Ou:"function"==typeof e?n.local?Iu:Lu:n.local?Du:Pu)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Bu:"function"==typeof e?qu:Ru)(t,e,null==n?"":n)):Fu(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Uu:"function"==typeof e?Vu:Hu)(t,e)):this.node()[t]},classed:function(t,e){var n=Wu(t+"");if(arguments.length<2){for(var r=Yu(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Ju:e?Zu:Ku)(n,e))},text:function(t){return arguments.length?this.each(null==t?Qu:("function"==typeof t?el:tl)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?nl:("function"==typeof t?il:rl)(t)):this.node().innerHTML},raise:function(){return this.each(ol)},lower:function(){return this.each(al)},append:function(t){var e="function"==typeof t?t:ll(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ll(t),r=null==e?cl:"function"==typeof e?e:hu(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(hl)},clone:function(t){return this.select(t?dl:fl)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=pl(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?vl:_l,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?yl:ml)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const kl=xl;function El(t){return"string"==typeof t?new wl([[document.querySelector(t)]],[document.documentElement]):new wl([[t]],bl)}function Sl(t){t.preventDefault(),t.stopImmediatePropagation()}function Al(t){var e=t.document.documentElement,n=El(t).on("dragstart.drag",Sl,!0);"onselectstart"in e?n.on("selectstart.drag",Sl,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ml(t,e){var n=t.document.documentElement,r=El(t).on("dragstart.drag",null);e&&(r.on("click.drag",Sl,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Cl(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nl(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tl(){}var Ol=.7,jl=1/Ol,Pl="\\s*([+-]?\\d+)\\s*",Dl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ll="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Il=/^#([0-9a-f]{3,8})$/,zl=new RegExp("^rgb\\("+[Pl,Pl,Pl]+"\\)$"),Bl=new RegExp("^rgb\\("+[Ll,Ll,Ll]+"\\)$"),Rl=new RegExp("^rgba\\("+[Pl,Pl,Pl,Dl]+"\\)$"),ql=new RegExp("^rgba\\("+[Ll,Ll,Ll,Dl]+"\\)$"),Fl=new RegExp("^hsl\\("+[Dl,Ll,Ll]+"\\)$"),Ul=new RegExp("^hsla\\("+[Dl,Ll,Ll,Dl]+"\\)$"),Hl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Vl(){return this.rgb().formatHex()}function Wl(){return this.rgb().formatRgb()}function Yl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Il.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Xl(e):3===n?new Kl(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?$l(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?$l(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=zl.exec(t))?new Kl(e[1],e[2],e[3],1):(e=Bl.exec(t))?new Kl(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Rl.exec(t))?$l(e[1],e[2],e[3],e[4]):(e=ql.exec(t))?$l(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Fl.exec(t))?ec(e[1],e[2]/100,e[3]/100,1):(e=Ul.exec(t))?ec(e[1],e[2]/100,e[3]/100,e[4]):Hl.hasOwnProperty(t)?Xl(Hl[t]):"transparent"===t?new Kl(NaN,NaN,NaN,0):null}function Xl(t){return new Kl(t>>16&255,t>>8&255,255&t,1)}function $l(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kl(t,e,n,r)}function Gl(t){return t instanceof Tl||(t=Yl(t)),t?new Kl((t=t.rgb()).r,t.g,t.b,t.opacity):new Kl}function Zl(t,e,n,r){return 1===arguments.length?Gl(t):new Kl(t,e,n,null==r?1:r)}function Kl(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Jl(){return"#"+tc(this.r)+tc(this.g)+tc(this.b)}function Ql(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function tc(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ec(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rc(t,e,n,r)}function nc(t){if(t instanceof rc)return new rc(t.h,t.s,t.l,t.opacity);if(t instanceof Tl||(t=Yl(t)),!t)return new rc;if(t instanceof rc)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new rc(a,s,u,t.opacity)}function rc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ic(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function oc(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Cl(Tl,Yl,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Vl,formatHex:Vl,formatHsl:function(){return nc(this).formatHsl()},formatRgb:Wl,toString:Wl}),Cl(Kl,Zl,Nl(Tl,{brighter:function(t){return t=null==t?jl:Math.pow(jl,t),new Kl(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Ol:Math.pow(Ol,t),new Kl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jl,formatHex:Jl,formatRgb:Ql,toString:Ql})),Cl(rc,(function(t,e,n,r){return 1===arguments.length?nc(t):new rc(t,e,n,null==r?1:r)}),Nl(Tl,{brighter:function(t){return t=null==t?jl:Math.pow(jl,t),new rc(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Ol:Math.pow(Ol,t),new rc(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kl(ic(t>=240?t-240:t+120,i,r),ic(t,i,r),ic(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const ac=t=>()=>t;function sc(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ac(isNaN(t)?e:t)}const uc=function t(e){var n=function(t){return 1==(t=+t)?sc:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ac(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Zl(t)).r,(e=Zl(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=sc(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function lc(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Zl(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function cc(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=mc(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function hc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dc(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=mc(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}lc((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return oc((n-r/e)*e,a,i,o,s)}})),lc((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return oc((n-r/e)*e,i,o,a,s)}}));var pc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_c=new RegExp(pc.source,"g");function vc(t,e){var n,r,i,o=pc.lastIndex=_c.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=pc.exec(t))&&(r=_c.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fc(n,r)})),o=_c.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function gc(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function mc(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?ac(e):("number"===i?fc:"string"===i?(n=Yl(e))?(e=n,uc):vc:e instanceof Yl?uc:e instanceof Date?hc:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?cc:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?dc:fc:gc))(t,e)}function yc(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var bc,wc,xc=0,kc=0,Ec=0,Sc=0,Ac=0,Mc=0,Cc="object"==typeof performance&&performance.now?performance:Date,Nc="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tc(){return Ac||(Nc(Oc),Ac=Cc.now()+Mc)}function Oc(){Ac=0}function jc(){this._call=this._time=this._next=null}function Pc(t,e,n){var r=new jc;return r.restart(t,e,n),r}function Dc(){Ac=(Sc=Cc.now())+Mc,xc=kc=0;try{!function(){Tc(),++xc;for(var t,e=bc;e;)(t=Ac-e._time)>=0&&e._call.call(null,t),e=e._next;--xc}()}finally{xc=0,function(){for(var t,e,n=bc,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bc=e);wc=t,Ic(r)}(),Ac=0}}function Lc(){var t=Cc.now(),e=t-Sc;e>1e3&&(Mc-=e,Sc=t)}function Ic(t){xc||(kc&&(kc=clearTimeout(kc)),t-Ac>24?(t<1/0&&(kc=setTimeout(Dc,t-Cc.now()-Mc)),Ec&&(Ec=clearInterval(Ec))):(Ec||(Sc=Cc.now(),Ec=setInterval(Lc,1e3)),xc=1,Nc(Dc)))}function zc(t,e,n){var r=new jc;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}jc.prototype=Pc.prototype={constructor:jc,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Tc():+n)+(null==e?0:+e),this._next||wc===this||(wc?wc._next=this:bc=this,wc=this),this._call=t,this._time=n,Ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ic())}};var Bc=lu("start","end","cancel","interrupt"),Rc=[];function qc(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var l,c,h,f;if(1!==n.state)return s();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return zc(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(zc((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Pc((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Bc,tween:Rc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Fc(t,e){var n=Hc(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Uc(t,e){var n=Hc(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Hc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Vc(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var Wc,Yc=180/Math.PI,Xc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $c(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Yc,skewX:Math.atan(u)*Yc,scaleX:a,scaleY:s}}function Gc(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:fc(t,i)},{i:u-2,x:fc(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fc(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fc(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fc(t,n)},{i:s-2,x:fc(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Zc=Gc((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Xc:$c(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Kc=Gc((function(t){return null==t?Xc:(Wc||(Wc=document.createElementNS("http://www.w3.org/2000/svg","g")),Wc.setAttribute("transform",t),(t=Wc.transform.baseVal.consolidate())?$c((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Xc)}),", ",")",")");function Jc(t,e){var n,r;return function(){var i=Uc(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Qc(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Uc(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function th(t,e,n){var r=t._id;return t.each((function(){var t=Uc(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Hc(t,r).value[e]}}function eh(t,e){var n;return("number"==typeof e?fc:e instanceof Yl?uc:(n=Yl(e))?(e=n,uc):vc)(t,e)}function nh(t){return function(){this.removeAttribute(t)}}function rh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ih(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function oh(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function ah(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function sh(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function uh(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function lh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ch(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&lh(t,i)),n}return i._value=e,i}function hh(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&uh(t,i)),n}return i._value=e,i}function fh(t,e){return function(){Fc(this,t).delay=+e.apply(this,arguments)}}function dh(t,e){return e=+e,function(){Fc(this,t).delay=e}}function ph(t,e){return function(){Uc(this,t).duration=+e.apply(this,arguments)}}function _h(t,e){return e=+e,function(){Uc(this,t).duration=e}}function vh(t,e){if("function"!=typeof e)throw new Error;return function(){Uc(this,t).ease=e}}function gh(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Fc:Uc;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var mh=kl.prototype.constructor;function yh(t){return function(){this.style.removeProperty(t)}}function bh(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wh(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&bh(t,o,n)),r}return o._value=e,o}function xh(t){return function(e){this.textContent=t.call(this,e)}}function kh(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&xh(r)),e}return r._value=t,r}var Eh=0;function Sh(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ah(){return++Eh}var Mh=kl.prototype;Sh.prototype=function(t){return kl().transition(t)}.prototype={constructor:Sh,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=hu(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,h=o[a]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,qc(h[f],e,n,f,h,Hc(s,n)));return new Sh(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pu(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Hc(u,n),_=0,v=d.length;_<v;++_)(f=d[_])&&qc(f,e,n,_,d,p);o.push(d),a.push(u)}return new Sh(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Sh(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Sh(a,this._parents,this._name,this._id)},selection:function(){return new mh(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ah(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Hc(a,e);qc(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Sh(r,this._parents,t,n)},call:Mh.call,nodes:Mh.nodes,node:Mh.node,size:Mh.size,empty:Mh.empty,each:Mh.each,on:function(t,e){var n=this._id;return arguments.length<2?Hc(this.node(),n).on.on(t):this.each(gh(n,t,e))},attr:function(t,e){var n=Tu(t),r="transform"===n?Kc:eh;return this.attrTween(t,"function"==typeof e?(n.local?sh:ah)(n,r,th(this,"attr."+t,e)):null==e?(n.local?rh:nh)(n):(n.local?oh:ih)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Tu(t);return this.tween(n,(r.local?ch:hh)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Zc:eh;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Fu(this,t),a=(this.style.removeProperty(t),Fu(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,yh(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Fu(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Fu(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,th(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=Uc(this,t),l=u.on,c=null==u.value[a]?o||(o=yh(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Fu(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,wh(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(th(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,kh(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Hc(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Jc:Qc)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?fh:dh)(e,t)):Hc(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ph:_h)(e,t)):Hc(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(vh(e,t)):Hc(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Uc(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Uc(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Mh[Symbol.iterator]};var Ch={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Nh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}kl.prototype.interrupt=function(t){return this.each((function(){Vc(this,t)}))},kl.prototype.transition=function(t){var e,n;t instanceof Sh?(e=t._id,t=t._name):(e=Ah(),(n=Ch).time=Tc(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&qc(a,t,e,l,s,n||Nh(a,e));return new Sh(r,this._parents,t,e)};const Th=t=>()=>t;function Oh(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function jh(t){t.stopImmediatePropagation()}function Ph(t){t.preventDefault(),t.stopImmediatePropagation()}var Dh={name:"drag"},Lh={name:"space"},Ih={name:"handle"},zh={name:"center"};const{abs:Bh,max:Rh,min:qh}=Math;function Fh(t){return[+t[0],+t[1]]}function Uh(t){return[Fh(t[0]),Fh(t[1])]}var Hh={name:"x",handles:["w","e"].map(Kh),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Vh={name:"y",handles:["n","s"].map(Kh),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Wh={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Kh),input:function(t){return null==t?null:Uh(t)},output:function(t){return t}},Yh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$h={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Gh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Zh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Kh(t){return{type:t}}function Jh(t){return!t.ctrlKey&&!t.button}function Qh(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function tf(){return navigator.maxTouchPoints||"ontouchstart"in this}function ef(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function nf(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function rf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function of(t){return(t=rf(Math.abs(t)))?t[1]:NaN}var af,sf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uf(t){if(!(e=sf.exec(t)))throw new Error("invalid format: "+t);var e;return new lf({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function lf(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function cf(t,e){var n=rf(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}uf.prototype=lf.prototype,lf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const hf={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cf(100*t,e),r:cf,s:function(t,e){var n=rf(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(af=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+rf(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ff(t){return t}var df,pf,_f,vf=Array.prototype.map,gf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mf(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function yf(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=wf)):void 0===e&&(e=bf);for(var n,r,i,o,a,s=new Ef(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new Ef(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(kf)}function bf(t){return t.children}function wf(t){return Array.isArray(t)?t[1]:null}function xf(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function kf(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Ef(t){this.data=t,this.depth=this.height=0,this.parent=null}df=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?ff:(e=vf.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?ff:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(vf.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=uf(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,_=t.comma,v=t.precision,g=t.trim,m=t.type;"n"===m?(_=!0,m="g"):hf[m]||(void 0===v&&(v=12),g=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=hf[m],x=/[defgprs%]/.test(m);function k(t){var i,o,u,f=y,k=b;if("c"===m)k=w(t)+k,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:l:"-"===h||"("===h?"":h)+f,k=("s"===m?gf[8+af/3]:"")+k+(E&&"("===h?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?a+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}_&&!d&&(t=r(t,1/0));var S=f.length+t.length+k.length,A=S<p?new Array(p-S+1).join(e):"";switch(_&&d&&(t=r(A+t,A.length?p-k.length:1/0),A=""),n){case"<":t=f+t+k+A;break;case"=":t=f+A+t+k;break;case"^":t=A.slice(0,S=A.length>>1)+f+t+k+A.slice(S);break;default:t=A+f+t+k}return s(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:h,formatPrefix:function(t,e){var n=h(((t=uf(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(of(e)/3))),i=Math.pow(10,-r),o=gf[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),pf=df.format,_f=df.formatPrefix,Ef.prototype=yf.prototype={constructor:Ef,count:function(){return this.eachAfter(mf)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return yf(this).eachBefore(xf)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var Sf=Math.sqrt(50),Af=Math.sqrt(10),Mf=Math.sqrt(2);function Cf(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Sf?10:o>=Af?5:o>=Mf?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Sf?10:o>=Af?5:o>=Mf?2:1)}function Nf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Tf(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>Nf(t(e),n)}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}}const Of=Tf(Nf),jf=Of.right,Pf=(Of.left,Tf((function(t){return null===t?NaN:+t})).center,jf);function Df(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Lf(t){return+t}var If=[0,1];function zf(t){return t}function Bf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Rf(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Bf(i,r),o=n(a,o)):(r=Bf(r,i),o=n(o,a)),function(t){return o(r(t))}}function qf(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Bf(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Pf(t,e,1,r)-1;return o[n](i[n](e))}}function Ff(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Uf(){return function(){var t,e,n,r,i,o,a=If,s=If,u=mc,l=zf;function c(){var t,e,n,u=Math.min(a.length,s.length);return l!==zf&&(t=a[0],e=a[u-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?qf:Rf,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),fc)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Lf),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Df,c()},h.clamp=function(t){return arguments.length?(l=!!t||zf,c()):l!==zf},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}()(zf,zf)}function Hf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Vf(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Cf(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Sf?i*=10:o>=Af?i*=5:o>=Mf&&(i*=2),e<t?-i:i}(t,e,n);switch((r=uf(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(of(e)/3)))-of(Math.abs(t)))}(o,a))||(r.precision=i),_f(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,of(e)-of(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-of(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return pf(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=Cf(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Wf(){var t=Uf();return t.copy=function(){return Ff(t,Wf())},Hf.apply(t,arguments),Vf(t)}const Yf=Math.PI,Xf=2*Yf,$f=1e-6,Gf=Xf-$f;function Zf(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Kf(){return new Zf}Zf.prototype=Kf.prototype={constructor:Zf,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>$f)if(Math.abs(c*s-u*l)>$f&&i){var f=n-o,d=r-a,p=s*s+u*u,_=f*f+d*d,v=Math.sqrt(p),g=Math.sqrt(h),m=i*Math.tan((Yf-Math.acos((p+h-_)/(2*v*g)))/2),y=m/g,b=m/v;Math.abs(y-1)>$f&&(this._+="L"+(t+y*l)+","+(e+y*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>$f||Math.abs(this._y1-l)>$f)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%Xf+Xf),h>Gf?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>$f&&(this._+="A"+n+","+n+",0,"+ +(h>=Yf)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Jf=Kf;function Qf(t){return function(){return t}}function td(t){this._context=t}function ed(t){return new td(t)}function nd(t){return t[0]}function rd(t){return t[1]}function id(t,e){var n=Qf(!0),r=null,i=ed,o=null;function a(a){var s,u,l,c=(a=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(a)).length,h=!1;for(null==r&&(o=i(l=Jf())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?nd:Qf(t),e="function"==typeof e?e:void 0===e?rd:Qf(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:Qf(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Qf(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Qf(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function od(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ad(t){this._context=t}function sd(t){return new ad(t)}function ud(t,e){this._context=t,this._t=e}Array.prototype.slice,td.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},ad.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:od(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:od(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ld=new Date,cd=new Date;function hd(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return hd((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return ld.setTime(+e),cd.setTime(+r),t(ld),t(cd),Math.floor(n(ld,cd))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}const fd=864e5,dd=6048e5;function pd(t){return hd((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/dd}))}var _d=pd(0),vd=pd(1),gd=pd(2),md=pd(3),yd=pd(4),bd=pd(5),wd=pd(6),xd=(_d.range,vd.range,gd.range,md.range,yd.range,bd.range,wd.range,hd((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/fd}),(function(t){return t.getUTCDate()-1})));const kd=xd;function Ed(t){return hd((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/dd}))}xd.range;var Sd=Ed(0),Ad=Ed(1),Md=Ed(2),Cd=Ed(3),Nd=Ed(4),Td=Ed(5),Od=Ed(6),jd=(Sd.range,Ad.range,Md.range,Cd.range,Nd.range,Td.range,Od.range,hd((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/fd),(t=>t.getDate()-1)));const Pd=jd;jd.range;var Dd=hd((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hd((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const Ld=Dd;Dd.range;var Id=hd((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Id.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hd((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const zd=Id;function Bd(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rd(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function qd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}Id.range;var Fd,Ud,Hd={"-":"",_:" ",0:"0"},Vd=/^\s*\d+/,Wd=/^%/,Yd=/[\\^$*+?|[\]().{}]/g;function Xd(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function $d(t){return t.replace(Yd,"\\$&")}function Gd(t){return new RegExp("^(?:"+t.map($d).join("|")+")","i")}function Zd(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Kd(t,e,n){var r=Vd.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Jd(t,e,n){var r=Vd.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Qd(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function tp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ep(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function np(t,e,n){var r=Vd.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function rp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ip(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function op(t,e,n){var r=Vd.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ap(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function up(t,e,n){var r=Vd.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function lp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function cp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function hp(t,e,n){var r=Vd.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function fp(t,e,n){var r=Vd.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function dp(t,e,n){var r=Vd.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function pp(t,e,n){var r=Wd.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _p(t,e,n){var r=Vd.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function vp(t,e,n){var r=Vd.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function gp(t,e){return Xd(t.getDate(),e,2)}function mp(t,e){return Xd(t.getHours(),e,2)}function yp(t,e){return Xd(t.getHours()%12||12,e,2)}function bp(t,e){return Xd(1+Pd.count(Ld(t),t),e,3)}function wp(t,e){return Xd(t.getMilliseconds(),e,3)}function xp(t,e){return wp(t,e)+"000"}function kp(t,e){return Xd(t.getMonth()+1,e,2)}function Ep(t,e){return Xd(t.getMinutes(),e,2)}function Sp(t,e){return Xd(t.getSeconds(),e,2)}function Ap(t){var e=t.getDay();return 0===e?7:e}function Mp(t,e){return Xd(Sd.count(Ld(t)-1,t),e,2)}function Cp(t){var e=t.getDay();return e>=4||0===e?Nd(t):Nd.ceil(t)}function Np(t,e){return t=Cp(t),Xd(Nd.count(Ld(t),t)+(4===Ld(t).getDay()),e,2)}function Tp(t){return t.getDay()}function Op(t,e){return Xd(Ad.count(Ld(t)-1,t),e,2)}function jp(t,e){return Xd(t.getFullYear()%100,e,2)}function Pp(t,e){return Xd((t=Cp(t)).getFullYear()%100,e,2)}function Dp(t,e){return Xd(t.getFullYear()%1e4,e,4)}function Lp(t,e){var n=t.getDay();return Xd((t=n>=4||0===n?Nd(t):Nd.ceil(t)).getFullYear()%1e4,e,4)}function Ip(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xd(e/60|0,"0",2)+Xd(e%60,"0",2)}function zp(t,e){return Xd(t.getUTCDate(),e,2)}function Bp(t,e){return Xd(t.getUTCHours(),e,2)}function Rp(t,e){return Xd(t.getUTCHours()%12||12,e,2)}function qp(t,e){return Xd(1+kd.count(zd(t),t),e,3)}function Fp(t,e){return Xd(t.getUTCMilliseconds(),e,3)}function Up(t,e){return Fp(t,e)+"000"}function Hp(t,e){return Xd(t.getUTCMonth()+1,e,2)}function Vp(t,e){return Xd(t.getUTCMinutes(),e,2)}function Wp(t,e){return Xd(t.getUTCSeconds(),e,2)}function Yp(t){var e=t.getUTCDay();return 0===e?7:e}function Xp(t,e){return Xd(_d.count(zd(t)-1,t),e,2)}function $p(t){var e=t.getUTCDay();return e>=4||0===e?yd(t):yd.ceil(t)}function Gp(t,e){return t=$p(t),Xd(yd.count(zd(t),t)+(4===zd(t).getUTCDay()),e,2)}function Zp(t){return t.getUTCDay()}function Kp(t,e){return Xd(vd.count(zd(t)-1,t),e,2)}function Jp(t,e){return Xd(t.getUTCFullYear()%100,e,2)}function Qp(t,e){return Xd((t=$p(t)).getUTCFullYear()%100,e,2)}function t_(t,e){return Xd(t.getUTCFullYear()%1e4,e,4)}function e_(t,e){var n=t.getUTCDay();return Xd((t=n>=4||0===n?yd(t):yd.ceil(t)).getUTCFullYear()%1e4,e,4)}function n_(){return"+0000"}function r_(){return"%"}function i_(t){return+t}function o_(t){return Math.floor(+t/1e3)}function a_(t){return((t=Math.exp(t))+1/t)/2}Fd=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Gd(i),c=Zd(i),h=Gd(o),f=Zd(o),d=Gd(a),p=Zd(a),_=Gd(s),v=Zd(s),g=Gd(u),m=Zd(u),y={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:gp,e:gp,f:xp,g:Pp,G:Lp,H:mp,I:yp,j:bp,L:wp,m:kp,M:Ep,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:i_,s:o_,S:Sp,u:Ap,U:Mp,V:Np,w:Tp,W:Op,x:null,X:null,y:jp,Y:Dp,Z:Ip,"%":r_},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:zp,e:zp,f:Up,g:Qp,G:e_,H:Bp,I:Rp,j:qp,L:Fp,m:Hp,M:Vp,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:i_,s:o_,S:Wp,u:Yp,U:Xp,V:Gp,w:Zp,W:Kp,x:null,X:null,y:Jp,Y:t_,Z:n_,"%":r_},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:sp,e:sp,f:dp,g:rp,G:np,H:lp,I:lp,j:up,L:fp,m:ap,M:cp,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:op,Q:_p,s:vp,S:hp,u:Jd,U:Qd,V:tp,w:Kd,W:ep,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:rp,Y:np,Z:ip,"%":pp};function x(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Hd[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=qd(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Rd(qd(o.y,0,1))).getUTCDay(),r=i>4||0===i?vd.ceil(r):vd(r),r=kd.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Bd(qd(o.y,0,1))).getDay(),r=i>4||0===i?Ad.ceil(r):Ad(r),r=Pd.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Rd(qd(o.y,0,1)).getUTCDay():Bd(qd(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Rd(o)):Bd(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Hd?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Fd.format,Ud=Fd.parse,Fd.utcFormat,Fd.utcParse;const s_=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],d=c-s,p=h-u,_=d*d+p*p;if(_<1e-12)a=Math.log(f/l)/e,o=function(t){return[s+t*d,u+t*p,l*Math.exp(e*t*a)]};else{var v=Math.sqrt(_),g=(f*f-l*l+r*_)/(2*l*n*v),m=(f*f-l*l-r*_)/(2*f*n*v),y=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(m*m+1)-m);a=(b-y)/e,o=function(t){var r,i=t*a,o=a_(y),c=l/(n*v)*(o*(r=e*i+y,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[s+c*d,u+c*p,l*o/a_(e*i+y)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),u_=t=>()=>t;function l_(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function c_(t,e,n){this.k=t,this.x=e,this.y=n}c_.prototype={constructor:c_,scale:function(t){return 1===t?this:new c_(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new c_(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var h_=new c_(1,0,0);function f_(t){t.stopImmediatePropagation()}function d_(t){t.preventDefault(),t.stopImmediatePropagation()}function p_(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function __(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function v_(){return this.__zoom||h_}function g_(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function m_(){return navigator.maxTouchPoints||"ontouchstart"in this}function y_(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}c_.prototype;var b_="1.13.6",w_="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},x_=Array.prototype,k_=Object.prototype,E_="undefined"!=typeof Symbol?Symbol.prototype:null,S_=x_.push,A_=x_.slice,M_=k_.toString,C_=k_.hasOwnProperty,N_="undefined"!=typeof ArrayBuffer,T_="undefined"!=typeof DataView,O_=Array.isArray,j_=Object.keys,P_=Object.create,D_=N_&&ArrayBuffer.isView,L_=isNaN,I_=isFinite,z_=!{toString:null}.propertyIsEnumerable("toString"),B_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],R_=Math.pow(2,53)-1;function q_(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function F_(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function U_(t){return null===t}function H_(t){return void 0===t}function V_(t){return!0===t||!1===t||"[object Boolean]"===M_.call(t)}function W_(t){return!(!t||1!==t.nodeType)}function Y_(t){var e="[object "+t+"]";return function(t){return M_.call(t)===e}}const X_=Y_("String"),$_=Y_("Number"),G_=Y_("Date"),Z_=Y_("RegExp"),K_=Y_("Error"),J_=Y_("Symbol"),Q_=Y_("ArrayBuffer");var tv=Y_("Function"),ev=w_.document&&w_.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof ev&&(tv=function(t){return"function"==typeof t||!1});const nv=tv,rv=Y_("Object");var iv=T_&&rv(new DataView(new ArrayBuffer(8))),ov="undefined"!=typeof Map&&rv(new Map),av=Y_("DataView");const sv=iv?function(t){return null!=t&&nv(t.getInt8)&&Q_(t.buffer)}:av,uv=O_||Y_("Array");function lv(t,e){return null!=t&&C_.call(t,e)}var cv=Y_("Arguments");!function(){cv(arguments)||(cv=function(t){return lv(t,"callee")})}();const hv=cv;function fv(t){return!J_(t)&&I_(t)&&!isNaN(parseFloat(t))}function dv(t){return $_(t)&&L_(t)}function pv(t){return function(){return t}}function _v(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=R_}}function vv(t){return function(e){return null==e?void 0:e[t]}}const gv=vv("byteLength"),mv=_v(gv);var yv=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const bv=N_?function(t){return D_?D_(t)&&!sv(t):mv(t)&&yv.test(M_.call(t))}:pv(!1),wv=vv("length");function xv(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=B_.length,r=t.constructor,i=nv(r)&&r.prototype||k_,o="constructor";for(lv(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=B_[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function kv(t){if(!F_(t))return[];if(j_)return j_(t);var e=[];for(var n in t)lv(t,n)&&e.push(n);return z_&&xv(t,e),e}function Ev(t){if(null==t)return!0;var e=wv(t);return"number"==typeof e&&(uv(t)||X_(t)||hv(t))?0===e:0===wv(kv(t))}function Sv(t,e){var n=kv(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0}function Av(t){return t instanceof Av?t:this instanceof Av?void(this._wrapped=t):new Av(t)}function Mv(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,gv(t))}Av.VERSION=b_,Av.prototype.value=function(){return this._wrapped},Av.prototype.valueOf=Av.prototype.toJSON=Av.prototype.value,Av.prototype.toString=function(){return String(this._wrapped)};var Cv="[object DataView]";function Nv(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&Tv(t,e,n,r)}function Tv(t,e,n,r){t instanceof Av&&(t=t._wrapped),e instanceof Av&&(e=e._wrapped);var i=M_.call(t);if(i!==M_.call(e))return!1;if(iv&&"[object Object]"==i&&sv(t)){if(!sv(e))return!1;i=Cv}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return E_.valueOf.call(t)===E_.valueOf.call(e);case"[object ArrayBuffer]":case Cv:return Tv(Mv(t),Mv(e),n,r)}var o="[object Array]"===i;if(!o&&bv(t)){if(gv(t)!==gv(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(nv(a)&&a instanceof a&&nv(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!Nv(t[u],e[u],n,r))return!1}else{var l,c=kv(t);if(u=c.length,kv(e).length!==u)return!1;for(;u--;)if(!lv(e,l=c[u])||!Nv(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0}function Ov(t,e){return Nv(t,e)}function jv(t){if(!F_(t))return[];var e=[];for(var n in t)e.push(n);return z_&&xv(t,e),e}function Pv(t){var e=wv(t);return function(n){if(null==n)return!1;var r=jv(n);if(wv(r))return!1;for(var i=0;i<e;i++)if(!nv(n[t[i]]))return!1;return t!==Bv||!nv(n[Dv])}}var Dv="forEach",Lv=["clear","delete"],Iv=["get","has","set"],zv=Lv.concat(Dv,Iv),Bv=Lv.concat(Iv),Rv=["add"].concat(Lv,Dv,"has");const qv=ov?Pv(zv):Y_("Map"),Fv=ov?Pv(Bv):Y_("WeakMap"),Uv=ov?Pv(Rv):Y_("Set"),Hv=Y_("WeakSet");function Vv(t){for(var e=kv(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Wv(t){for(var e=kv(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function Yv(t){for(var e={},n=kv(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function Xv(t){var e=[];for(var n in t)nv(t[n])&&e.push(n);return e.sort()}function $v(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var l=a[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}}const Gv=$v(jv),Zv=$v(kv),Kv=$v(jv,!0);function Jv(t){if(!F_(t))return{};if(P_)return P_(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Qv(t,e){var n=Jv(t);return e&&Zv(n,e),n}function tg(t){return F_(t)?uv(t)?t.slice():Gv({},t):t}function eg(t,e){return e(t),t}function ng(t){return uv(t)?t:[t]}function rg(t){return Av.toPath(t)}function ig(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function og(t,e,n){var r=ig(t,rg(e));return H_(r)?n:r}function ag(t,e){for(var n=(e=rg(e)).length,r=0;r<n;r++){var i=e[r];if(!lv(t,i))return!1;t=t[i]}return!!n}function sg(t){return t}function ug(t){return t=Zv({},t),function(e){return Sv(e,t)}}function lg(t){return t=rg(t),function(e){return ig(e,t)}}function cg(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function hg(t,e,n){return null==t?sg:nv(t)?cg(t,e,n):F_(t)&&!uv(t)?ug(t):lg(t)}function fg(t,e){return hg(t,e,1/0)}function dg(t,e,n){return Av.iteratee!==fg?Av.iteratee(t,e):hg(t,e,n)}function pg(t,e,n){e=dg(e,n);for(var r=kv(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o}function _g(){}function vg(t){return null==t?_g:function(e){return og(t,e)}}function gg(t,e,n){var r=Array(Math.max(0,t));e=cg(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function mg(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}Av.toPath=ng,Av.iteratee=fg;const yg=Date.now||function(){return(new Date).getTime()};function bg(t){var e=function(e){return t[e]},n="(?:"+kv(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}}const wg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},xg=bg(wg),kg=bg(Yv(wg)),Eg=Av.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Sg=/(.)^/,Ag={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Mg=/\\|'|\r|\n|\u2028|\u2029/g;function Cg(t){return"\\"+Ag[t]}var Ng=/^\s*(\w|\$)+\s*$/;function Tg(t,e,n){!e&&n&&(e=n),e=Kv({},e,Av.templateSettings);var r=RegExp([(e.escape||Sg).source,(e.interpolate||Sg).source,(e.evaluate||Sg).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,a,s){return o+=t.slice(i,s).replace(Mg,Cg),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n";var a,s=e.variable;if(s){if(!Ng.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(t){throw t.source=o,t}var u=function(t){return a.call(this,t,Av)};return u.source="function("+s+"){\n"+o+"}",u}function Og(t,e,n){var r=(e=rg(e)).length;if(!r)return nv(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=nv(o)?o.call(t):o}return t}var jg=0;function Pg(t){var e=++jg+"";return t?t+e:e}function Dg(t){var e=Av(t);return e._chain=!0,e}function Lg(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Jv(t.prototype),a=t.apply(o,i);return F_(a)?a:o}var Ig=q_((function(t,e){var n=Ig.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)a.push(arguments[i++]);return Lg(t,r,this,this,a)};return r}));Ig.placeholder=Av;const zg=Ig,Bg=q_((function(t,e,n){if(!nv(t))throw new TypeError("Bind must be called on a function");var r=q_((function(i){return Lg(t,r,e,this,n.concat(i))}));return r})),Rg=_v(wv);function qg(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,a=wv(t);o<a;o++){var s=t[o];if(Rg(s)&&(uv(s)||hv(s)))if(e>1)qg(s,e-1,n,r),i=r.length;else for(var u=0,l=s.length;u<l;)r[i++]=s[u++];else n||(r[i++]=s)}return r}const Fg=q_((function(t,e){var n=(e=qg(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Bg(t[r],t)}return t}));function Ug(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return lv(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const Hg=q_((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Vg=zg(Hg,Av,1);function Wg(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:yg(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=yg();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l}function Yg(t,e,n){var r,i,o,a,s,u=function(){var l=yg()-i;e>l?r=setTimeout(u,e-l):(r=null,n||(a=t.apply(s,o)),r||(o=s=null))},l=q_((function(l){return s=this,o=l,i=yg(),r||(r=setTimeout(u,e),n&&(a=t.apply(s,o))),a}));return l.cancel=function(){clearTimeout(r),r=o=s=null},l}function Xg(t,e){return zg(e,t)}function $g(t){return function(){return!t.apply(this,arguments)}}function Gg(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Zg(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Kg(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Jg=zg(Kg,2);function Qg(t,e,n){e=dg(e,n);for(var r,i=kv(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r}function tm(t){return function(e,n,r){n=dg(n,r);for(var i=wv(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const em=tm(1),nm=tm(-1);function rm(t,e,n,r){for(var i=(n=dg(n,r,1))(e),o=0,a=wv(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o}function im(t,e,n){return function(r,i,o){var a=0,s=wv(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(A_.call(r,a,s),dv))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}const om=im(1,em,rm),am=im(-1,nm);function sm(t,e,n){var r=(Rg(t)?em:Qg)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function um(t,e){return sm(t,ug(e))}function lm(t,e,n){var r,i;if(e=cg(e,n),Rg(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=kv(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function cm(t,e,n){e=dg(e,n);for(var r=!Rg(t)&&kv(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o}function hm(t){var e=function(e,n,r,i){var o=!Rg(e)&&kv(e),a=(o||e).length,s=t>0?0:a-1;for(i||(r=e[o?o[s]:s],s+=t);s>=0&&s<a;s+=t){var u=o?o[s]:s;r=n(r,e[u],u,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,cg(n,i,4),r,o)}}const fm=hm(1),dm=hm(-1);function pm(t,e,n){var r=[];return e=dg(e,n),lm(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function _m(t,e,n){return pm(t,$g(dg(e)),n)}function vm(t,e,n){e=dg(e,n);for(var r=!Rg(t)&&kv(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0}function gm(t,e,n){e=dg(e,n);for(var r=!Rg(t)&&kv(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1}function mm(t,e,n,r){return Rg(t)||(t=Vv(t)),("number"!=typeof n||r)&&(n=0),om(t,e,n)>=0}const ym=q_((function(t,e,n){var r,i;return nv(e)?i=e:(e=rg(e),r=e.slice(0,-1),e=e[e.length-1]),cm(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=ig(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function bm(t,e){return cm(t,lg(e))}function wm(t,e){return pm(t,ug(e))}function xm(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=Rg(t)?t:Vv(t)).length;s<u;s++)null!=(r=t[s])&&r>o&&(o=r);else e=dg(e,n),lm(t,(function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)}));return o}function km(t,e,n){var r,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=Rg(t)?t:Vv(t)).length;s<u;s++)null!=(r=t[s])&&r<o&&(o=r);else e=dg(e,n),lm(t,(function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)}));return o}var Em=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Sm(t){return t?uv(t)?A_.call(t):X_(t)?t.match(Em):Rg(t)?cm(t,sg):Vv(t):[]}function Am(t,e,n){if(null==e||n)return Rg(t)||(t=Vv(t)),t[mg(t.length-1)];var r=Sm(t),i=wv(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=mg(a,o),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,e)}function Mm(t){return Am(t,1/0)}function Cm(t,e,n){var r=0;return e=dg(e,n),bm(cm(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function Nm(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=dg(r,i),lm(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}}const Tm=Nm((function(t,e,n){lv(t,n)?t[n].push(e):t[n]=[e]})),Om=Nm((function(t,e,n){t[n]=e})),jm=Nm((function(t,e,n){lv(t,n)?t[n]++:t[n]=1})),Pm=Nm((function(t,e,n){t[n?0:1].push(e)}),!0);function Dm(t){return null==t?0:Rg(t)?t.length:kv(t).length}function Lm(t,e,n){return e in n}const Im=q_((function(t,e){var n={},r=e[0];if(null==t)return n;nv(r)?(e.length>1&&(r=cg(r,e[1])),e=jv(t)):(r=Lm,e=qg(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n})),zm=q_((function(t,e){var n,r=e[0];return nv(r)?(r=$g(r),e.length>1&&(n=e[1])):(e=cm(qg(e,!1,!1),String),r=function(t,n){return!mm(e,n)}),Im(t,r,n)}));function Bm(t,e,n){return A_.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function Rm(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Bm(t,t.length-e)}function qm(t,e,n){return A_.call(t,null==e||n?1:e)}function Fm(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:qm(t,Math.max(0,t.length-e))}function Um(t){return pm(t,Boolean)}function Hm(t,e){return qg(t,e,!1)}const Vm=q_((function(t,e){return e=qg(e,!0,!0),pm(t,(function(t){return!mm(e,t)}))})),Wm=q_((function(t,e){return Vm(t,e)}));function Ym(t,e,n,r){V_(e)||(r=n,n=e,e=!1),null!=n&&(n=dg(n,r));for(var i=[],o=[],a=0,s=wv(t);a<s;a++){var u=t[a],l=n?n(u,a,t):u;e&&!n?(a&&o===l||i.push(u),o=l):n?mm(o,l)||(o.push(l),i.push(u)):mm(i,u)||i.push(u)}return i}const Xm=q_((function(t){return Ym(qg(t,!0,!0))}));function $m(t){for(var e=[],n=arguments.length,r=0,i=wv(t);r<i;r++){var o=t[r];if(!mm(e,o)){var a;for(a=1;a<n&&mm(arguments[a],o);a++);a===n&&e.push(o)}}return e}function Gm(t){for(var e=t&&xm(t,wv).length||0,n=Array(e),r=0;r<e;r++)n[r]=bm(t,r);return n}const Zm=q_(Gm);function Km(t,e){for(var n={},r=0,i=wv(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Jm(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Qm(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(A_.call(t,r,r+=e));return n}function ty(t,e){return t._chain?Av(e).chain():e}function ey(t){return lm(Xv(t),(function(e){var n=Av[e]=t[e];Av.prototype[e]=function(){var t=[this._wrapped];return S_.apply(t,arguments),ty(this,n.apply(Av,t))}})),Av}lm(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=x_[t];Av.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),ty(this,n)}})),lm(["concat","join","slice"],(function(t){var e=x_[t];Av.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),ty(this,t)}}));const ny=Av;var ry=ey(t);ry._=ry;function iy(t,e,n,r){let i=this.nodes.descendants();if(t.parent&&i.indexOf(t)>=0){let i=t.parent.children.indexOf(t),o={name:n,parent:t.parent,attribute:r?r[2]:null,original_child_order:t.original_child_order},a={name:e,parent:o,attribute:r?r[1]:null,original_child_order:2};o.children=[t,a],t.parent.children[i]=o,t.parent=o,t.attribute=r?r[0]:null,t.original_child_order=1}return this}function oy(t,e){return t.children?t.children.push(e):t.children=[e],t}function ay(t,e){return{data:{name:t,attribute:e?e[1]:null},parent:""}}function sy(t){let e=this.nodes.descendants();if("number"!=typeof t)return this.deleteANode(e.indexOf(t));if(t>0&&t<e.length){let n=e[t];if(n.parent){let r=n.parent.children.indexOf(n);r>=0&&(e.splice(t,1),n.children&&n.children.forEach((function(t){t.original_child_order=n.parent.children.length,n.parent.children.push(t),t.parent=n.parent})),n.parent.children.length>2?n.parent.children.splice(r,1):n.parent.parent?(n.parent.parent.children[n.parent.parent.children.indexOf(n.parent)]=n.parent.children[1-r],n.parent.children[1-r].parent=n.parent.parent,e.splice(e.indexOf(n.parent),1)):(e.splice(0,1),e.parent=null,delete e.data.attribute,delete e.data.annotation,delete e.data.original_child_order,e.name="root",e.data.name="root"))}}return this}function uy(){return pm(this.nodes.descendants(),(t=>!ag(t,"children")))}function ly(){return pm(this.nodes.descendants(),(t=>ag(t,"children")))}function cy(){return this.nodes}function hy(){return this.nodes}function fy(t){return pm(this.nodes.descendants(),(e=>e.data.name==t))[0]}function dy(t){lm(this.nodes.descendants(),(function(e){e.data&&e.data.name in t&&(e.annotations=t[e.data.name])}))}function py(t){return!ag(t,"children")}function _y(t,e){return this.nodes.each((function(n){t in n&&(e&&(n[e]=n[t]),delete n[t])})),this}function vy(t){t||this.nodes.each((t=>{py(t)||(t[this.selection_attribute_name]=!1,t.data.traits||(t.data.traits={}),t.data.traits[this.selection_attribute_name]=t[this.selection_attribute_name])}))}const gy=function(t,e={}){const n=/^-?\d+(\.\d+)?$/;let r=e.left_delimiter||"{",i=e.right_delimiter||"}",o=[];function a(){let t=o[o.length-1];"children"in t||(t.children=[]),o.push({name:null}),t.children.push(o[o.length-1]),o[o.length-1].original_child_order=t.children.length}function s(){let t=o.pop();t.name=c,"children"in t?t.bootstrap_values=c:t.name=c,t.attribute=h,"["==r&&f.includes("&&NHX")?f.split(":").slice(1).forEach((e=>{const[r,i]=e.split("=");t[r]=n.test(i)?+i:i})):t.annotation=f,c="",h="",f=""}function u(e){return{json:null,error:"Unexpected '"+t[e]+"' in '"+t.substring(e-20,e+1)+"[ERROR HERE]"+t.substring(e+1,e+20)+"'"}}let l=0,c="",h="",f="",d=null,p={"'":1,'"':1},_={name:"root"};o.push(_);for(var v=/\s/,g=0;g<t.length;g++)try{var m=t[g];switch(l){case 0:"("==m&&(a(),l=1);break;case 1:case 3:if(":"==m)l=3;else if(","==m||")"==m)try{s(),l=1,","==m&&a()}catch(t){return u(g)}else if("("==m){if(c.length>0)return u(g);a()}else{if(m in p){if(1==l&&0===c.length&&0===h.length&&0===f.length){l=2,d=m;continue}return u(g)}if(m==r){if(f.length)return u(g);l=4}else if(3==l)h+=m;else{if(v.test(m))continue;if(";"==m){g=t.length;break}c+=m}}break;case 2:if(m==d){if(g<t.length-1&&t[g+1]==d){g++,c+=d;continue}d=0,l=1;continue}c+=m;break;case 4:if(m==i)l=3;else{if(m==r)return u(g);f+=m}}}catch(t){return u(g)}return 1!=o.length?u(t.length-1):{json:_,error:null}};function my(t){let e=t,n=e.toUpperCase().indexOf("BEGIN DATA;"),r=e.slice(n);if(r.length<2)return"";n=r.toUpperCase().indexOf("END;");let i=r.slice(0,n);r=cm(i.split(";"),(t=>t.trim()));let o=pm(r,(t=>t.toUpperCase().startsWith("DIMENSION")));o=o[0].split(" "),o=Km(cm(qm(o),(t=>t.split("="))));let a=pm(r,(t=>t.toUpperCase().startsWith("FORMAT")));a=a[0].split(" "),a=Km(cm(qm(a),(t=>t.split("=")))),a.symbols=_m(a.symbols.split(""),(t=>'"'==t));let s=pm(r,(t=>t.toUpperCase().startsWith("MATRIX")));return s=s[0].split("\n"),s=Km(cm(qm(s),(t=>Um(t.split(" "))))),s=pg(s,((t,e)=>"?"==t?a.symbols:Array(t))),{dimensions:o,format:a,matrix:s}}function yy(t,e,n){lm(t.getTips(),(t=>{t.data.test=n.matrix[t.data.name]}))}function by(t){let e=t,n=e.toUpperCase().indexOf("BEGIN TREES;"),r=e.slice(n);if(r.length<2)return"";n=r.toUpperCase().indexOf("END;");let i=r.slice(0,n).split("\n");return i=pm(i,(t=>t.trim().toUpperCase().startsWith("TREE"))),gy(i[0])}function wy(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else 3==t.nodeType&&(e=t.nodeValue);if(t.hasChildNodes()&&1===t.childNodes.length&&3===t.childNodes[0].nodeType)e=t.childNodes[0].nodeValue;else if(t.hasChildNodes())for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes.item(i),a=o.nodeName;if(void 0===e[a])e[a]=wy(o);else{if(void 0===e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(wy(o))}}return e}const xy=function(t,e){var n;return(n=(t=wy(t)).phyloxml.phylogeny.clade).name="root",function t(e,n){e.clade&&(e.clade.forEach(t),e.children=e.clade,delete e.clade),e.annotation=1,e.attribute="0.01",e.branch_length&&(e.attribute=e.branch_length),e.taxonomy&&(e.name=e.taxonomy.scientific_name),e.annotation=""}(n),{json:n,error:null}};const ky={nexml:function(t,e){var n;return parseString(t,(function(t,e){n=e["nex:nexml"].trees[0].tree.map((function(t){var e=t.node.map((t=>t.$)),n=e.reduce((function(t,e){return e.edges=[],e.name=e.id,t[e.id]=e,t}),{}),r=e.filter((t=>t.root)),i=r>0?r[0].id:e[0].id;return n[i].name="root",t.edge.map((t=>t.$)).forEach((function(t){n[t.source].edges.push(t)})),function t(e,r){if(e.edges){var i=bm(e.edges,"target");e.children=Vv(Im(n,i)),e.children.forEach((function(t,n){t.attribute=e.edges[n].length||""})),e.children.forEach(t),e.annotation=""}}(n[i]),n[i]}))})),n},phyloxml:xy,nexus:by,nwk:gy,nhx:gy,beast:function(t,e){e.left_delimiter="[",e.right_delimiter="]";const n=gy(t,e);return function t(e){if(e.annotation){e.beast={};const t=e.annotation.split(/=|,|{|}/).filter((t=>t));for(var n=0;n<t.length;n+=2){let r=t[n].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(t[n+2])?e.beast[r]=+t[n+1]:(e.beast[r]=[+t[n+1],+t[n+2]],n++)}}e.annotation=void 0,e.children&&e.children.forEach(t)}(n.json),n}};var Ey=n(486);function Sy(t,e,n){let r,i,o,a=[t],s=[];for(;t=a.pop();)if((!n||!n(t))&&(s.push(t),r=t.children,r))for(i=0,o=r.length;i<o;++i)a.push(r[i]);for(;t=s.pop();)e(t);return t}function Ay(t,e){let n=t.data;if("attribute"in n&&n.attribute&&n.attribute.length){e>0&&(n.attribute=String(e));let t=parseFloat(n.attribute);if(!isNaN(t))return Math.max(0,t)}if("root"==n.name)return 0;console.warn("Undefined branch length at "+n.name+"!")}function My(t,e){if(!(t instanceof yf))throw new Error("node needs to be an instance of a d3.hierarchy node!");let n=this.nodes.copy();if(e=void 0!==e?e:.5,t.parent){var r=yf({name:"new_root"});r.children=[t.copy()],r.data.__mapped_bl=void 0,n.each((t=>{t.data.__mapped_bl=this.branch_length_accessor(t)})),this.setBranchLength((t=>t.data.__mapped_bl));let o,a=t,s=t.parent,u=void 0===t.data.__mapped_bl?void 0:t.data.__mapped_bl*e;var i;if(o=s.data.__mapped_bl,s.data.__mapped_bl=void 0===t.data.__mapped_bl?void 0:t.data.__mapped_bl-u,t.data.__mapped_bl=u,s.parent){for(r.children.push(s);s.parent;){i=s.children.indexOf(a),s.parent.parent?s.children.splice(i,1,s.parent):s.children.splice(i,1);let t=s.parent.data.__mapped_bl;void 0!==t&&(s.parent.data.__mapped_bl=o,o=t),a=s,s=s.parent}i=s.children.indexOf(a),s.children.splice(i,1)}else i=s.children.indexOf(a),s.children.splice(i,1),o=s.data.__mapped_bl,a=r;if(1==s.children.length)o&&(s.children[0].data.__mapped_bl+=o),a.children=a.children.concat(s.children);else{let e=new yf({name:"__reroot_top_clade",__mapped_bl:o});Zv(r.children[0],t),e.data.__mapped_bl=o,e.children=s.children.map((function(t){return t.parent=e,t})),e.parent=a,a.children.push(e)}}if(this.update(r),this.traverse_and_compute((t=>{lm(t.children,(e=>{e.parent=t}))}),"pre-order"),!H_(this.display)){let t=this.display.options;El(this.display.container).select("svg").remove();let e=this.display.selection_attribute_name;delete this.display;let n=this.render(t);n.selectionLabel(e),n.update(),El(n.container).node().appendChild(n.show()),El(this.display.container).dispatch("reroot")}return this}function Cy(t,e){if(t=t||"attribute",e=e||"y_scaled","parent"in this){let n=parseFloat(this[t]);this[e]=this.parent[e]+(isNaN(n)?.1:n)}else this[e]=0;return this[e]}function Ny(t){let e=[];for(;t;)e.push(t),t=t.parent;return e}function Ty(t){return t.y}function Oy(t){return t.x}function jy(t,e,n){return{x:n+t*Math.sin(e),y:n+t*Math.cos(e)}}function Py(t,e,n,r,i,o){t.radius=e*(t.radius+n),t.angle=2*Math.PI*t.x*i[0]/o[0];let a=jy(t.radius,t.angle,r);return t.x=a.x,t.y=a.y,t}function Dy(t,e){var n=jy(e[0].radius,e[0].angle,t),r=jy(e[0].radius,e[1].angle,t);return"M "+Ty(n)+","+Oy(n)+" A "+e[0].radius+","+e[0].radius+" 0,0, "+(e[1].angle>e[0].angle?1:0)+" "+Ty(r)+","+Oy(r)+" L "+Ty(e[1])+","+Oy(e[1])}function Ly(t,e,n){var r=jy(t.target.radius+(t.source.radius-t.target.radius)*e,t.target.angle,n);return{x:Ty(r),y:Oy(r)}}function Iy(t,e){return{x:Ty(t.target)+(Ty(t.source)-Ty(t.target))*e,y:Oy(t.target)}}const zy=id().x((function(t){return Ty(t)})).y((function(t){return Oy(t)})).curve((function(t){return new ud(t,0)}));function By(t){return t.tag||!1}function Ry(t,e){return t[e]||!1}const qy={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function Fy(t){return arguments.length?(this.options["internal-names"]=t,this):this.options["internal-names"]}function Uy(t){return arguments.length?(this.options["is-radial"]=t,this):this.options["is-radial"]}function Hy(t){return arguments.length?(this.options["align-tips"]=t,this):this.options["align-tips"]}function Vy(t){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](t):this.options["draw-size-bubbles"]?this.relative_nodeSpan(t)*this.scales[0]*.25:0}function Wy(t){return this.options["is-radial"]?[("end"==t.text_align?-1:1)*(this.radius_pad_for_bubbles-t.radius),0]:(this.options["right-to-left"],[this.right_most_leaf-t.screen_x,0])}function Yy(t){return arguments.length?(this.layout_listener_handler=t,this):this.layout_listener_handler}function Xy(t){return arguments.length?(this.selection_attribute_name=t,this.syncEdgeLabels(),this):this.selection_attribute_name}function $y(t){return arguments.length?($y="string"==typeof t&&"equal"==t?function(t){return 1}:t,this):$y}var Gy={all:t=>!0,none:t=>!1,"all-leaf-nodes":t=>py(t.target),"all-internal-nodes":t=>!py(t.target)};function Zy(t){return t?(this.selectionCallback=t,this):this.selectionCallback}function Ky(t){return this.radial()?[("end"==t.text_align?-1:1)*(this.radius_pad_for_bubbles-t.radius),0]:(this.options["right-to-left"],[this.right_most_leaf-t.screen_x,0])}function Jy(t,e,n){t=El(t);var r=py(e);r&&(t=t.attr("data-node-name",e.data.name));var i=t.selectAll("text").data([e]),o=t.selectAll("line");if(r||this.showInternalName(e)&&!ab(e))if(i=i.enter().append("text").classed(this.css_classes.node_text,!0).merge(i).on("click",(t=>{this.handle_node_click(e,t)})).attr("dy",(t=>.33*this.shown_font_size)).text((t=>this.options["show-labels"]?this._nodeLabel(t):"")).style("font-size",(t=>this.ensure_size_is_in_px(this.shown_font_size))),i=this.radial()?i.attr("transform",(t=>this.d3PhylotreeSvgRotate(t.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(t):null))).attr("text-anchor",(t=>t.text_align)):i.attr("text-anchor","start").attr("transform",(t=>"right-to-left"==this.options.layout?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(t):null))),this.alignTips()?(o=o.data([e]),n?o=o.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(o).attr("x1",(t=>("end"==t.text_align?-1:1)*this.nodeBubbleSize(e))).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",(t=>"right-to-left"==this.options.layout?t.screen_x:this.shiftTip(t)[0])).attr("transform",(t=>this.d3PhylotreeSvgRotate(t.text_angle))).attr("x2",(t=>"right-to-left"==this.options.layout?t.screen_x:this.shiftTip(t)[0])).attr("transform",(t=>this.d3PhylotreeSvgRotate(t.text_angle))):(o=o.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(o).attr("x1",(t=>("end"==t.text_align?-1:1)*this.nodeBubbleSize(e))).attr("y2",0).attr("y1",0).attr("x2",(t=>this.shiftTip(t)[0]))).attr("transform",(t=>this.d3PhylotreeSvgRotate(t.text_angle)))):o.remove(),this.options["draw-size-bubbles"]){var a=this.nodeBubbleSize(e);t.selectAll("circle").data([a]).enter().append("circle").attr("r",(function(t){return t})),this.shown_font_size>=5&&(i=i.attr("dx",(t=>("end"==t.text_align?-1:1)*((this.alignTips()?0:a)+.33*this.shown_font_size))))}else this.shown_font_size>=5&&(i=i.attr("dx",(t=>("end"==t.text_align?-1:1)*this.shown_font_size*.33)));if(!r){let n=t.selectAll("circle").data([e]).enter().append("circle"),r=this.node_circle_size()(e);r>0?n.merge(n).attr("r",(t=>Math.min(.75*this.shown_font_size,r))).on("click",(t=>{this.handle_node_click(e,t)})):n.remove()}return this.node_styler&&this.node_styler(t,e),e}function Qy(){let t=this.phylotree.nodes.descendants();for(let e=t.length-1;e>=0;e-=1)py(t[e])?t[e].hasHiddenNodes=t[e].notshown:t[e].hasHiddenNodes=t[e].children.reduce((function(t,e){return e.notshown||t}),!1);return this}function tb(t){const e=this.internalNames();return!!e&&("function"==typeof e?e(t):e)}function eb(t){return arguments.length?(this.nodeSpan="string"==typeof t&&"equal"==t?function(t){return 1}:t,this):this.nodeSpan}function nb(t){let e=qy[py(t)?"node":"internal-node"];return By(t)&&(e+=" "+qy["tagged-node"]),Ry(t,this.selection_attribute_name)&&(e+=" "+qy["selected-node"]),t.parent||(e+=" "+qy["root-node"]),(ab(t)||ob(t))&&(e+=" "+qy["collapsed-node"]),e}function rb(t){return!(t.hidden||t.notshown)}function ib(t){return t.notshown}function ob(t){return t.hasHiddenNodes||!1}function ab(t){return t.collapsed||!1}function sb(t){return[t.node,t["internal-node"],t["collapsed-node"],t["tagged-node"],t["root-node"]].reduce((function(t,e,n,r){return t+"g."+e+(n<r.length-1?",":"")}),"")}function ub(t,e){this.phylotree.clearInternalNodes(e);for(var n=this.phylotree.nodes.descendants().length-1;n>=0;n--){var r=this.phylotree.nodes.descendants()[n];py(r)||Ry(r,this.selection_attribute_name)||(r[this.selection_attribute_name]=t(r.children))}this.modifySelection(((t,e)=>(py(t.target),t.target[this.selection_attribute_name])))}function lb(t){return py(t=t.data)?t.name||"":this.showInternalName(t)?t.name:""}function cb(t){return arguments.length?(this._nodeLabel=t||lb,this.update(),this):this._nodeLabel}function hb(t){return[t.clade].reduce((function(t,e,n,r){return t+"path."+e+(n<r.length-1?",":"")}),"")}function fb(t){let e=this.svg.selectAll("."+this.css_classes["tree-container"]);var n=0;let r,i=e.selectAll(hb(this.css_classes)).data(this.phylotree.nodes.descendants().filter(ab),(function(t){return t.id||(t.id=++n)})),o=function(){};this.radial()?(o=id().curve(sd).y((function(t){return t[0]})).x((function(t){return t[1]})),r=function(t,e,n,r,i){return e?[n.screen_y+(t[0]-r)/50,n.screen_x+(t[1]-i)/50]:[n.screen_y,n.screen_x]}):(o=id().y((function(t){return t[0]})).x((function(t){return t[1]})).curve(sd),r=function(t,e,n,r,i){return e?[n.screen_y+(t[0]-r)/50,n.screen_x+(t[1]-i)/50]:[n.screen_y,n.screen_x]}),i.exit().each((function(t){t.collapsed_clade=null})).remove(),t?i.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(i).attr("d",(function(t){if(t.collapsed_clade)return t.collapsed_clade;let e=t.collapsed[0][0],n=t.collapsed[0][1];return o(t.collapsed.map((function(i,o){return r(i,o,t,e,n)})))})).attr("d",(function(t){return t.collapsed_clade=o(t.collapsed)})):i.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(i).attr("d",(function(t){return t.collapsed_clade?t.collapsed_clade:t.collapsed_clade=o(t.collapsed)}))}function db(t,e,n){t=(t=El(t)).attr("class",(t=>this.reclassEdge(t))).on("click",(t=>{this.modifySelection([e.target],this.selection_attribute_name),this.update()}));let r=this.draw_branch([e.source,e.target]);n?(t.datum().existing_path&&(t=t.attr("d",(function(t){return t.existing_path}))),t=t.attr("d",r)):t=t.attr("d",r),e.existing_path=r;var i=this.phylotree.branch_length_accessor(e.target);if(void 0!==i){var o=t.selectAll("title");o.empty()&&(o=t.append("title")),o.text("Length = "+i)}else t.selectAll("title").remove();return this.edge_styler&&this.edge_styler(t,e,n),this.phylotree}function pb(t){let e=qy.branch;return By(t)&&(e+=" "+qy["tagged-branch"]),Ry(t,this.selection_attribute_name)&&(e+=" "+qy["selected-branch"]),e}function _b(){this.links.forEach((t=>{t.target.data.annotation&&(t.target[t.target.data.annotation]=t.target.data.annotation)}))}function vb(){if(this.links.forEach((t=>{t[this.selection_attribute_name]=t.target[this.selection_attribute_name]||!1,t.tag=t.target.tag||!1})),this.countHandler()){let t={};t[this.selection_attribute_name]=this.links.reduce(((t,e)=>t+(e[this.selection_attribute_name]?1:0)),0),t.tagged=this.links.reduce((function(t,e){return t+(By(e)?1:0)}),0),this.countUpdate(this,t,this.countHandler())}}function gb(t){return!(t.target.hidden||t.target.notshown)}function mb(t){return[t.branch,t["selected-branch"],t["tagged-branch"]].reduce((function(t,e,n,r){return t+"path."+e+(n<r.length-1?",":"")}),"")}function yb(t,e){return this.edge_placer(t,e)}let bb="phylotree.event";function wb(t){if(t.collapsed){t.collapsed=!1;let e=function(t){py(t)||t.collapsed||t.children.forEach(e),t.hidden=!1};e(t)}else t.collapsed=!0;return this.placenodes(),this}function xb(t,e,n){let r=this.size;if(this.radial()){let t=this.pad_width(),n="fit-to-size"!=this.options["top-bottom-spacing"]?this.pad_height():0;r=[r[1]+2*t,r[0]+2*t+n],e&&e.selectAll("."+qy["tree-container"]).attr("transform","translate ("+t+","+(t+n)+")")}else r=[r[0]+("fit-to-size"!=this.options["top-bottom-spacing"]?this.pad_height():0),r[1]+("fit-to-size"!=this.options["left-right-spacing"]?this.pad_width():0)];return e&&(n&&(e=e.transition(100)),e.attr("height",r[0]).attr("width",r[1])),this.size=r,r}function kb(t,e){(e=e||"y_scaled")in this&&(this[e]*=t)}function Eb(t){var e=new CustomEvent(bb,{detail:["refresh",t]});document.dispatchEvent(e)}function Sb(t,e){var n=new CustomEvent(bb,{detail:["countUpdate",e,t.countHandler()]});document.dispatchEvent(n)}function Ab(t){var e=new CustomEvent(bb,{detail:["layout",t,t.layoutHandler()]});document.dispatchEvent(e)}function Mb(t){switch(t.detail[0]){case"refresh":t.detail[1].refresh();break;case"countUpdate":case"layout":t.detail[2](t.detail[1])}return!0}function Cb(){document.addEventListener(bb,Mb,!1)}function Nb(t){return!t||null===t[0]&&null===t[1]?"":"translate ("+(null!==t[0]?t[0]:0)+","+(null!==t[1]?t[1]:0)+") "}function Tb(t){return null!==t?"rotate ("+t+") ":""}let Ob="d3_layout_phylotree_context_menu";function jb(t,e,n,r,i){let o=El(e).select("#"+Ob);if(o.empty()&&(o=El(e).append("div").attr("id",Ob).attr("class","dropdown-menu").attr("role","menu")),o.selectAll("a").remove(),o.selectAll("h6").remove(),o.selectAll("div").remove(),t){if(!gm([Boolean(t.menu_items),r.hide,r.selectable,r.collapsible])||!r["show-menu"])return;py(t)||(r.collapsible&&(o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(ab(t)?"Expand Subtree":"Collapse Subtree").on("click",(e=>{o.style("display","none"),this.toggleCollapse(t).update()})),r.selectable&&(o.append("div").attr("class","dropdown-divider"),o.append("h6").attr("class","dropdown-header").text("Toggle selection"))),r.selectable&&(o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",(function(e){o.style("display","none"),n.modifySelection(n.selectAllDescendants(t,!0,!0))})),o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",(function(e){o.style("display","none"),n.modifySelection(n.selectAllDescendants(t,!0,!1))})),o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",(function(e){o.style("display","none"),n.modifySelection(n.selectAllDescendants(t,!1,!0))})))),t.parent&&(r.selectable&&(o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",(function(e){o.style("display","none"),n.modifySelection([t])})),o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",(e=>{o.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(t))})),(r.reroot||r.hide)&&o.append("div").attr("class","dropdown-divider")),r.reroot&&o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",(e=>{o.style("display","none"),this.phylotree.reroot(t),this.update()})),r.hide&&o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(py(t)?"node":"subtree")).on("click",(e=>{o.style("display","none"),this.modifySelection([t],"notshown",!0,!0).updateHasHiddenNodes().update()}))),ob(t)&&o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",(function(e){o.style("display","none"),n.modifySelection(n.selectAllDescendants(t,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()}));var a=[];"menu_items"in t&&"object"==typeof t.menu_items&&t.menu_items.forEach((function(e){3==e.length&&(e[2]&&!e[2](t)||a.push([e[0],e[1]]))})),a.length&&(gm([r.hide,r.selectable,r.collapsible])&&o.append("div").attr("class","dropdown-divider"),a.forEach((function(e){o.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(e[0](t)).on("click",zg(e[1],t))})));let s=document.querySelector(e).getBoundingClientRect();o.style("position","absolute").style("left",i.clientX-s.x+12+"px").style("top",i.clientY-s.y+"px").style("display","block")}else o.style("display","none")}function Pb(t,e,n,r){"menu_items"in t||(t.menu_items=[]),t.menu_items.some((function(t){return t[0]==e&&t[1]==n&&t[2]==r}))||t.menu_items.push([e,n,r])}function Db(t,e,n,r,i){if(e=e||this.selection_attribute_name,i=i||"toggle",this.options["restricted-selectable"].length){if(!mm(kv(Gy),t))return;t=Gy[t]}if(!this.options["restricted-selectable"]&&!this.options.selectable||this.options["binary-selectable"])this.options["binary-selectable"]&&("function"==typeof t?this.links.forEach((function(n){var r=t(n);n[e]=n[e]||!1,n[e]!=r&&(n[e]=r,a=!0,n.target[e]=r),this.options["attribute-list"].forEach((function(t){t!=e&&!0===n[e]&&(n[t]=!1,n.target[t]=!1)}))})):(t.forEach((function(t){var n;n=!t[e],t[e]!=n&&(t[e]=n,a=!0)})),this.links.forEach((function(t){t[e]=t.target[e],this.options["attribute-list"].forEach((function(n){n!=e&&!0!==t[e]&&(t[n]=!1,t.target[n]=!1)}))}))),a&&(r||Eb(this),this.countHandler()&&((o={})[e]=this.links.reduce((function(t,n){return t+(n[e]?1:0)}),0),this.countUpdate(this,o,this.countHandler())),n&&this.placenodes()));else{var o,a=!1;"function"==typeof t?this.links.forEach((function(n){let r=t(n);n[e]=n[e]||!1,n[e]!=r&&(n[e]=r,a=!0,n.target[e]=r)})):(t.forEach((function(t){var n;switch(i){case"true":n=!0;break;case"false":n=!1;break;default:n=!t[e]}t[e]!=n&&(t[e]=n,a=!0)})),this.links.forEach((function(t){t[e]=t.target[e]}))),a&&(r||Eb(this),this.countHandler&&((o={})[e]=this.links.reduce((function(t,n){return t+(n[e]?1:0)}),0),Sb(this,o,this.countHandler)),n&&this.placenodes())}return this.selectionCallback&&"tag"!=e&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function Lb(){return this.nodes.filter((t=>t[this.selection_attribute_name]))}function Ib(t,e,n){let r=[];return function i(o){py(o)?e&&o!=t&&r.push(o):(n&&o!=t&&r.push(o),o.children.forEach(i))}(t),r}function zb(t){return t?(this.selectionCallback=t,this):this.selectionCallback}function Bb(t){return function(){return t}}class Rb{constructor(t,e={}){this.css_classes=qy,this.phylotree=t,this.container=e.container,this.separation=function(t,e){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.font_size=12,this.scale_bar_font_size=12,this.offsets=[0,this.font_size/2],this.draw_branch=zy,this.draw_scale_bar=null,this.edge_placer=Iy,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.shown_font_size=this.font_size,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(t){return this.nodeSpan(t)/this.rescale_nodeSpan};let n={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:Bb(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(t){return"number"==typeof t?t+"px":t},this.options=Kv(e,n),this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(t){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map((t=>{if(py(t)||this.showInternalName(t))return this.nodeSpan(t)})).reduce((function(t,e){return Math.min(e,t||1e200)}),null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Cb()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const t=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+t}collapse_node(t){ab(t)||(t.collapsed=!0)}set_size(t){if(!arguments.length)return this.size;let e=t;return"fixed-step"!=this.options["top-bottom-spacing"]&&(this.size[0]=e[0]),"fixed-step"!=this.options["left-right-spacing"]&&(this.size[1]=e[1]),this}initialize_svg(t){return this.svg!==t&&(El(t).select("svg").remove(),this.svg=("svg",El(ll("svg").call(document.documentElement))).attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),"phylotree-container"==this.css_classes["tree-container"]&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),El(this.container).on("click",(t=>{this.handle_node_click(null)}),!0)),this}update_layout(t,e){e&&(this.nodes=yf(t),this.nodes.each((function(t){t.id=null}))),this.update(),this.syncEdgeLabels()}update(t){var e=this;this.placenodes(),t=this.transitions(t);let n=0,r=this.svg.selectAll("."+qy["tree-container"]).data([0]);if(r=r.enter().append("g").attr("class",qy["tree-container"]).merge(r).attr("transform",(t=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()]))),this.draw_scale_bar){let t=this.svg.selectAll("."+qy["tree-scale-bar"]).data([0]);t.enter().append("g").attr("class",qy["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(t).attr("transform",(t=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10]))).call(this.draw_scale_bar),t.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+qy["tree-scale-bar"]).remove();r=this.svg.selectAll("."+qy["tree-container"]).data([0]),this.updateCollapsedClades(t);let i=r.selectAll(mb(qy)).data(this.links.filter(gb),(t=>t.target.id||(t.target.id=++n)));i.exit().remove(),i=i.enter().insert("path",":first-child").merge(i).each((function(n){e.drawEdge(this,n,t)}));let o=r.selectAll(sb(qy)).data(this.phylotree.nodes.descendants().filter(rb),(t=>t.id||(t.id=++n)));if(o.exit().remove(),o=o.enter().append("g").attr("class",this.reclassNode).merge(o).attr("transform",(t=>{const e="right-to-left"==this.options.layout&&py(t);return t.screen_x=Ty(t),t.screen_y=Oy(t),this.d3PhylotreeSvgTranslate([e?0:t.screen_x,t.screen_y])})).each((function(n){e.drawNode(this,n,t)})).attr("transform",(t=>{if(!H_(t.screen_x)&&!H_(t.screen_y))return"translate("+t.screen_x+","+t.screen_y+")"})),this.options["label-nodes-with-name"]&&(o=o.attr("id",(t=>"node-"+t.name))),this.resizeSvg(this.phylotree,this.svg,t),this.options.brush){var a=r.selectAll("."+qy["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",qy["tree-selection-brush"]),s=function(t){var e,n=Qh,r=Jh,i=tf,o=!0,a=lu("start","brush","end"),s=6;function u(e){var n=e.property("__brush",_).selectAll(".overlay").data([Kh("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Yh.overlay).merge(n).each((function(){var t=ef(this).extent;El(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Kh("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Yh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Yh[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=El(this),e=ef(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new h(t,e,n):r}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,s,u,h,f,d,p,_,v,g,m=this,y=n.target.__data__.type,b="selection"===(o&&n.metaKey?y="overlay":y)?Dh:o&&n.altKey?zh:Ih,w=t===Vh?null:Gh[y],x=t===Hh?null:Zh[y],k=ef(m),E=k.extent,S=k.selection,A=E[0][0],M=E[0][1],C=E[1][0],N=E[1][1],T=0,O=0,j=w&&x&&o&&n.shiftKey,P=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=yc(t,m)).point0=t.slice(),t.identifier=e,t}));if("overlay"===y){S&&(_=!0);const e=[P[0],P[1]||P[0]];k.selection=S=[[i=t===Vh?A:qh(e[0][0],e[1][0]),s=t===Hh?M:qh(e[0][1],e[1][1])],[h=t===Vh?C:Rh(e[0][0],e[1][0]),d=t===Hh?N:Rh(e[0][1],e[1][1])]],P.length>1&&R()}else i=S[0][0],s=S[0][1],h=S[1][0],d=S[1][1];a=i,u=s,f=h,p=d;var D=El(m).attr("pointer-events","none"),L=D.selectAll(".overlay").attr("cursor",Yh[y]);Vc(m);var I=c(m,arguments,!0).beforestart();if(n.touches)I.moved=B,I.ended=q;else{var z=El(n.view).on("mousemove.brush",B,!0).on("mouseup.brush",q,!0);o&&z.on("keydown.brush",F,!0).on("keyup.brush",U,!0),Al(n.view)}l.call(m),I.start(n,b.name)}function B(t){for(const e of t.changedTouches||[t])for(const t of P)t.identifier===e.identifier&&(t.cur=yc(e,m));if(j&&!v&&!g&&1===P.length){const t=P[0];Bh(t.cur[0]-t[0])>Bh(t.cur[1]-t[1])?g=!0:v=!0}for(const t of P)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);_=!0,Ph(t),R(t)}function R(t){const e=P[0],n=e.point0;var r;switch(T=e[0]-n[0],O=e[1]-n[1],b){case Lh:case Dh:w&&(T=Rh(A-i,qh(C-h,T)),a=i+T,f=h+T),x&&(O=Rh(M-s,qh(N-d,O)),u=s+O,p=d+O);break;case Ih:P[1]?(w&&(a=Rh(A,qh(C,P[0][0])),f=Rh(A,qh(C,P[1][0])),w=1),x&&(u=Rh(M,qh(N,P[0][1])),p=Rh(M,qh(N,P[1][1])),x=1)):(w<0?(T=Rh(A-i,qh(C-i,T)),a=i+T,f=h):w>0&&(T=Rh(A-h,qh(C-h,T)),a=i,f=h+T),x<0?(O=Rh(M-s,qh(N-s,O)),u=s+O,p=d):x>0&&(O=Rh(M-d,qh(N-d,O)),u=s,p=d+O));break;case zh:w&&(a=Rh(A,qh(C,i-T*w)),f=Rh(A,qh(C,h+T*w))),x&&(u=Rh(M,qh(N,s-O*x)),p=Rh(M,qh(N,d+O*x)))}f<a&&(w*=-1,r=i,i=h,h=r,r=a,a=f,f=r,y in Xh&&L.attr("cursor",Yh[y=Xh[y]])),p<u&&(x*=-1,r=s,s=d,d=r,r=u,u=p,p=r,y in $h&&L.attr("cursor",Yh[y=$h[y]])),k.selection&&(S=k.selection),v&&(a=S[0][0],f=S[1][0]),g&&(u=S[0][1],p=S[1][1]),S[0][0]===a&&S[0][1]===u&&S[1][0]===f&&S[1][1]===p||(k.selection=[[a,u],[f,p]],l.call(m),I.brush(t,b.name))}function q(t){if(jh(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ml(t.view,_),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),L.attr("cursor",Yh.overlay),k.selection&&(S=k.selection),nf(S)&&(k.selection=null,l.call(m)),I.end(t,b.name)}function F(t){switch(t.keyCode){case 16:j=w&&x;break;case 18:b===Ih&&(w&&(h=f-T*w,i=a+T*w),x&&(d=p-O*x,s=u+O*x),b=zh,R());break;case 32:b!==Ih&&b!==zh||(w<0?h=f-T:w>0&&(i=a-T),x<0?d=p-O:x>0&&(s=u-O),b=Lh,L.attr("cursor",Yh.selection),R());break;default:return}Ph(t)}function U(t){switch(t.keyCode){case 16:j&&(v=g=j=!1,R());break;case 18:b===zh&&(w<0?h=f:w>0&&(i=a),x<0?d=p:x>0&&(s=u),b=Ih,R());break;case 32:b===Lh&&(t.altKey?(w&&(h=f-T*w,i=a+T*w),x&&(d=p-O*x,s=u+O*x),b=zh):(w<0?h=f:w>0&&(i=a),x<0?d=p:x>0&&(s=u),b=Ih),L.attr("cursor",Yh[y]),R());break;default:return}Ph(t)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function _(){var e=this.__brush||{selection:null};return e.extent=Uh(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.tween?e.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=c(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=mc(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),l.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,i.extent),a=c(e,r).beforestart();Vc(e),i.selection=null===o?null:o,l.call(e),a.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=El(this.that).datum();a.call(e,this.that,new Oh(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Th(Uh(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Th(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Th(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}(Wh).on("brush",((t,e)=>{var n=t.selection,r=this.links.filter(gb).filter(((t,e)=>t.source.screen_x>=n[0][0]&&t.source.screen_x<=n[1][0]&&t.source.screen_y>=n[0][1]&&t.source.screen_y<=n[1][1]&&t.target.screen_x>=n[0][0]&&t.target.screen_x<=n[1][0]&&t.target.screen_y>=n[0][1]&&t.target.screen_y<=n[1][1])).map((t=>t.target));this.modifySelection(this.phylotree.links.map((t=>t.target)),"tag",!1,r.length>0,"false"),this.modifySelection(r,"tag",!1,!1,"true")})).on("end",(()=>{}));a.call(s)}if(this.syncEdgeLabels(),this.options.zoom){let t=function(){var t,e,n,r=p_,i=__,o=y_,a=g_,s=m_,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,h=s_,f=lu("start","zoom","end"),d=500,p=0,_=10;function v(t){t.property("__zoom",v_).on("wheel.zoom",k).on("mousedown.zoom",E).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",A).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new c_(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new c_(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,r){t.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=w(t,o).event(r),s=i.apply(t,o),u=null==n?y(s):"function"==typeof n?n.apply(t,o):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=t.__zoom,f="function"==typeof e?e.apply(t,o):e,d=h(c.invert(u).concat(l/c.k),f.invert(u).concat(l/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=l/e[2];t=new c_(n,u[0]-e[0]*n,u[1]-e[1]*n)}a.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function k(t,...e){if(r.apply(this,arguments)){var n=w(this,e).event(t),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=yc(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],Vc(this),n.start()}d_(t),n.wheel=setTimeout(h,150),n.zoom("mouse",o(m(g(i,s),n.mouse[0],n.mouse[1]),n.extent,l))}function h(){n.wheel=null,n.end()}}function E(t,...e){if(!n&&r.apply(this,arguments)){var i=w(this,e,!0).event(t),a=El(t.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",d,!0),s=yc(t,u),u=t.currentTarget,c=t.clientX,h=t.clientY;Al(t.view),f_(t),i.mouse=[s,this.__zoom.invert(s)],Vc(this),i.start()}function f(t){if(d_(t),!i.moved){var e=t.clientX-c,n=t.clientY-h;i.moved=e*e+n*n>p}i.event(t).zoom("mouse",o(m(i.that.__zoom,i.mouse[0]=yc(t,u),i.mouse[1]),i.extent,l))}function d(t){a.on("mousemove.zoom mouseup.zoom",null),Ml(t.view,i.moved),d_(t),i.event(t).end()}}function S(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,a=yc(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),u=n.k*(t.shiftKey?.5:2),h=o(m(g(n,u),a,s),i.apply(this,e),l);d_(t),c>0?El(this).transition().duration(c).call(b,h,a,t):El(this).call(v.transform,h,a,t)}}function A(n,...i){if(r.apply(this,arguments)){var o,a,s,u,l=n.touches,c=l.length,h=w(this,i,n.changedTouches.length===c).event(n);for(f_(n),a=0;a<c;++a)u=[u=yc(s=l[a],this),this.__zoom.invert(u),s.identifier],h.touch0?h.touch1||h.touch0[2]===u[2]||(h.touch1=u,h.taps=0):(h.touch0=u,o=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(h.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),d)),Vc(this),h.start())}}function M(t,...e){if(this.__zooming){var n,r,i,a,s=w(this,e).event(t),u=t.changedTouches,c=u.length;for(d_(t),n=0;n<c;++n)i=yc(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var h=s.touch0[0],f=s.touch0[1],d=s.touch1[0],p=s.touch1[1],_=(_=d[0]-h[0])*_+(_=d[1]-h[1])*_,v=(v=p[0]-f[0])*v+(v=p[1]-f[1])*v;r=g(r,Math.sqrt(_/v)),i=[(h[0]+d[0])/2,(h[1]+d[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(m(r,i,a),s.extent,l))}}function C(t,...r){if(this.__zooming){var i,o,a=w(this,r).event(t),s=t.changedTouches,u=s.length;for(f_(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),d),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=yc(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<_)){var l=El(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",v_),t!==i?b(t,e,n,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},v.scaleBy=function(t,e,n,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},v.scaleTo=function(t,e,n,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof e?e.apply(this,arguments):e;return o(m(g(r,u),a,s),t,l)}),n,r)},v.translateBy=function(t,e,n,r){v.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}),null,r)},v.translateTo=function(t,e,n,r,a){v.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?y(t):"function"==typeof r?r.apply(this,arguments):r;return o(h_.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),r,a)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=El(this.that).datum();f.call(t,this.that,new l_(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:f}),e)}},v.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:u_(+t),v):a},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:u_(!!t),v):r},v.touchable=function(t){return arguments.length?(s="function"==typeof t?t:u_(!!t),v):s},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:u_([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],v):[u[0],u[1]]},v.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(t){return arguments.length?(o=t,v):o},v.duration=function(t){return arguments.length?(c=+t,v):c},v.interpolate=function(t){return arguments.length?(h=t,v):h},v.on=function(){var t=f.on.apply(f,arguments);return t===f?v:t},v.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,v):Math.sqrt(p)},v.tapDistance=function(t){return arguments.length?(_=+t,v):_},v}().scaleExtent([.1,10]).on("zoom",(t=>{El("."+qy["tree-container"]).attr("transform",(e=>t.transform)),El("."+qy["tree-scale-bar"]).attr("transform",(e=>{let n=t.transform;return n.y-=10,n}))}));this.svg.call(t)}return this}_handle_single_node_layout(t){let e=this.nodeSpan(t)/this.rescale_nodeSpan;this.x=t.x=this.x+this.separation(this.last_node,t)+.5*(this.last_span+e),this._extents[1][1]=Math.max(this._extents[1][1],t.y),this._extents[1][0]=Math.min(this._extents[1][0],t.y-.5*e),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span+(.5*e+this.separation(this.last_node,t))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+.5*e+this.separation(this.last_node,t)),this.last_node=t,this.last_span=e}tree_layout(t){if(ib(t))return;let e=py(t);t.text_angle=null,t.text_align=null,t.radius=null,t.angle=null;let n=!1;if(t.parent)if(this.do_scaling){if(n)return 0;if(t.y=this.phylotree.branch_length_accessor(t),void 0===t.y)return n=!0,0;t.y+=t.parent.y}else t.y=e?this.max_depth:t.depth;else this.x=0,t.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(e&&this._handle_single_node_layout(t),!e)if(ab(t)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=.5*this.last_span,this.is_under_collapsed_parent=!0,this.process_internal_node(t),this.is_under_collapsed_parent=!1,"number"==typeof t.x){t.x=this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span,t.collapsed=[[t.x,t.y]];var r=e=>{e.hidden=!0,py(e)?(this.x=e.x=this.save_x+(e.x-this.save_x)*this.options.compression+this.save_span,t.collapsed.push([e.x,e.y])):e.children.map(r)};this.x=this.save_x,r(t),t.collapsed.splice(1,0,[this.save_x,t.y]),t.collapsed.push([this.x,t.y]),t.collapsed.push([t.x,t.y]),t.hidden=!1}}else this.process_internal_node(t);return t.x}process_internal_node(t){let e=0;if(this.showInternalName(t)){let e=t.children.length/2>>0,n=0,r=!1;for(let i=0;i<t.children.length;i++)"number"==typeof this.tree_layout(t.children[i])&&n++,n>=e&&!r&&(this._handle_single_node_layout(t),r=!0);0==n?(t.notshown=!0,t.x=void 0):r||this._handle_single_node_layout(t)}else t.x=t.children.map(this.tree_layout.bind(this)).reduce(((t,n)=>"number"==typeof n?t+n:(e+=1,t)),0),e==t.children.length?(t.notshown=!0,t.x=void 0):t.x/=t.children.length-e}do_lr(t){if(this.radial()&&t&&(this.offsets[1]=0),"fixed-step"==this.options["left-right-spacing"])this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),t=!0;let e=this.size[1]-this.offsets[1]-this.options["left-offset"];.5*e<this.label_width&&(this.shown_font_size*=.5*e/this.label_width,this.label_width=.5*e),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=.5*this.last_span,this.do_scaling=this.options.scaling,this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}(this.phylotree.nodes.descendants(),(t=>t.depth)),this.do_scaling;let t=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),"fixed-step"==this.options["top-bottom-spacing"]?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],t=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=zg(Dy,this.radial_center),this.edge_placer=Ly;let e=null,n=null,r=null,i=0,o=this._extents[0][1]*this.scales[0],a=function(t,e,n,r,i){return i=i||0,Math.sqrt((e-t)*(e-t)+2*(t+i)*(e+i)*(1-Math.cos(n-r)))},s=0;this.phylotree.nodes.each((t=>{let e=t.x*this.scales[0];t.angle=2*Math.PI*e/o,t.text_angle=t.angle-Math.PI/2,t.text_angle=t.text_angle>0&&t.text_angle<Math.PI,t.text_align=t.text_angle?"end":"start",t.text_angle=(t.text_angle?180:0)+180*t.angle/Math.PI})),this.do_lr(t),this.phylotree.nodes.each((t=>{t.radius=t.y*this.scales[1]/this.size[1],s=Math.max(t.radius,s)}));let u=0;this.phylotree.nodes.each((t=>{if(!t.children){let o=t.x*this.scales[0];if(null!==e){let l=o-n,c=a(t.radius,r,t.angle,e,u),h=c>0?l/c:10*this.options["max-radius"];if(h>this.options["max-radius"]){let n=l/this.options["max-radius"],o=t.radius+r,a=t.radius*r-(n*n-(r-t.radius)*(r-t.radius))/2/(1-Math.cos(e-t.angle)),c=Math.sqrt(o*o-4*a);u=Math.min(this.options["annular-limit"]*s,(-o+c)/2),i=this.options["max-radius"]}else i=Math.max(i,h)}e=t.angle,n=o,r=t.radius}})),this.radius=Math.min(this.options["max-radius"],Math.max(o/2/Math.PI,i)),t&&(this.radius=Math.min(this.radius,.5*(Math.min(o,this._extents[1][1]*this.scales[1])-this.label_width)-this.radius*u)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=zg(Dy,this.radial_center);let l=1;u&&(l=s/(s+u),this.radius*=l),this.phylotree.nodes.each((t=>{if(Py(t,this.radius,u,this.radial_center,this.scales,this.size),s=Math.max(s,t.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,t.radius+this.nodeBubbleSize(t)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,t.radius),t.collapsed){t.collapsed=t.collapsed.map((t=>{let e={};return e.x=t[0],e.y=t[1],e=Py(e,this.radius,u,this.radial_center,this.scales,this.size),[e.x,e.y]}));let e=t.collapsed[1];t.collapsed=t.collapsed.filter((function(n,r){return r<3||r>t.collapsed.length-4||Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2))>3&&(e=n,!0)}))}})),this.size[0]=this.radial_center+this.radius/l,this.size[1]=this.radial_center+this.radius/l}else this.do_lr(),this.draw_branch=zy,this.edge_placer=Iy,this.right_most_leaf=0,this.phylotree.nodes.each((t=>{if(t.x*=this.scales[0],t.y*=.8*this.scales[1],"right-to-left"==this.options.layout&&(t.y=this._extents[1][1]*this.scales[1]-t.y),py(t)&&(this.right_most_leaf=Math.max(this.right_most_leaf,t.y+this.nodeBubbleSize(t))),t.collapsed){t.collapsed.forEach((t=>{t[0]*=this.scales[0],t[1]*=.8*this.scales[1]}));let e=t.collapsed[1][0];t.collapsed=t.collapsed.filter((function(n,r){return r<3||r>t.collapsed.length-4||n[0]-e>3&&(e=n[0],!0)}))}}));if(this.draw_scale_bar){let t,e;if(this.radial()){if(e=Math.min(this.radius/5,50),t=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*e/this.radius)/Math.log(10))),e=t*(this.radius/this._extents[1][1]),e<30){let n=Math.ceil(30/e);e*=n,t*=n}}else t=this._extents[1][1],e=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let n=Wf().domain([0,t]).range([0,e]),r=pf(".2f");if(this.draw_scale_bar=nu(1,void 0).scale(n).tickFormat((function(t){return 0===t?"":r(t)})),this.radial())this.draw_scale_bar.tickValues([t]);else{let t=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},i=n.ticks();i=i.length>1?i[1]:i[0],this.draw_scale_bar.ticks(Math.min(10,t(e/(this.shown_font_size*r(i).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(t,e){return arguments.length?(this.fixed_width[0]!=t&&t>=this.options["minimum-per-node-spacing"]&&t<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=t,e||this.placenodes()),this):this.fixed_width[0]}spacing_y(t,e){return arguments.length?(this.fixed_width[1]!=t&&t>=this.options["minimum-per-level-spacing"]&&t<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=t,e||this.placenodes()),this):this.fixed_width[1]}_label_width(t){t=t||this.shown_font_size;let e=0;return this.phylotree.nodes.descendants().filter(rb).forEach((n=>{let r=12+this._nodeLabel(n).length*t*.8;null!==n.angle&&(r*=Math.max(Math.abs(Math.cos(n.angle)),Math.abs(Math.sin(n.angle)))),e=Math.max(r,e)})),e}font_size(t){return arguments.length?(this.font_size=void 0===t?12:t,this):this.font_size}scale_bar_font_size(t){return arguments.length?(this.scale_bar_font_size=void 0===t?12:t,this):this.scale_bar_font_size}node_circle_size(t,e){return arguments.length?(this.options.node_circle_size=Bb(void 0===t?3:t),this):this.options.node_circle_size}css(t){if(0===arguments.length)return this.css_classes;if(arguments.length>2){var e={};return e[t[0]]=t[1],this.css(e)}for(var n in qy)n in t&&t[n]!=qy[n]&&(qy[n]=t[n]);return this}transitions(t){return void 0!==t?t:null!==this.options.transitions?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(t,e){if(!arguments.length)return this.css_classes;let n=!1;for(var r in qy)r in t&&t[r]!=this.css_classes[r]&&(n=!0,this.css_classes[r]=t[r]);return e&&n&&this.layout(),this}layout(t){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(t,e){this.nodeDropdownMenu(t,this.container,this,this.options,e)}refresh(){if(this.svg){let t=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(mb(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&t.each((t=>{this.edge_styler(El(this),t)}))}return this}countHandler(t){return arguments.length?(this.count_listener_handler=t,this):this.count_listener_handler}style_nodes(t){return arguments.length?(this.node_styler=t,this):this.node_styler}style_edges(t){return arguments.length?(this.edge_styler=t.bind(this),this):this.edge_styler}itemSelected(t,e){return t[e]||!1}show(){return this.svg.node()}}Gv(Rb.prototype,s),Gv(Rb.prototype,a),Gv(Rb.prototype,u),Gv(Rb.prototype,l),Gv(Rb.prototype,c),Gv(Rb.prototype,o);const qb=Rb;let Fb=class{constructor(t,e={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=Ay,this.branch_length=Ay,this.logger=e.logger||console,this.selection_attribute_name="selected";var n=e.type||void 0,r=[],i=this;if(X_(n))n in ky?r=ky[n](t,e):i.logger.error("type "+n+" not in registry! Available types are "+kv(ky));else if(nv(n))try{r=n(t,e)}catch(t){i.logger.error("Could not parse custom format!")}else"root"==t.name?r={json:t,error:null}:"string"!=typeof t?r=t:"application/xml"==t.contentType?r=xy(t):(this.newick_string=t,r=gy(t,e));if(r.json){i.nodes=yf(r.json);let t={};i.nodes.each((e=>{e.data.annotation&&(t[e.data.annotation]=!0)})),i.parsed_tags=Object.keys(t)}else i.nodes=[];return i.links=i.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength((t=>1))),i}json(t){var e=0;this.traverse_and_compute((function(t){t.json_export_index=e++}),t);var n=new Array(e);return e=0,this.traverse_and_compute((function(t){let r=tg(t);delete r.json_export_index,t.parent&&(r.parent=t.parent.json_export_index),t.children&&(r.children=cm(t.children,(function(t){return t.json_export_index}))),n[e++]=r}),t),this.traverse_and_compute((function(t){delete t.json_export_index}),t),JSON.stringify(n)}traverse_and_compute(t,e,n,r){return e="pre-order"==(e=e||"post-order")?function(e){!function(t,e,n){let r,i,o=[t];for(;t=o.pop();)if((!n||!n(t))&&(e(t),r=t.children,r))for(i=r.length-1;i>=0;--i)o.push(r[i])}(e,t,r)}:"in-order"==e?function(e){!function(t,e,n){let r,i,o,a,s=[t];do{for(r=s.reverse(),s=[];t=r.pop();)if((!n||!n(t))&&(e(t),i=t.children,i))for(o=0,a=i.length;o<a;++o)s.push(i[o])}while(s.length)}(e,t,r)}:function(e){H_(e)||Sy(e,t,r)},e(n||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(t){this.nodes=t}render(t){return this.display=new qb(this,t),this.display}};Fb.prototype.isLeafNode=py,Fb.prototype.mrca=function(){var t,e;return t=(t=1==arguments.length?arguments[0]:Array.from(arguments)).map((function(t){return"string"==typeof t?t:t.name})),this.traverse_and_compute((function(n){n.children?n.parent?(n.mrca=Xm(...n.descendants().map((t=>t.mrca))),e||n.mrca.length!=t.length||(e=n)):e||(e=n):n.mrca=$m([n.name],t)})),e},Fb.prototype.hasBranchLengths=function(){let t=this.branch_length;return!!t&&vm(this.nodes.descendants(),(function(e){return!e.parent||!H_(t(e))}))},Fb.prototype.getBranchLengths=function(){let t=this.branch_length;return cm(this.nodes.descendants(),(e=>t(e)))},Fb.prototype.branchName=function(t){return arguments.length?(this.nodeLabel=t,this):this.nodeLabel},Fb.prototype.normalizeBranchLengths=function(t){let e=this.branch_length,n=cm(this.nodes.descendants(),(function(t){return e(t)?e(t):null}));const r=xm(n),i=km(n);return lm(this.nodes.descendants(),(t=>{let n=e(t);n&&e(t,(n-i)/(r-i))})),this},Fb.prototype.scaleBranchLengths=function(t){let e=this.branch_length;return lm(this.nodes.descendants(),(n=>{let r=e(n);r&&e(n,t(r))})),this},Fb.prototype.getNewick=function(t,e){let n=this;t||(t=t=>"");let r=[];return t=t||"",function e(i){py(i)||(r.push("("),i.children.forEach((function(t,n){n&&r.push(","),e(t)})),r.push(")")),"root"!=i.data.name&&r.push(i.data.name),r.push(t(i));let o=n.branch_length_accessor(i);void 0!==o&&r.push(":"+o)}(e||this.nodes),r.join("")+";"},Fb.prototype.resortChildren=function(t,e,n){return this.nodes.sum((function(t){return t.value})).sort(t),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this},Fb.prototype.setBranchLength=function(t){return arguments.length?(this.branch_length_accessor=t||Ay,this):this.branch_length_accessor},Fb.prototype.maxParsimony=function(t,e){const n=zg((function(t,e){if(e.mp=[[0,0],[!1,!1]],py(e))e.mp[1][0]=e.mp[1][1]=e[t]||!1,e.mp[0][0]=e.mp[1][0]?1:0,e.mp[0][1]=1-e.mp[0][0];else{e.children.forEach(n);var r=e.children.reduce((function(t,e){return e.mp[0][0]+t}),0),i=e.children.reduce((function(t,e){return e.mp[0][1]+t}),0);e[t]?(e.mp[0][0]=i+1,e.mp[1][0]=!0,e.mp[0][1]=i,e.mp[1][1]=!0):(r<i+1?(e.mp[0][0]=r,e.mp[1][0]=!1):(e.mp[0][0]=i+1,e.mp[1][0]=!0),i<r+1?(e.mp[0][1]=i,e.mp[1][1]=!0):(e.mp[0][1]=r+1,e.mp[1][1]=!1))}}),e);n(this.nodes),this.nodes.each((t=>{t.parent?t.mp=t.mp[1][t.parent.mp?1:0]:t.mp=t.mp[1][t.mp[0][0]<t.mp[0][1]?0:1]})),this.display.modifySelection(((t,n)=>py(t.target)?t.target[e]:t.target.mp))},Fb.prototype.getTipLengths=function(){let t=cm(this.getTips(),(t=>({name:t.data.name,length:parseFloat(t.data.attribute)})));return t=Cm(t,(t=>-t.length)),t},Fb.prototype.leftChildRightSibling=function(t){return Sy(t,(function(t){t.children&&(t.children[0].data.multiway_parent=t,t.children[1].data.multiway_parent=t.parent)})),Ey.map(t.descendants(),(t=>{let e=t.data.multiway_parent,n="unknown";return e&&(n=e.data.name),{source:t.data.multiway_parent,target:t,name:n}}))},Gv(Fb.prototype,e),Gv(Fb.prototype,i),Gv(Fb.prototype,r);const Ub=Fb;function Hb(t){return Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hb(t)}function Vb(){Vb=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var _=Object.getPrototypeOf,v=_&&_(_(E([])));v&&v!==e&&n.call(v,i)&&(p=v);var g=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function r(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==Hb(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(y.prototype),s(y.prototype,o,(function(){return this})),t.AsyncIterator=y,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new y(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function Wb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Yb(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Wb(o,r,i,a,s,"next",t)}function s(t){Wb(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Xb(t){return function(t){if(Array.isArray(t))return $b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return $b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$b(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Ud("%Y%m%d");var Gb=new Vs,Zb=document.getElementById("visualization_page_button"),Kb=new Ws(document.getElementById("main_container_for_main_page"),document.getElementById("main_page_button"),Gb),Jb=new Ws(document.getElementById("visualization_page_subpage"),Zb,Gb),Qb=new Ws(document.getElementById("manual"),document.getElementById("manual_button"),Gb),tw=new Ws(document.getElementById("about_us"),document.getElementById("about_us_button"),Gb);document.getElementById("about_the_project_link").addEventListener("click",(function(){Gb.changeActivePage(tw)})),document.getElementById("manual_link").addEventListener("click",(function(){Gb.changeActivePage(Qb)})),Kb.show(),Gb.active_page=Kb;var ew=document.getElementById("alignment_file_input_"),nw=document.getElementById("visualize_button"),rw=document.getElementById("add_tree_checkbox"),iw=document.getElementById("tree_input_wrapper"),ow=document.getElementById("tree_file_input"),aw=document.getElementById("example_alignment_button"),sw=document.getElementById("file_error");function uw(){nw.disabled=!0,ew.files[0]&&(rw.checked&&!ow.files[0]||(nw.disabled=!1))}function lw(){ew.value="",ow.value="",sw.style.display="none",rw.checked=!1,document.getElementById("check").innerHTML="",document.getElementById("check2").innerHTML="",iw.style.display="none",document.getElementById("for_alignment_file_name").textContent="",document.getElementById("for_tree_file_name").textContent="",nw.disabled=!0}function cw(t){var e=[];return function n(r){t.isLeafNode(r)?e.push(r.data.name):r.children.forEach(n)}(t.getRootNode()),e}function hw(t,e){return Xb(t).sort().join(",")===Xb(e).sort().join(",")}var fw=void 0;function dw(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;fw&&fw.removeAll();var r=[],i=Object.keys(t);if(n){var o=cw(n);if(!hw(o,i))return sw.textContent="Error. Alignment sequences names don't match Newick sequences names. \n\t\t\tMake sure to check if the names don't contain whitespaces.",sw.style.removeProperty("display"),void(nw.disabled=!0);r=o}var a={};r.forEach((function(t,e){a[t]=e})),i.sort((function(t,e){return a[t]-a[e]}));var s=i.map((function(e){return t[e]}));document.getElementById("visualization_page").style.removeProperty("display"),Gb.changeActivePage(Jb),Zb.style.removeProperty("display");var u="nucleic"===e?Ys:Xs,l=m.createNodesData(s,u),c=m.createLinksData(s,l);lw(),fw=new qs({nodes:l,links:c,alignment_type:e,sequences:s,sequences_names:i,sequences_order:a,tree:n})}function pw(t){return _w.apply(this,arguments)}function _w(){return _w=Yb(Vb().mark((function t(e){var n,r,i,o,a,s,u,l=arguments;return Vb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]&&l[1],t.next=3,fetch("/upload_sequences",{method:"PUT",body:e});case 3:if((r=t.sent).ok){t.next=8;break}return sw.textContent="Error. Invalid alignment file. Verify it and try again.",sw.style.removeProperty("display"),t.abrupt("return",!1);case 8:return t.next=10,r.json();case 10:if(i=t.sent,!(Object.keys(i).length<2)){t.next=15;break}return sw.textContent="Error. The length of the alignment must be greater than one.",sw.style.removeProperty("display"),t.abrupt("return",!1);case 15:if(o=n?"nucleic":document.getElementById("alignment_type_select").value,!rw.checked){t.next=27;break}return s=ow.files[0],t.next=20,s.text();case 20:if(u=t.sent,!gy(u).error){t.next=26;break}return sw.textContent="Error. Invalid Newick content.",sw.style.removeProperty("display"),t.abrupt("return",!1);case 26:a=new Ub(u);case 27:dw(i,o,a);case 28:case"end":return t.stop()}}),t)}))),_w.apply(this,arguments)}ew.addEventListener("change",(function(){var t,e=document.getElementById("for_alignment_file_name"),n=document.getElementById("check");try{t=ew.files[0].name,n.innerHTML="&#10003;",e.textContent=t,e.style.removeProperty("display")}catch(t){n.innerHTML="",e.style.display="none"}uw()})),rw.addEventListener("change",(function(t){t.target.checked?iw.style.removeProperty("display"):iw.style.display="none",uw()})),ow.addEventListener("change",(function(){var t,e=document.getElementById("for_tree_file_name"),n=document.getElementById("check2");try{t=ow.files[0].name,n.innerHTML="&#10003;",e.textContent=t,e.style.removeProperty("display"),nw.disabled=!1}catch(t){n.innerHTML="",e.style.display="none",nw.disabled=!0}uw()})),nw.addEventListener("click",Yb(Vb().mark((function t(){var e;return Vb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new FormData).append("alignment_file",ew.files[0]),nw.disabled=!0,t.next=5,pw(e);case 5:case"end":return t.stop()}}),t)})))),aw.addEventListener("click",function(){var t=Yb(Vb().mark((function t(e){var n,r,i,o,a,s,u,l;return Vb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return nw.disabled=!0,e.target.disabled=!0,n=document.getElementById("example_alignment_select"),r=n.value,i=n.options[n.selectedIndex].getAttribute("data-alignment-type"),t.next=7,fetch("/get_example/".concat(r),{method:"GET"});case 7:if((o=t.sent).ok){t.next=13;break}return alert("EXAMPLE DATASET NOT FOUND ".concat(r)),nw.disabled=!1,e.target.disabled=!1,t.abrupt("return");case 13:return t.next=15,o.json();case 15:a=t.sent,s=a.sequences,u=a.tree,l=new Ub(u),dw(s,i,l),e.target.disabled=!1;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),lw()})()})();